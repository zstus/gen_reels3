#!/bin/bash
# Git ì„¤ì • ë° GitHub ë™ê¸°í™” ê°€ì´ë“œ
# Ubuntu ì„œë²„ì—ì„œ ì‹¤í–‰í•  ëª…ë ¹ì–´ë“¤

echo "=== Git ë° GitHub ì„¤ì • ê°€ì´ë“œ ==="

# 1. Git ì„¤ì¹˜ (Ubuntu)
echo "1. Git ì„¤ì¹˜..."
sudo apt update
sudo apt install git -y

# 2. Git ì‚¬ìš©ì ì •ë³´ ì„¤ì • (ê°œì¸ ì •ë³´ë¡œ ë³€ê²½ í•„ìš”)
echo "2. Git ì‚¬ìš©ì ì •ë³´ ì„¤ì •..."
git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"

# 3. í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
echo "3. í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ í™•ì¸..."
cd /zstus/backend
pwd

# 4. Git ì €ì¥ì†Œ ì´ˆê¸°í™”
echo "4. Git ì €ì¥ì†Œ ì´ˆê¸°í™”..."
git init

# 5. .gitignore íŒŒì¼ ìƒì„± (Python í”„ë¡œì íŠ¸ìš©)
echo "5. .gitignore íŒŒì¼ ìƒì„±..."
cat > .gitignore << 'EOF'
# Python
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
build/
develop-eggs/
dist/
downloads/
eggs/
.eggs/
lib/
lib64/
parts/
sdist/
var/
wheels/
*.egg-info/
.installed.cfg
*.egg

# Virtual Environment
venv/
env/
ENV/

# Environment variables
.env
.env.local
.env.production

# Output files
output_videos/
uploads/
temp/

# System files
.DS_Store
Thumbs.db

# IDE
.vscode/
.idea/
*.swp
*.swo

# Logs
*.log
logs/
EOF

# 6. íŒŒì¼ ì¶”ê°€
echo "6. íŒŒì¼ë“¤ì„ Gitì— ì¶”ê°€..."
git add .
git status

# 7. ì²« ë²ˆì§¸ ì»¤ë°‹
echo "7. ì²« ë²ˆì§¸ ì»¤ë°‹ ìƒì„±..."
git commit -m "Initial commit: Korean Reels Video Generator API

- FastAPI server with video generation capability
- MoviePy integration for video processing
- Korean TTS support with gTTS
- Local image support with Ken Burns effect
- Background music integration
- 414x896 smartphone resolution optimization"

# 8. GitHub ì €ì¥ì†Œ ìƒì„± (GitHub CLI í•„ìš”)
echo "8. GitHub CLI ì„¤ì¹˜ ë° ì €ì¥ì†Œ ìƒì„±..."
# GitHub CLI ì„¤ì¹˜ (Ubuntu)
curl -fsSL https://cli.github.com/packages/githubcli-archive-keyring.gpg | sudo dd of=/usr/share/keyrings/githubcli-archive-keyring.gpg
echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/githubcli-archive-keyring.gpg] https://cli.github.com/packages stable main" | sudo tee /etc/apt/sources.list.d/github-cli.list > /dev/null
sudo apt update
sudo apt install gh -y

# GitHub ë¡œê·¸ì¸
echo "GitHubì— ë¡œê·¸ì¸í•˜ì„¸ìš”..."
gh auth login

# GitHub ì €ì¥ì†Œ ìƒì„±
echo "GitHub ì €ì¥ì†Œ ìƒì„±..."
gh repo create ubt_genReels --public --description "Korean Reels Video Generator - FastAPI server that converts JSON content to vertical video reels with Korean TTS and music"

# 9. ì›ê²© ì €ì¥ì†Œ ì—°ê²°
echo "9. ì›ê²© ì €ì¥ì†Œ ì—°ê²°..."
git remote add origin https://github.com/zstus/gen_reels.git

# 10. ì²« ë²ˆì§¸ í‘¸ì‹œ
echo "10. GitHubì— ì²« ë²ˆì§¸ í‘¸ì‹œ..."
git branch -M main
git push -u origin main

# 11. í–¥í›„ ì‘ì—…ì„ ìœ„í•œ ë¸Œëœì¹˜ ìƒì„±
echo "11. ê°œë°œ ë¸Œëœì¹˜ ìƒì„±..."
git checkout -b develop
git push -u origin develop

echo ""
echo "=== Git ì„¤ì • ì™„ë£Œ! ==="
echo "âœ… Git ì €ì¥ì†Œ ì´ˆê¸°í™”ë¨"
echo "âœ… GitHub ì €ì¥ì†Œ ìƒì„±ë¨"
echo "âœ… ì›ê²© ì €ì¥ì†Œ ì—°ê²°ë¨"
echo "âœ… ì²« ë²ˆì§¸ ì»¤ë°‹ ë° í‘¸ì‹œ ì™„ë£Œ"
echo "âœ… ê°œë°œ ë¸Œëœì¹˜(develop) ì¤€ë¹„ë¨"
echo ""
echo "ğŸ“ ì•ìœ¼ë¡œ ì‘ì—… ë°©ë²•:"
echo "   git add ."
echo "   git commit -m 'ì‘ì—… ë‚´ìš©'"" 
echo "   git push"
echo ""
echo "ğŸ“ ìƒˆë¡œìš´ ê¸°ëŠ¥ ì‘ì—…ì‹œ:"
echo "   git checkout -b feature/ê¸°ëŠ¥ëª…"
echo "   git push -u origin feature/ê¸°ëŠ¥ëª…"
echo ""
echo "ğŸ“ ë©”ì¸ ë¸Œëœì¹˜ ì—…ë°ì´íŠ¸ì‹œ:"
echo "   git checkout main"
echo "   git merge develop"
echo "   git push"

# === ê°œì¸ ì •ë³´ ë³€ê²½ ê°€ì´ë“œ ===
echo ""
echo "âš ï¸  ì¤‘ìš”: ë‹¤ìŒ ì •ë³´ë¥¼ ê°œì¸ ì •ë³´ë¡œ ë³€ê²½í•˜ì„¸ìš”:"
echo "   - user.name: 'Your Name' â†’ ì‹¤ì œ ì´ë¦„"
echo "   - user.email: 'your.email@example.com' â†’ ì‹¤ì œ ì´ë©”ì¼"
echo ""
echo "ğŸ’¡ ë³€ê²½ ë°©ë²•:"
echo "   git config --global user.name 'ì‹¤ì œì´ë¦„'"
echo "   git config --global user.email 'email@domain.com'"