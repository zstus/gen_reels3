{"ast":null,"code":"var _jsxFileName = \"/zstus/frontend/src/components/TextImagePairManager.tsx\",\n  _s2 = $RefreshSig$();\nimport React, { useState, useCallback, useMemo, memo, useEffect, useRef } from 'react';\nimport { Box, Typography, Button, Grid, Card, CardContent, IconButton, Alert, CircularProgress, TextField, FormControlLabel, Switch, Collapse } from '@mui/material';\nimport { CloudUpload, Delete, AutoFixHigh, Refresh, Download, ExpandMore, ExpandLess } from '@mui/icons-material';\nimport { useDropzone } from 'react-dropzone';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TextImagePairManager = ({\n  content,\n  imageUploadMode,\n  images,\n  onChange\n}) => {\n  _s2();\n  var _s = $RefreshSig$();\n  const [generationStatus, setGenerationStatus] = useState({});\n  const [uploadErrors, setUploadErrors] = useState({});\n  const [customPrompts, setCustomPrompts] = useState({});\n  const [promptsExpanded, setPromptsExpanded] = useState({});\n\n  // ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ ê´€ë¦¬ í•¨ìˆ˜ë“¤ (useCallbackìœ¼ë¡œ ìµœì í™”)\n  const updateCustomPrompt = useCallback((imageIndex, prompt, enabled) => {\n    setCustomPrompts(prev => ({\n      ...prev,\n      [imageIndex]: {\n        imageIndex,\n        prompt,\n        enabled\n      }\n    }));\n  }, []);\n  const togglePromptExpanded = useCallback(imageIndex => {\n    setPromptsExpanded(prev => ({\n      ...prev,\n      [imageIndex]: !prev[imageIndex]\n    }));\n  }, []);\n\n  // í…ìŠ¤íŠ¸-ì´ë¯¸ì§€ ìŒ ë°ì´í„° ìƒì„± (useMemoë¡œ ìµœì í™”)\n  const textImagePairs = useMemo(() => {\n    const bodyTexts = Object.entries(content).filter(([key, value]) => key.startsWith('body') && (value === null || value === void 0 ? void 0 : value.trim())).map(([key, value], index) => ({\n      key,\n      value: value.trim(),\n      index\n    }));\n\n    // ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì§„ ì´ë¯¸ì§€ë“¤ì„ ë§µìœ¼ë¡œ ìƒì„±\n    const imageMap = new Map();\n    images.forEach(img => {\n      const storedIndex = img.__imageIndex;\n      if (typeof storedIndex === 'number') {\n        imageMap.set(storedIndex, img);\n      }\n    });\n    console.log('ğŸ—ºï¸ createTextImagePairs - imageMap:', Array.from(imageMap.entries()).map(([idx, file]) => `${idx}:${file.name}`));\n    console.log('ğŸ“ bodyTexts ê¸¸ì´:', bodyTexts.length, 'imageUploadMode:', imageUploadMode);\n    console.log('ğŸ” ë°›ì€ images ë°°ì—´:', images.map(img => `${img.name}(__imageIndex:${img.__imageIndex})`));\n    const pairs = [];\n    if (imageUploadMode === 'per-script') {\n      // í…ìŠ¤íŠ¸ 1ê°œë‹¹ ì´ë¯¸ì§€ 1ê°œ\n      bodyTexts.forEach(({\n        key,\n        value,\n        index\n      }) => {\n        const foundImage = imageMap.get(index);\n        const customPrompt = customPrompts[index];\n        console.log(`ğŸ“‹ per-script: textIndex=${index}, imageIndex=${index}, foundImage=${(foundImage === null || foundImage === void 0 ? void 0 : foundImage.name) || 'null'}`);\n        pairs.push({\n          textIndex: index,\n          textKey: key,\n          textContent: value,\n          image: foundImage || null,\n          imageIndex: index,\n          // ì‹¤ì œ ì´ë¯¸ì§€ ì¸ë±ìŠ¤ ì €ì¥\n          isGenerating: false,\n          customPrompt: (customPrompt === null || customPrompt === void 0 ? void 0 : customPrompt.prompt) || '',\n          useCustomPrompt: (customPrompt === null || customPrompt === void 0 ? void 0 : customPrompt.enabled) || false\n        });\n      });\n    } else {\n      // í…ìŠ¤íŠ¸ 2ê°œë‹¹ ì´ë¯¸ì§€ 1ê°œ\n      for (let i = 0; i < bodyTexts.length; i += 2) {\n        const imageIndex = Math.floor(i / 2);\n        const text1 = bodyTexts[i];\n        const text2 = bodyTexts[i + 1];\n        if (text1) {\n          const foundImage = imageMap.get(imageIndex);\n          const customPrompt = customPrompts[imageIndex];\n          console.log(`ğŸ“‹ per-two-scripts: textIndex=${i}, imageIndex=${imageIndex}, foundImage=${(foundImage === null || foundImage === void 0 ? void 0 : foundImage.name) || 'null'}`);\n          pairs.push({\n            textIndex: i,\n            textKey: `${text1.key}${text2 ? `+${text2.key}` : ''}`,\n            textContent: `${text1.value}${text2 ? ` / ${text2.value}` : ''}`,\n            image: foundImage || null,\n            imageIndex: imageIndex,\n            // ì‹¤ì œ ì´ë¯¸ì§€ ì¸ë±ìŠ¤ ì €ì¥\n            isGenerating: false,\n            customPrompt: (customPrompt === null || customPrompt === void 0 ? void 0 : customPrompt.prompt) || '',\n            useCustomPrompt: (customPrompt === null || customPrompt === void 0 ? void 0 : customPrompt.enabled) || false\n          });\n        }\n      }\n    }\n    console.log('ğŸ¯ ìµœì¢… pairs ê°œìˆ˜:', pairs.length);\n    return pairs;\n  }, [content, images, imageUploadMode, customPrompts]);\n\n  // í˜„ì¬ images ë°°ì—´ ìƒíƒœ ë¡œê¹…\n  console.log('ğŸ“¦ í˜„ì¬ images ë°°ì—´ ê¸¸ì´:', images.length);\n  console.log('ğŸ“¦ í˜„ì¬ images ë°°ì—´:', images.length > 0 ? images.map(img => `${img.name}(index:${img.__imageIndex})`) : 'ë¹ˆ ë°°ì—´');\n  console.log('ğŸ® generationStatus:', generationStatus);\n\n  // ê°œë³„ ì´ë¯¸ì§€ ì—…ë¡œë“œ í•¸ë“¤ëŸ¬\n  const handleIndividualImageUpload = useCallback((imageIndex, acceptedFiles) => {\n    if (acceptedFiles.length === 0) return;\n    const file = acceptedFiles[0];\n\n    // ê¸°ì¡´ ì—ëŸ¬ ìƒíƒœ ì œê±°\n    setUploadErrors(prev => {\n      const newErrors = {\n        ...prev\n      };\n      delete newErrors[imageIndex];\n      return newErrors;\n    });\n\n    // íŒŒì¼ ìœ íš¨ì„± ê²€ì¦\n    if (file.size > 10 * 1024 * 1024) {\n      setUploadErrors(prev => ({\n        ...prev,\n        [imageIndex]: 'íŒŒì¼ í¬ê¸°ê°€ 10MBë¥¼ ì´ˆê³¼í•©ë‹ˆë‹¤'\n      }));\n      return;\n    }\n    const isImage = file.type.startsWith('image/');\n    const isVideo = file.type.startsWith('video/');\n    if (!isImage && !isVideo) {\n      setUploadErrors(prev => ({\n        ...prev,\n        [imageIndex]: 'ì´ë¯¸ì§€ ë˜ëŠ” ë¹„ë””ì˜¤ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤'\n      }));\n      return;\n    }\n    console.log('ğŸ”§ handleIndividualImageUpload - imageIndex:', imageIndex, 'fileName:', file.name);\n\n    // íŒŒì¼ì— ìœ„ì¹˜ ì •ë³´ ì¶”ê°€\n    file.__imageIndex = imageIndex;\n    console.log('ğŸ·ï¸ íŒŒì¼ì— __imageIndex ì„¤ì •:', imageIndex);\n\n    // í˜„ì¬ imagesì—ì„œ í•´ë‹¹ imageIndexë¥¼ ê°€ì§„ íŒŒì¼ ì œê±°í•˜ê³  ìƒˆ íŒŒì¼ ì¶”ê°€\n    const newImages = images.filter(img => img.__imageIndex !== imageIndex);\n    newImages.push(file);\n\n    // imageIndex ìˆœìœ¼ë¡œ ì •ë ¬\n    newImages.sort((a, b) => {\n      var _imageIndex, _imageIndex2;\n      const indexA = (_imageIndex = a.__imageIndex) !== null && _imageIndex !== void 0 ? _imageIndex : 0;\n      const indexB = (_imageIndex2 = b.__imageIndex) !== null && _imageIndex2 !== void 0 ? _imageIndex2 : 0;\n      return indexA - indexB;\n    });\n    console.log('ğŸ“Š ì—…ë°ì´íŠ¸ëœ images ë°°ì—´:', newImages.map(img => `${img.name}(index:${img.__imageIndex})`));\n    onChange(newImages, imageUploadMode);\n  }, [images, imageUploadMode, content, onChange]);\n\n  // ê°œë³„ ì´ë¯¸ì§€ ìë™ ìƒì„±\n  const handleIndividualGenerate = async (imageIndex, textContent, customPrompt, useCustomPrompt) => {\n    console.log('ğŸ¤– handleIndividualGenerate ì‹œì‘ - imageIndex:', imageIndex, 'textContent:', textContent, 'customPrompt:', customPrompt, 'useCustomPrompt:', useCustomPrompt);\n    setGenerationStatus(prev => ({\n      ...prev,\n      [imageIndex]: 'generating'\n    }));\n    try {\n      // ìš”ì²­ ë°”ë”” êµ¬ì„±\n      let requestBody = {};\n      if (useCustomPrompt && customPrompt !== null && customPrompt !== void 0 && customPrompt.trim()) {\n        // ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ ì‚¬ìš©\n        requestBody.custom_prompt = customPrompt.trim();\n        console.log('ğŸ“ ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ ì‚¬ìš©:', customPrompt.trim());\n      } else {\n        // ê¸°ì¡´ í…ìŠ¤íŠ¸ ì‚¬ìš©\n        const texts = textContent.split(' / ');\n        requestBody.text = texts[0]; // ì²« ë²ˆì§¸ í…ìŠ¤íŠ¸ ì‚¬ìš©\n        if (texts.length > 1) {\n          requestBody.additional_context = texts[1];\n        }\n        console.log('ğŸ“ ê¸°ë³¸ í…ìŠ¤íŠ¸ ì‚¬ìš©:', texts[0]);\n      }\n      const response = await fetch('/generate-single-image', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(requestBody)\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.detail || 'ì´ë¯¸ì§€ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');\n      }\n      const data = await response.json();\n      const imageUrl = data.image_url;\n\n      // ìƒì„±ëœ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê³  File ê°ì²´ë¡œ ë³€í™˜\n      const imageResponse = await fetch(imageUrl);\n      if (!imageResponse.ok) {\n        throw new Error('ìƒì„±ëœ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');\n      }\n      const blob = await imageResponse.blob();\n      const fileName = `generated_image_pair_${imageIndex}.png`;\n      const file = new File([blob], fileName, {\n        type: 'image/png'\n      });\n      console.log('ğŸ“¸ ì´ë¯¸ì§€ ìƒì„± ì™„ë£Œ - fileName:', fileName, 'í˜¸ì¶œí•  imageIndex:', imageIndex);\n\n      // ì´ë¯¸ì§€ ë°°ì—´ ì—…ë°ì´íŠ¸\n      handleIndividualImageUpload(imageIndex, [file]);\n      setGenerationStatus(prev => ({\n        ...prev,\n        [imageIndex]: 'success'\n      }));\n      setTimeout(() => {\n        setGenerationStatus(prev => {\n          const newStatus = {\n            ...prev\n          };\n          delete newStatus[imageIndex];\n          return newStatus;\n        });\n      }, 3000);\n    } catch (error) {\n      console.error('ê°œë³„ ì´ë¯¸ì§€ ìƒì„± ì˜¤ë¥˜:', error);\n      setGenerationStatus(prev => ({\n        ...prev,\n        [imageIndex]: 'error'\n      }));\n      setTimeout(() => {\n        setGenerationStatus(prev => {\n          const newStatus = {\n            ...prev\n          };\n          delete newStatus[imageIndex];\n          return newStatus;\n        });\n      }, 5000);\n    }\n  };\n\n  // ê°œë³„ ì´ë¯¸ì§€ ì‚­ì œ (ê°œì„ ë¨)\n  const handleRemoveImage = imageIndex => {\n    console.log('ğŸ—‘ï¸ ì´ë¯¸ì§€ ì‚­ì œ ìš”ì²­ - imageIndex:', imageIndex);\n\n    // ì§€ì •ëœ imageIndexë¥¼ ê°€ì§„ íŒŒì¼ì„ ì œê±°\n    const newImages = images.filter(img => img.__imageIndex !== imageIndex);\n\n    // í•´ë‹¹ ì¸ë±ìŠ¤ì˜ ì—ëŸ¬ ìƒíƒœë„ í•¨ê»˜ ì œê±°\n    setUploadErrors(prev => {\n      const newErrors = {\n        ...prev\n      };\n      delete newErrors[imageIndex];\n      return newErrors;\n    });\n\n    // ìƒì„± ìƒíƒœë„ í•¨ê»˜ ì œê±°\n    setGenerationStatus(prev => {\n      const newStatus = {\n        ...prev\n      };\n      delete newStatus[imageIndex];\n      return newStatus;\n    });\n    console.log('âœ… ì´ë¯¸ì§€ ì‚­ì œ ì™„ë£Œ - imageIndex:', imageIndex);\n    console.log('ğŸ“Š ë‚¨ì€ ì´ë¯¸ì§€:', newImages.map(img => `${img.name}(index:${img.__imageIndex})`));\n    onChange(newImages, imageUploadMode);\n  };\n\n  // ê°œë³„ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ\n  const handleDownloadImage = async (imageIndex, image) => {\n    try {\n      // ìƒì„±ëœ ì´ë¯¸ì§€ì¸ì§€ í™•ì¸ (filenameìœ¼ë¡œ íŒë‹¨)\n      if (image.name.startsWith('generated_')) {\n        // ë°±ì—”ë“œ ë‹¤ìš´ë¡œë“œ APIë¥¼ í†µí•´ ë‹¤ìš´ë¡œë“œ\n        const link = document.createElement('a');\n        link.href = `/download-image/${image.name}`;\n        link.download = `reels_image_${imageIndex + 1}.png`;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n      } else {\n        // ì—…ë¡œë“œëœ íŒŒì¼ì€ ì§ì ‘ ë‹¤ìš´ë¡œë“œ\n        const url = URL.createObjectURL(image);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `reels_image_${imageIndex + 1}_${image.name}`;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        URL.revokeObjectURL(url);\n      }\n      console.log('ğŸ’¾ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ ì™„ë£Œ - imageIndex:', imageIndex, 'fileName:', image.name);\n    } catch (error) {\n      console.error('ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ ì˜¤ë¥˜:', error);\n    }\n  };\n\n  // ê°œë³„ ë“œë˜ê·¸ì•¤ë“œë¡­ ì»´í¬ë„ŒíŠ¸ (React.memoë¡œ ìµœì í™”)\n  const IndividualDropZone = /*#__PURE__*/_s(/*#__PURE__*/memo(_s(({\n    imageIndex,\n    pair\n  }) => {\n    _s();\n    const onDrop = useCallback(acceptedFiles => {\n      handleIndividualImageUpload(imageIndex, acceptedFiles);\n    }, [imageIndex]);\n    const {\n      getRootProps,\n      getInputProps,\n      isDragActive\n    } = useDropzone({\n      onDrop,\n      accept: {\n        'image/*': ['.jpeg', '.jpg', '.png', '.gif', '.webp', '.bmp'],\n        'video/*': ['.mp4', '.mov', '.avi', '.webm']\n      },\n      maxFiles: 1,\n      multiple: false\n    });\n    const isGenerating = generationStatus[imageIndex] === 'generating';\n    const generationError = generationStatus[imageIndex] === 'error';\n    const generationSuccess = generationStatus[imageIndex] === 'success';\n    const uploadError = uploadErrors[imageIndex];\n    const isPromptExpanded = promptsExpanded[imageIndex] || false;\n    const currentCustomPrompt = customPrompts[imageIndex];\n\n    // refë¥¼ í†µí•œ í¬ì»¤ìŠ¤ ìœ ì§€\n    const textFieldRef = useRef(null);\n\n    // ë¡œì»¬ ìƒíƒœë¡œ ì…ë ¥ê°’ ê´€ë¦¬ (í¬ì»¤ìŠ¤ ìœ ì§€ë¥¼ ìœ„í•´)\n    const [localPromptValue, setLocalPromptValue] = useState((currentCustomPrompt === null || currentCustomPrompt === void 0 ? void 0 : currentCustomPrompt.prompt) || '');\n    const [isInitialized, setIsInitialized] = useState(false);\n    const [lastUpdateTime, setLastUpdateTime] = useState(0);\n\n    // ì´ˆê¸°í™” ì‹œì—ë§Œ ì™¸ë¶€ ìƒíƒœë¥¼ ë¡œì»¬ ìƒíƒœì— ë™ê¸°í™”\n    useEffect(() => {\n      if (!isInitialized) {\n        setLocalPromptValue((currentCustomPrompt === null || currentCustomPrompt === void 0 ? void 0 : currentCustomPrompt.prompt) || '');\n        setIsInitialized(true);\n      }\n    }, [currentCustomPrompt === null || currentCustomPrompt === void 0 ? void 0 : currentCustomPrompt.prompt, isInitialized]);\n\n    // ë””ë°”ìš´ìŠ¤ë¥¼ ìœ„í•œ useEffect - ì™¸ë¶€ ìƒíƒœ ì—…ë°ì´íŠ¸ ë°©ì§€\n    useEffect(() => {\n      const currentTime = Date.now();\n      setLastUpdateTime(currentTime);\n      const timeoutId = setTimeout(() => {\n        // ìµœì‹  ì—…ë°ì´íŠ¸ì¸ì§€ í™•ì¸ (ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€)\n        if (currentTime === lastUpdateTime) {\n          var _customPrompts$imageI;\n          const currentExternalValue = ((_customPrompts$imageI = customPrompts[imageIndex]) === null || _customPrompts$imageI === void 0 ? void 0 : _customPrompts$imageI.prompt) || '';\n          if (localPromptValue !== currentExternalValue) {\n            updateCustomPrompt(imageIndex, localPromptValue, (currentCustomPrompt === null || currentCustomPrompt === void 0 ? void 0 : currentCustomPrompt.enabled) || false);\n          }\n        }\n      }, 800); // ë””ë°”ìš´ìŠ¤ ì‹œê°„ì„ 800msë¡œ ëŠ˜ë¦¼\n\n      return () => clearTimeout(timeoutId);\n    }, [localPromptValue]);\n\n    // ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ ë³€ê²½ í•¸ë“¤ëŸ¬ (ë¡œì»¬ ìƒíƒœë§Œ ì—…ë°ì´íŠ¸)\n    const handleCustomPromptChange = useCallback(prompt => {\n      setLocalPromptValue(prompt);\n    }, []);\n\n    // ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ í™œì„±í™”/ë¹„í™œì„±í™” í•¸ë“¤ëŸ¬\n    const handleCustomPromptToggle = useCallback(enabled => {\n      updateCustomPrompt(imageIndex, localPromptValue, enabled);\n    }, [imageIndex, localPromptValue, updateCustomPrompt]);\n    return /*#__PURE__*/_jsxDEV(Card, {\n      sx: {\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column'\n      },\n      children: [/*#__PURE__*/_jsxDEV(CardContent, {\n        sx: {\n          flex: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          gutterBottom: true,\n          sx: {\n            fontSize: '0.9rem',\n            fontWeight: 600,\n            color: 'primary.main',\n            mb: 2\n          },\n          children: pair.textKey.replace('body', 'ëŒ€ì‚¬ ').replace('+body', ' + ëŒ€ì‚¬ ')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          sx: {\n            mb: 2,\n            p: 1.5,\n            bgcolor: 'grey.50',\n            borderRadius: 1,\n            border: '1px solid',\n            borderColor: 'grey.200',\n            fontSize: '0.8rem',\n            lineHeight: 1.4\n          },\n          children: pair.textContent\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mb: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'space-between',\n              mb: 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"caption\",\n              color: \"text.secondary\",\n              sx: {\n                fontWeight: 600\n              },\n              children: \"AI \\uC0DD\\uC131 \\uC635\\uC158\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n              size: \"small\",\n              onClick: () => togglePromptExpanded(imageIndex),\n              sx: {\n                p: 0.5\n              },\n              children: isPromptExpanded ? /*#__PURE__*/_jsxDEV(ExpandLess, {\n                fontSize: \"small\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 430,\n                columnNumber: 37\n              }, this) : /*#__PURE__*/_jsxDEV(ExpandMore, {\n                fontSize: \"small\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 430,\n                columnNumber: 71\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n            in: isPromptExpanded,\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                bgcolor: 'rgba(25, 118, 210, 0.04)',\n                p: 1.5,\n                borderRadius: 1,\n                border: '1px solid rgba(25, 118, 210, 0.12)'\n              },\n              children: [/*#__PURE__*/_jsxDEV(FormControlLabel, {\n                control: /*#__PURE__*/_jsxDEV(Switch, {\n                  checked: (currentCustomPrompt === null || currentCustomPrompt === void 0 ? void 0 : currentCustomPrompt.enabled) || false,\n                  onChange: e => handleCustomPromptToggle(e.target.checked),\n                  size: \"small\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 438,\n                  columnNumber: 21\n                }, this),\n                label: /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"caption\",\n                  sx: {\n                    fontWeight: 500\n                  },\n                  children: \"\\uCEE4\\uC2A4\\uD140 \\uD504\\uB86C\\uD504\\uD2B8 \\uC0AC\\uC6A9\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 445,\n                  columnNumber: 21\n                }, this),\n                sx: {\n                  mb: 1,\n                  ml: 0\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 436,\n                columnNumber: 17\n              }, this), (currentCustomPrompt === null || currentCustomPrompt === void 0 ? void 0 : currentCustomPrompt.enabled) && /*#__PURE__*/_jsxDEV(TextField, {\n                inputRef: textFieldRef,\n                fullWidth: true,\n                multiline: true,\n                rows: 2,\n                size: \"small\",\n                placeholder: \"\\uC774\\uBBF8\\uC9C0 \\uC0DD\\uC131\\uC744 \\uC704\\uD55C \\uCEE4\\uC2A4\\uD140 \\uD504\\uB86C\\uD504\\uD2B8\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694...\",\n                value: localPromptValue,\n                onChange: e => handleCustomPromptChange(e.target.value),\n                variant: \"outlined\",\n                sx: {\n                  '& .MuiOutlinedInput-root': {\n                    fontSize: '0.75rem',\n                    bgcolor: 'white'\n                  }\n                },\n                helperText: \"\\uC2E4\\uC81C \\uC601\\uC0C1\\uC5D0\\uC11C\\uB294 \\uAE30\\uC874 \\uB300\\uC0AC\\uAC00 \\uC0AC\\uC6A9\\uB418\\uBA70, \\uC774 \\uD504\\uB86C\\uD504\\uD2B8\\uB294 \\uC774\\uBBF8\\uC9C0 \\uC0DD\\uC131\\uC5D0\\uB9CC \\uC0AC\\uC6A9\\uB429\\uB2C8\\uB2E4.\",\n                autoComplete: \"off\",\n                spellCheck: \"false\"\n              }, `prompt-input-${imageIndex}-stable`, false, {\n                fileName: _jsxFileName,\n                lineNumber: 453,\n                columnNumber: 19\n              }, this), !(currentCustomPrompt !== null && currentCustomPrompt !== void 0 && currentCustomPrompt.enabled) && /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"caption\",\n                color: \"text.secondary\",\n                sx: {\n                  fontStyle: 'italic'\n                },\n                children: \"\\uAE30\\uBCF8 \\uBAA8\\uB4DC: \\uC704\\uC758 \\uB300\\uC0AC \\uB0B4\\uC6A9\\uC744 \\uAE30\\uBC18\\uC73C\\uB85C \\uC774\\uBBF8\\uC9C0\\uB97C \\uC0DD\\uC131\\uD569\\uB2C8\\uB2E4.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 477,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 434,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 11\n        }, this), pair.image ? /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            position: 'relative',\n            mb: 2\n          },\n          children: [pair.image.type.startsWith('video/') ? /*#__PURE__*/_jsxDEV(\"video\", {\n            src: URL.createObjectURL(pair.image),\n            style: {\n              width: '100%',\n              aspectRatio: '1/1',\n              objectFit: 'cover',\n              borderRadius: 8\n            },\n            muted: true,\n            loop: true,\n            autoPlay: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              width: '100%',\n              aspectRatio: '1/1',\n              backgroundImage: `url(${URL.createObjectURL(pair.image)})`,\n              backgroundSize: 'cover',\n              backgroundPosition: 'center',\n              borderRadius: 1\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              position: 'absolute',\n              top: 8,\n              right: 8,\n              display: 'flex',\n              gap: 0.5\n            },\n            children: [/*#__PURE__*/_jsxDEV(IconButton, {\n              size: \"small\",\n              onClick: () => handleDownloadImage(imageIndex, pair.image),\n              sx: {\n                bgcolor: 'rgba(255,255,255,0.9)',\n                '&:hover': {\n                  bgcolor: 'rgba(255,255,255,1)'\n                }\n              },\n              title: \"\\uC774\\uBBF8\\uC9C0 \\uB2E4\\uC6B4\\uB85C\\uB4DC\",\n              children: /*#__PURE__*/_jsxDEV(Download, {\n                color: \"success\",\n                fontSize: \"small\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 531,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 522,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n              size: \"small\",\n              onClick: () => handleRemoveImage(imageIndex),\n              sx: {\n                bgcolor: 'rgba(255,255,255,0.9)',\n                '&:hover': {\n                  bgcolor: 'rgba(255,255,255,1)'\n                }\n              },\n              title: \"\\uC774\\uBBF8\\uC9C0 \\uC0AD\\uC81C\",\n              children: /*#__PURE__*/_jsxDEV(Delete, {\n                color: \"error\",\n                fontSize: \"small\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 542,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 533,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n              size: \"small\",\n              onClick: () => {\n                console.log('ğŸ”„ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ í´ë¦­ë¨ - imageIndex:', imageIndex, 'textContent:', pair.textContent);\n                handleIndividualGenerate(imageIndex, pair.textContent, currentCustomPrompt === null || currentCustomPrompt === void 0 ? void 0 : currentCustomPrompt.prompt, currentCustomPrompt === null || currentCustomPrompt === void 0 ? void 0 : currentCustomPrompt.enabled);\n              },\n              disabled: isGenerating,\n              sx: {\n                bgcolor: 'rgba(255,255,255,0.9)',\n                '&:hover': {\n                  bgcolor: 'rgba(255,255,255,1)'\n                }\n              },\n              title: \"\\uC774\\uBBF8\\uC9C0 \\uC7AC\\uC0DD\\uC131\",\n              children: isGenerating ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 563,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(Refresh, {\n                color: \"primary\",\n                fontSize: \"small\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 565,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 544,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 515,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"caption\",\n            sx: {\n              position: 'absolute',\n              bottom: 4,\n              left: 8,\n              bgcolor: 'rgba(0,0,0,0.7)',\n              color: 'white',\n              px: 1,\n              py: 0.5,\n              borderRadius: 1\n            },\n            children: pair.image.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 570,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Box, {\n          ...getRootProps(),\n          sx: {\n            border: 2,\n            borderColor: isDragActive ? 'primary.main' : 'grey.300',\n            borderStyle: 'dashed',\n            borderRadius: 1,\n            p: 2,\n            textAlign: 'center',\n            cursor: 'pointer',\n            bgcolor: isDragActive ? 'action.hover' : 'background.paper',\n            mb: 2,\n            aspectRatio: '1/1',\n            display: 'flex',\n            flexDirection: 'column',\n            justifyContent: 'center',\n            '&:hover': {\n              borderColor: 'primary.main',\n              bgcolor: 'action.hover'\n            }\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            ...getInputProps()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 606,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(CloudUpload, {\n            sx: {\n              fontSize: 32,\n              color: 'grey.400',\n              mb: 1\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 607,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"caption\",\n            color: \"text.secondary\",\n            children: isDragActive ? 'íŒŒì¼ì„ ë†“ìœ¼ì„¸ìš”' : 'ë¯¸ë””ì–´ ë“œë˜ê·¸ ë˜ëŠ” í´ë¦­'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 608,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 584,\n          columnNumber: 13\n        }, this), isGenerating && /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"info\",\n          sx: {\n            mt: 1\n          },\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(CircularProgress, {\n              size: 16,\n              sx: {\n                mr: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 618,\n              columnNumber: 17\n            }, this), \"\\uC774\\uBBF8\\uC9C0 \\uC0DD\\uC131 \\uC911...\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 617,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 616,\n          columnNumber: 13\n        }, this), generationSuccess && /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"success\",\n          sx: {\n            mt: 1\n          },\n          children: \"\\uC774\\uBBF8\\uC9C0 \\uC0DD\\uC131 \\uC644\\uB8CC!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 625,\n          columnNumber: 13\n        }, this), generationError && /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"error\",\n          sx: {\n            mt: 1\n          },\n          children: \"\\uC774\\uBBF8\\uC9C0 \\uC0DD\\uC131 \\uC2E4\\uD328. \\uB2E4\\uC2DC \\uC2DC\\uB3C4\\uD574\\uC8FC\\uC138\\uC694.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 631,\n          columnNumber: 13\n        }, this), uploadError && /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"error\",\n          sx: {\n            mt: 1\n          },\n          children: uploadError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 637,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          p: 1.5,\n          pt: 0\n        },\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          fullWidth: true,\n          variant: \"outlined\",\n          size: \"small\",\n          startIcon: /*#__PURE__*/_jsxDEV(AutoFixHigh, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 649,\n            columnNumber: 24\n          }, this),\n          onClick: () => {\n            console.log('ğŸ–±ï¸ ìë™ìƒì„± ë²„íŠ¼ í´ë¦­ë¨ - imageIndex:', imageIndex, 'textContent:', pair.textContent);\n            handleIndividualGenerate(imageIndex, pair.textContent, currentCustomPrompt === null || currentCustomPrompt === void 0 ? void 0 : currentCustomPrompt.prompt, currentCustomPrompt === null || currentCustomPrompt === void 0 ? void 0 : currentCustomPrompt.enabled);\n          },\n          disabled: isGenerating,\n          sx: {\n            bgcolor: currentCustomPrompt !== null && currentCustomPrompt !== void 0 && currentCustomPrompt.enabled ? 'rgba(25, 118, 210, 0.08)' : 'transparent',\n            borderColor: currentCustomPrompt !== null && currentCustomPrompt !== void 0 && currentCustomPrompt.enabled ? 'primary.main' : 'grey.300',\n            color: currentCustomPrompt !== null && currentCustomPrompt !== void 0 && currentCustomPrompt.enabled ? 'primary.main' : 'text.primary',\n            '&:hover': {\n              bgcolor: currentCustomPrompt !== null && currentCustomPrompt !== void 0 && currentCustomPrompt.enabled ? 'rgba(25, 118, 210, 0.12)' : 'action.hover'\n            }\n          },\n          children: isGenerating ? 'ìƒì„±ì¤‘...' : currentCustomPrompt !== null && currentCustomPrompt !== void 0 && currentCustomPrompt.enabled ? 'ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ë¡œ ìƒì„±' : 'AI ìë™ìƒì„±'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 645,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 644,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 7\n    }, this);\n  }, \"sDGpg5Y9h0DOXaEuNNeJtAt2FEo=\", false, function () {\n    return [useDropzone];\n  })), \"sDGpg5Y9h0DOXaEuNNeJtAt2FEo=\", false, function () {\n    return [useDropzone];\n  });\n  return /*#__PURE__*/_jsxDEV(Box, {\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h6\",\n      gutterBottom: true,\n      sx: {\n        mb: 3\n      },\n      children: \"\\uD14D\\uC2A4\\uD2B8-\\uC774\\uBBF8\\uC9C0 \\uB9E4\\uCE6D \\uAD00\\uB9AC\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 678,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"body2\",\n      color: \"text.secondary\",\n      sx: {\n        mb: 3\n      },\n      children: \"\\uAC01 \\uD14D\\uC2A4\\uD2B8\\uC5D0 \\uB300\\uC751\\uB418\\uB294 \\uC774\\uBBF8\\uC9C0\\uB97C \\uAC1C\\uBCC4\\uC801\\uC73C\\uB85C \\uAD00\\uB9AC\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4. \\uB4DC\\uB798\\uADF8\\uC564\\uB4DC\\uB86D\\uC73C\\uB85C \\uC774\\uBBF8\\uC9C0\\uB97C \\uC5C5\\uB85C\\uB4DC\\uD558\\uAC70\\uB098 AI\\uB85C \\uC790\\uB3D9 \\uC0DD\\uC131\\uD558\\uC138\\uC694.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 682,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 2,\n      children: textImagePairs.map((pair, index) => /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        sm: 6,\n        md: 4,\n        children: /*#__PURE__*/_jsxDEV(IndividualDropZone, {\n          imageIndex: pair.imageIndex,\n          pair: pair\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 690,\n          columnNumber: 13\n        }, this)\n      }, pair.textKey, false, {\n        fileName: _jsxFileName,\n        lineNumber: 689,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 687,\n      columnNumber: 7\n    }, this), textImagePairs.length === 0 && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"info\",\n      sx: {\n        mt: 2\n      },\n      children: \"\\uB300\\uBCF8\\uC744 \\uBA3C\\uC800 \\uC791\\uC131\\uD574\\uC8FC\\uC138\\uC694.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 696,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 677,\n    columnNumber: 5\n  }, this);\n};\n_s2(TextImagePairManager, \"Z+kad0TwrwFH4alH6Kt/Aerwdwk=\");\n_c = TextImagePairManager;\nexport default TextImagePairManager;\nvar _c;\n$RefreshReg$(_c, \"TextImagePairManager\");","map":{"version":3,"names":["React","useState","useCallback","useMemo","memo","useEffect","useRef","Box","Typography","Button","Grid","Card","CardContent","IconButton","Alert","CircularProgress","TextField","FormControlLabel","Switch","Collapse","CloudUpload","Delete","AutoFixHigh","Refresh","Download","ExpandMore","ExpandLess","useDropzone","jsxDEV","_jsxDEV","TextImagePairManager","content","imageUploadMode","images","onChange","_s2","_s","$RefreshSig$","generationStatus","setGenerationStatus","uploadErrors","setUploadErrors","customPrompts","setCustomPrompts","promptsExpanded","setPromptsExpanded","updateCustomPrompt","imageIndex","prompt","enabled","prev","togglePromptExpanded","textImagePairs","bodyTexts","Object","entries","filter","key","value","startsWith","trim","map","index","imageMap","Map","forEach","img","storedIndex","__imageIndex","set","console","log","Array","from","idx","file","name","length","pairs","foundImage","get","customPrompt","push","textIndex","textKey","textContent","image","isGenerating","useCustomPrompt","i","Math","floor","text1","text2","handleIndividualImageUpload","acceptedFiles","newErrors","size","isImage","type","isVideo","newImages","sort","a","b","_imageIndex","_imageIndex2","indexA","indexB","handleIndividualGenerate","requestBody","custom_prompt","texts","split","text","additional_context","response","fetch","method","headers","body","JSON","stringify","ok","errorData","json","Error","detail","data","imageUrl","image_url","imageResponse","blob","fileName","File","setTimeout","newStatus","error","handleRemoveImage","handleDownloadImage","link","document","createElement","href","download","appendChild","click","removeChild","url","URL","createObjectURL","revokeObjectURL","IndividualDropZone","pair","onDrop","getRootProps","getInputProps","isDragActive","accept","maxFiles","multiple","generationError","generationSuccess","uploadError","isPromptExpanded","currentCustomPrompt","textFieldRef","localPromptValue","setLocalPromptValue","isInitialized","setIsInitialized","lastUpdateTime","setLastUpdateTime","currentTime","Date","now","timeoutId","_customPrompts$imageI","currentExternalValue","clearTimeout","handleCustomPromptChange","handleCustomPromptToggle","sx","height","display","flexDirection","children","flex","variant","gutterBottom","fontSize","fontWeight","color","mb","replace","_jsxFileName","lineNumber","columnNumber","p","bgcolor","borderRadius","border","borderColor","lineHeight","alignItems","justifyContent","onClick","in","control","checked","e","target","label","ml","inputRef","fullWidth","multiline","rows","placeholder","helperText","autoComplete","spellCheck","fontStyle","position","src","style","width","aspectRatio","objectFit","muted","loop","autoPlay","backgroundImage","backgroundSize","backgroundPosition","top","right","gap","title","disabled","bottom","left","px","py","borderStyle","textAlign","cursor","severity","mt","mr","pt","startIcon","container","spacing","item","xs","sm","md","_c","$RefreshReg$"],"sources":["/zstus/frontend/src/components/TextImagePairManager.tsx"],"sourcesContent":["import React, { useState, useCallback, useMemo, memo, useEffect, useRef } from 'react';\nimport {\n  Box,\n  Paper,\n  Typography,\n  Button,\n  Grid,\n  Card,\n  CardContent,\n  IconButton,\n  Chip,\n  Alert,\n  CircularProgress,\n  TextField,\n  FormControlLabel,\n  Switch,\n  Collapse,\n} from '@mui/material';\nimport {\n  CloudUpload,\n  Delete,\n  AutoFixHigh,\n  Refresh,\n  Image as ImageIcon,\n  Download,\n  Edit as EditIcon,\n  ExpandMore,\n  ExpandLess\n} from '@mui/icons-material';\nimport { useDropzone } from 'react-dropzone';\nimport { ReelsContent, ImageUploadMode, TextImagePair, CustomPrompt } from '../types';\n\ninterface TextImagePairManagerProps {\n  content: ReelsContent;\n  imageUploadMode: ImageUploadMode;\n  images: File[];\n  onChange: (images: File[], mode: ImageUploadMode) => void;\n}\n\nconst TextImagePairManager: React.FC<TextImagePairManagerProps> = ({\n  content,\n  imageUploadMode,\n  images,\n  onChange,\n}) => {\n  const [generationStatus, setGenerationStatus] = useState<{ [key: string]: string }>({});\n  const [uploadErrors, setUploadErrors] = useState<{ [key: number]: string }>({});\n  const [customPrompts, setCustomPrompts] = useState<{ [key: number]: CustomPrompt }>({});\n  const [promptsExpanded, setPromptsExpanded] = useState<{ [key: number]: boolean }>({});\n\n  // ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ ê´€ë¦¬ í•¨ìˆ˜ë“¤ (useCallbackìœ¼ë¡œ ìµœì í™”)\n  const updateCustomPrompt = useCallback((imageIndex: number, prompt: string, enabled: boolean) => {\n    setCustomPrompts(prev => ({\n      ...prev,\n      [imageIndex]: {\n        imageIndex,\n        prompt,\n        enabled\n      }\n    }));\n  }, []);\n\n  const togglePromptExpanded = useCallback((imageIndex: number) => {\n    setPromptsExpanded(prev => ({\n      ...prev,\n      [imageIndex]: !prev[imageIndex]\n    }));\n  }, []);\n\n  // í…ìŠ¤íŠ¸-ì´ë¯¸ì§€ ìŒ ë°ì´í„° ìƒì„± (useMemoë¡œ ìµœì í™”)\n  const textImagePairs = useMemo((): (TextImagePair & { imageIndex: number })[] => {\n    const bodyTexts = Object.entries(content)\n      .filter(([key, value]) => key.startsWith('body') && value?.trim())\n      .map(([key, value], index) => ({ key, value: value.trim(), index }));\n\n    // ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì§„ ì´ë¯¸ì§€ë“¤ì„ ë§µìœ¼ë¡œ ìƒì„±\n    const imageMap = new Map<number, File>();\n    images.forEach(img => {\n      const storedIndex = (img as any).__imageIndex;\n      if (typeof storedIndex === 'number') {\n        imageMap.set(storedIndex, img);\n      }\n    });\n\n    console.log('ğŸ—ºï¸ createTextImagePairs - imageMap:', Array.from(imageMap.entries()).map(([idx, file]) => `${idx}:${file.name}`));\n    console.log('ğŸ“ bodyTexts ê¸¸ì´:', bodyTexts.length, 'imageUploadMode:', imageUploadMode);\n    console.log('ğŸ” ë°›ì€ images ë°°ì—´:', images.map(img => `${img.name}(__imageIndex:${(img as any).__imageIndex})`));\n\n    const pairs: (TextImagePair & { imageIndex: number })[] = [];\n\n    if (imageUploadMode === 'per-script') {\n      // í…ìŠ¤íŠ¸ 1ê°œë‹¹ ì´ë¯¸ì§€ 1ê°œ\n      bodyTexts.forEach(({ key, value, index }) => {\n        const foundImage = imageMap.get(index);\n        const customPrompt = customPrompts[index];\n        console.log(`ğŸ“‹ per-script: textIndex=${index}, imageIndex=${index}, foundImage=${foundImage?.name || 'null'}`);\n        pairs.push({\n          textIndex: index,\n          textKey: key,\n          textContent: value,\n          image: foundImage || null,\n          imageIndex: index, // ì‹¤ì œ ì´ë¯¸ì§€ ì¸ë±ìŠ¤ ì €ì¥\n          isGenerating: false,\n          customPrompt: customPrompt?.prompt || '',\n          useCustomPrompt: customPrompt?.enabled || false,\n        });\n      });\n    } else {\n      // í…ìŠ¤íŠ¸ 2ê°œë‹¹ ì´ë¯¸ì§€ 1ê°œ\n      for (let i = 0; i < bodyTexts.length; i += 2) {\n        const imageIndex = Math.floor(i / 2);\n        const text1 = bodyTexts[i];\n        const text2 = bodyTexts[i + 1];\n\n        if (text1) {\n          const foundImage = imageMap.get(imageIndex);\n          const customPrompt = customPrompts[imageIndex];\n          console.log(`ğŸ“‹ per-two-scripts: textIndex=${i}, imageIndex=${imageIndex}, foundImage=${foundImage?.name || 'null'}`);\n          pairs.push({\n            textIndex: i,\n            textKey: `${text1.key}${text2 ? `+${text2.key}` : ''}`,\n            textContent: `${text1.value}${text2 ? ` / ${text2.value}` : ''}`,\n            image: foundImage || null,\n            imageIndex: imageIndex, // ì‹¤ì œ ì´ë¯¸ì§€ ì¸ë±ìŠ¤ ì €ì¥\n            isGenerating: false,\n            customPrompt: customPrompt?.prompt || '',\n            useCustomPrompt: customPrompt?.enabled || false,\n          });\n        }\n      }\n    }\n\n    console.log('ğŸ¯ ìµœì¢… pairs ê°œìˆ˜:', pairs.length);\n    return pairs;\n  }, [content, images, imageUploadMode, customPrompts]);\n  \n  // í˜„ì¬ images ë°°ì—´ ìƒíƒœ ë¡œê¹…\n  console.log('ğŸ“¦ í˜„ì¬ images ë°°ì—´ ê¸¸ì´:', images.length);\n  console.log('ğŸ“¦ í˜„ì¬ images ë°°ì—´:', images.length > 0 ? images.map(img => `${img.name}(index:${(img as any).__imageIndex})`) : 'ë¹ˆ ë°°ì—´');\n  console.log('ğŸ® generationStatus:', generationStatus);\n\n  // ê°œë³„ ì´ë¯¸ì§€ ì—…ë¡œë“œ í•¸ë“¤ëŸ¬\n  const handleIndividualImageUpload = useCallback((imageIndex: number, acceptedFiles: File[]) => {\n    if (acceptedFiles.length === 0) return;\n\n    const file = acceptedFiles[0];\n    \n    // ê¸°ì¡´ ì—ëŸ¬ ìƒíƒœ ì œê±°\n    setUploadErrors(prev => {\n      const newErrors = { ...prev };\n      delete newErrors[imageIndex];\n      return newErrors;\n    });\n    \n    // íŒŒì¼ ìœ íš¨ì„± ê²€ì¦\n    if (file.size > 10 * 1024 * 1024) {\n      setUploadErrors(prev => ({ ...prev, [imageIndex]: 'íŒŒì¼ í¬ê¸°ê°€ 10MBë¥¼ ì´ˆê³¼í•©ë‹ˆë‹¤' }));\n      return;\n    }\n\n    const isImage = file.type.startsWith('image/');\n    const isVideo = file.type.startsWith('video/');\n    \n    if (!isImage && !isVideo) {\n      setUploadErrors(prev => ({ ...prev, [imageIndex]: 'ì´ë¯¸ì§€ ë˜ëŠ” ë¹„ë””ì˜¤ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤' }));\n      return;\n    }\n\n    console.log('ğŸ”§ handleIndividualImageUpload - imageIndex:', imageIndex, 'fileName:', file.name);\n\n    // íŒŒì¼ì— ìœ„ì¹˜ ì •ë³´ ì¶”ê°€\n    (file as any).__imageIndex = imageIndex;\n    console.log('ğŸ·ï¸ íŒŒì¼ì— __imageIndex ì„¤ì •:', imageIndex);\n\n    // í˜„ì¬ imagesì—ì„œ í•´ë‹¹ imageIndexë¥¼ ê°€ì§„ íŒŒì¼ ì œê±°í•˜ê³  ìƒˆ íŒŒì¼ ì¶”ê°€\n    const newImages = images.filter(img => (img as any).__imageIndex !== imageIndex);\n    newImages.push(file);\n    \n    // imageIndex ìˆœìœ¼ë¡œ ì •ë ¬\n    newImages.sort((a, b) => {\n      const indexA = (a as any).__imageIndex ?? 0;\n      const indexB = (b as any).__imageIndex ?? 0;\n      return indexA - indexB;\n    });\n    \n    console.log('ğŸ“Š ì—…ë°ì´íŠ¸ëœ images ë°°ì—´:', newImages.map(img => `${img.name}(index:${(img as any).__imageIndex})`));\n    \n    onChange(newImages, imageUploadMode);\n  }, [images, imageUploadMode, content, onChange]);\n\n  // ê°œë³„ ì´ë¯¸ì§€ ìë™ ìƒì„±\n  const handleIndividualGenerate = async (imageIndex: number, textContent: string, customPrompt?: string, useCustomPrompt?: boolean) => {\n    console.log('ğŸ¤– handleIndividualGenerate ì‹œì‘ - imageIndex:', imageIndex, 'textContent:', textContent, 'customPrompt:', customPrompt, 'useCustomPrompt:', useCustomPrompt);\n    setGenerationStatus(prev => ({ ...prev, [imageIndex]: 'generating' }));\n\n    try {\n      // ìš”ì²­ ë°”ë”” êµ¬ì„±\n      let requestBody: any = {};\n\n      if (useCustomPrompt && customPrompt?.trim()) {\n        // ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ ì‚¬ìš©\n        requestBody.custom_prompt = customPrompt.trim();\n        console.log('ğŸ“ ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ ì‚¬ìš©:', customPrompt.trim());\n      } else {\n        // ê¸°ì¡´ í…ìŠ¤íŠ¸ ì‚¬ìš©\n        const texts = textContent.split(' / ');\n        requestBody.text = texts[0]; // ì²« ë²ˆì§¸ í…ìŠ¤íŠ¸ ì‚¬ìš©\n        if (texts.length > 1) {\n          requestBody.additional_context = texts[1];\n        }\n        console.log('ğŸ“ ê¸°ë³¸ í…ìŠ¤íŠ¸ ì‚¬ìš©:', texts[0]);\n      }\n\n      const response = await fetch('/generate-single-image', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(requestBody),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.detail || 'ì´ë¯¸ì§€ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');\n      }\n\n      const data = await response.json();\n      const imageUrl = data.image_url;\n\n      // ìƒì„±ëœ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê³  File ê°ì²´ë¡œ ë³€í™˜\n      const imageResponse = await fetch(imageUrl);\n      if (!imageResponse.ok) {\n        throw new Error('ìƒì„±ëœ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');\n      }\n\n      const blob = await imageResponse.blob();\n      const fileName = `generated_image_pair_${imageIndex}.png`;\n      const file = new File([blob], fileName, { type: 'image/png' });\n\n      console.log('ğŸ“¸ ì´ë¯¸ì§€ ìƒì„± ì™„ë£Œ - fileName:', fileName, 'í˜¸ì¶œí•  imageIndex:', imageIndex);\n\n      // ì´ë¯¸ì§€ ë°°ì—´ ì—…ë°ì´íŠ¸\n      handleIndividualImageUpload(imageIndex, [file]);\n      \n      setGenerationStatus(prev => ({ ...prev, [imageIndex]: 'success' }));\n      setTimeout(() => {\n        setGenerationStatus(prev => {\n          const newStatus = { ...prev };\n          delete newStatus[imageIndex];\n          return newStatus;\n        });\n      }, 3000);\n\n    } catch (error) {\n      console.error('ê°œë³„ ì´ë¯¸ì§€ ìƒì„± ì˜¤ë¥˜:', error);\n      setGenerationStatus(prev => ({ ...prev, [imageIndex]: 'error' }));\n      setTimeout(() => {\n        setGenerationStatus(prev => {\n          const newStatus = { ...prev };\n          delete newStatus[imageIndex];\n          return newStatus;\n        });\n      }, 5000);\n    }\n  };\n\n  // ê°œë³„ ì´ë¯¸ì§€ ì‚­ì œ (ê°œì„ ë¨)\n  const handleRemoveImage = (imageIndex: number) => {\n    console.log('ğŸ—‘ï¸ ì´ë¯¸ì§€ ì‚­ì œ ìš”ì²­ - imageIndex:', imageIndex);\n    \n    // ì§€ì •ëœ imageIndexë¥¼ ê°€ì§„ íŒŒì¼ì„ ì œê±°\n    const newImages = images.filter(img => (img as any).__imageIndex !== imageIndex);\n    \n    // í•´ë‹¹ ì¸ë±ìŠ¤ì˜ ì—ëŸ¬ ìƒíƒœë„ í•¨ê»˜ ì œê±°\n    setUploadErrors(prev => {\n      const newErrors = { ...prev };\n      delete newErrors[imageIndex];\n      return newErrors;\n    });\n    \n    // ìƒì„± ìƒíƒœë„ í•¨ê»˜ ì œê±°\n    setGenerationStatus(prev => {\n      const newStatus = { ...prev };\n      delete newStatus[imageIndex];\n      return newStatus;\n    });\n    \n    console.log('âœ… ì´ë¯¸ì§€ ì‚­ì œ ì™„ë£Œ - imageIndex:', imageIndex);\n    console.log('ğŸ“Š ë‚¨ì€ ì´ë¯¸ì§€:', newImages.map(img => `${img.name}(index:${(img as any).__imageIndex})`));\n    \n    onChange(newImages, imageUploadMode);\n  };\n\n  // ê°œë³„ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ\n  const handleDownloadImage = async (imageIndex: number, image: File) => {\n    try {\n      // ìƒì„±ëœ ì´ë¯¸ì§€ì¸ì§€ í™•ì¸ (filenameìœ¼ë¡œ íŒë‹¨)\n      if (image.name.startsWith('generated_')) {\n        // ë°±ì—”ë“œ ë‹¤ìš´ë¡œë“œ APIë¥¼ í†µí•´ ë‹¤ìš´ë¡œë“œ\n        const link = document.createElement('a');\n        link.href = `/download-image/${image.name}`;\n        link.download = `reels_image_${imageIndex + 1}.png`;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n      } else {\n        // ì—…ë¡œë“œëœ íŒŒì¼ì€ ì§ì ‘ ë‹¤ìš´ë¡œë“œ\n        const url = URL.createObjectURL(image);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `reels_image_${imageIndex + 1}_${image.name}`;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        URL.revokeObjectURL(url);\n      }\n      console.log('ğŸ’¾ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ ì™„ë£Œ - imageIndex:', imageIndex, 'fileName:', image.name);\n    } catch (error) {\n      console.error('ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ ì˜¤ë¥˜:', error);\n    }\n  };\n\n  // ê°œë³„ ë“œë˜ê·¸ì•¤ë“œë¡­ ì»´í¬ë„ŒíŠ¸ (React.memoë¡œ ìµœì í™”)\n  const IndividualDropZone: React.FC<{\n    imageIndex: number;\n    pair: TextImagePair & { imageIndex: number };\n  }> = memo(({ imageIndex, pair }) => {\n    const onDrop = useCallback((acceptedFiles: File[]) => {\n      handleIndividualImageUpload(imageIndex, acceptedFiles);\n    }, [imageIndex]);\n\n    const { getRootProps, getInputProps, isDragActive } = useDropzone({\n      onDrop,\n      accept: {\n        'image/*': ['.jpeg', '.jpg', '.png', '.gif', '.webp', '.bmp'],\n        'video/*': ['.mp4', '.mov', '.avi', '.webm']\n      },\n      maxFiles: 1,\n      multiple: false\n    });\n\n    const isGenerating = generationStatus[imageIndex] === 'generating';\n    const generationError = generationStatus[imageIndex] === 'error';\n    const generationSuccess = generationStatus[imageIndex] === 'success';\n    const uploadError = uploadErrors[imageIndex];\n    const isPromptExpanded = promptsExpanded[imageIndex] || false;\n    const currentCustomPrompt = customPrompts[imageIndex];\n\n    // refë¥¼ í†µí•œ í¬ì»¤ìŠ¤ ìœ ì§€\n    const textFieldRef = useRef<HTMLInputElement>(null);\n\n    // ë¡œì»¬ ìƒíƒœë¡œ ì…ë ¥ê°’ ê´€ë¦¬ (í¬ì»¤ìŠ¤ ìœ ì§€ë¥¼ ìœ„í•´)\n    const [localPromptValue, setLocalPromptValue] = useState(currentCustomPrompt?.prompt || '');\n    const [isInitialized, setIsInitialized] = useState(false);\n    const [lastUpdateTime, setLastUpdateTime] = useState(0);\n\n    // ì´ˆê¸°í™” ì‹œì—ë§Œ ì™¸ë¶€ ìƒíƒœë¥¼ ë¡œì»¬ ìƒíƒœì— ë™ê¸°í™”\n    useEffect(() => {\n      if (!isInitialized) {\n        setLocalPromptValue(currentCustomPrompt?.prompt || '');\n        setIsInitialized(true);\n      }\n    }, [currentCustomPrompt?.prompt, isInitialized]);\n\n    // ë””ë°”ìš´ìŠ¤ë¥¼ ìœ„í•œ useEffect - ì™¸ë¶€ ìƒíƒœ ì—…ë°ì´íŠ¸ ë°©ì§€\n    useEffect(() => {\n      const currentTime = Date.now();\n      setLastUpdateTime(currentTime);\n\n      const timeoutId = setTimeout(() => {\n        // ìµœì‹  ì—…ë°ì´íŠ¸ì¸ì§€ í™•ì¸ (ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€)\n        if (currentTime === lastUpdateTime) {\n          const currentExternalValue = customPrompts[imageIndex]?.prompt || '';\n          if (localPromptValue !== currentExternalValue) {\n            updateCustomPrompt(imageIndex, localPromptValue, currentCustomPrompt?.enabled || false);\n          }\n        }\n      }, 800); // ë””ë°”ìš´ìŠ¤ ì‹œê°„ì„ 800msë¡œ ëŠ˜ë¦¼\n\n      return () => clearTimeout(timeoutId);\n    }, [localPromptValue]);\n\n    // ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ ë³€ê²½ í•¸ë“¤ëŸ¬ (ë¡œì»¬ ìƒíƒœë§Œ ì—…ë°ì´íŠ¸)\n    const handleCustomPromptChange = useCallback((prompt: string) => {\n      setLocalPromptValue(prompt);\n    }, []);\n\n    // ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ í™œì„±í™”/ë¹„í™œì„±í™” í•¸ë“¤ëŸ¬\n    const handleCustomPromptToggle = useCallback((enabled: boolean) => {\n      updateCustomPrompt(imageIndex, localPromptValue, enabled);\n    }, [imageIndex, localPromptValue, updateCustomPrompt]);\n\n    return (\n      <Card sx={{ height: '100%', display: 'flex', flexDirection: 'column' }}>\n        <CardContent sx={{ flex: 1 }}>\n          {/* í…ìŠ¤íŠ¸ í‘œì‹œ */}\n          <Typography variant=\"h6\" gutterBottom sx={{ \n            fontSize: '0.9rem',\n            fontWeight: 600,\n            color: 'primary.main',\n            mb: 2\n          }}>\n            {pair.textKey.replace('body', 'ëŒ€ì‚¬ ').replace('+body', ' + ëŒ€ì‚¬ ')}\n          </Typography>\n          \n          <Typography variant=\"body2\" sx={{\n            mb: 2,\n            p: 1.5,\n            bgcolor: 'grey.50',\n            borderRadius: 1,\n            border: '1px solid',\n            borderColor: 'grey.200',\n            fontSize: '0.8rem',\n            lineHeight: 1.4\n          }}>\n            {pair.textContent}\n          </Typography>\n\n          {/* ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ ì„¹ì…˜ */}\n          <Box sx={{ mb: 2 }}>\n            <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 1 }}>\n              <Typography variant=\"caption\" color=\"text.secondary\" sx={{ fontWeight: 600 }}>\n                AI ìƒì„± ì˜µì…˜\n              </Typography>\n              <IconButton\n                size=\"small\"\n                onClick={() => togglePromptExpanded(imageIndex)}\n                sx={{ p: 0.5 }}\n              >\n                {isPromptExpanded ? <ExpandLess fontSize=\"small\" /> : <ExpandMore fontSize=\"small\" />}\n              </IconButton>\n            </Box>\n\n            <Collapse in={isPromptExpanded}>\n              <Box sx={{ bgcolor: 'rgba(25, 118, 210, 0.04)', p: 1.5, borderRadius: 1, border: '1px solid rgba(25, 118, 210, 0.12)' }}>\n                <FormControlLabel\n                  control={\n                    <Switch\n                      checked={currentCustomPrompt?.enabled || false}\n                      onChange={(e) => handleCustomPromptToggle(e.target.checked)}\n                      size=\"small\"\n                    />\n                  }\n                  label={\n                    <Typography variant=\"caption\" sx={{ fontWeight: 500 }}>\n                      ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ ì‚¬ìš©\n                    </Typography>\n                  }\n                  sx={{ mb: 1, ml: 0 }}\n                />\n\n                {currentCustomPrompt?.enabled && (\n                  <TextField\n                    inputRef={textFieldRef}\n                    key={`prompt-input-${imageIndex}-stable`}\n                    fullWidth\n                    multiline\n                    rows={2}\n                    size=\"small\"\n                    placeholder=\"ì´ë¯¸ì§€ ìƒì„±ì„ ìœ„í•œ ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”...\"\n                    value={localPromptValue}\n                    onChange={(e) => handleCustomPromptChange(e.target.value)}\n                    variant=\"outlined\"\n                    sx={{\n                      '& .MuiOutlinedInput-root': {\n                        fontSize: '0.75rem',\n                        bgcolor: 'white'\n                      }\n                    }}\n                    helperText=\"ì‹¤ì œ ì˜ìƒì—ì„œëŠ” ê¸°ì¡´ ëŒ€ì‚¬ê°€ ì‚¬ìš©ë˜ë©°, ì´ í”„ë¡¬í”„íŠ¸ëŠ” ì´ë¯¸ì§€ ìƒì„±ì—ë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤.\"\n                    autoComplete=\"off\"\n                    spellCheck=\"false\"\n                  />\n                )}\n\n                {!currentCustomPrompt?.enabled && (\n                  <Typography variant=\"caption\" color=\"text.secondary\" sx={{ fontStyle: 'italic' }}>\n                    ê¸°ë³¸ ëª¨ë“œ: ìœ„ì˜ ëŒ€ì‚¬ ë‚´ìš©ì„ ê¸°ë°˜ìœ¼ë¡œ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\n                  </Typography>\n                )}\n              </Box>\n            </Collapse>\n          </Box>\n\n          {/* ì´ë¯¸ì§€/ë¹„ë””ì˜¤ í‘œì‹œ ë˜ëŠ” ë“œë˜ê·¸ì•¤ë“œë¡­ ì˜ì—­ */}\n          {pair.image ? (\n            <Box sx={{ position: 'relative', mb: 2 }}>\n              {pair.image.type.startsWith('video/') ? (\n                <video\n                  src={URL.createObjectURL(pair.image)}\n                  style={{\n                    width: '100%',\n                    aspectRatio: '1/1',\n                    objectFit: 'cover',\n                    borderRadius: 8\n                  }}\n                  muted\n                  loop\n                  autoPlay\n                />\n              ) : (\n                <Box\n                  sx={{\n                    width: '100%',\n                    aspectRatio: '1/1',\n                    backgroundImage: `url(${URL.createObjectURL(pair.image)})`,\n                    backgroundSize: 'cover',\n                    backgroundPosition: 'center',\n                    borderRadius: 1\n                  }}\n                />\n              )}\n              \n              {/* ì´ë¯¸ì§€ ì»¨íŠ¸ë¡¤ ë²„íŠ¼ë“¤ */}\n              <Box sx={{ \n                position: 'absolute', \n                top: 8, \n                right: 8,\n                display: 'flex',\n                gap: 0.5\n              }}>\n                <IconButton\n                  size=\"small\"\n                  onClick={() => handleDownloadImage(imageIndex, pair.image!)}\n                  sx={{\n                    bgcolor: 'rgba(255,255,255,0.9)',\n                    '&:hover': { bgcolor: 'rgba(255,255,255,1)' }\n                  }}\n                  title=\"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ\"\n                >\n                  <Download color=\"success\" fontSize=\"small\" />\n                </IconButton>\n                <IconButton\n                  size=\"small\"\n                  onClick={() => handleRemoveImage(imageIndex)}\n                  sx={{\n                    bgcolor: 'rgba(255,255,255,0.9)',\n                    '&:hover': { bgcolor: 'rgba(255,255,255,1)' }\n                  }}\n                  title=\"ì´ë¯¸ì§€ ì‚­ì œ\"\n                >\n                  <Delete color=\"error\" fontSize=\"small\" />\n                </IconButton>\n                <IconButton\n                  size=\"small\"\n                  onClick={() => {\n                    console.log('ğŸ”„ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ í´ë¦­ë¨ - imageIndex:', imageIndex, 'textContent:', pair.textContent);\n                    handleIndividualGenerate(\n                      imageIndex,\n                      pair.textContent,\n                      currentCustomPrompt?.prompt,\n                      currentCustomPrompt?.enabled\n                    );\n                  }}\n                  disabled={isGenerating}\n                  sx={{\n                    bgcolor: 'rgba(255,255,255,0.9)',\n                    '&:hover': { bgcolor: 'rgba(255,255,255,1)' }\n                  }}\n                  title=\"ì´ë¯¸ì§€ ì¬ìƒì„±\"\n                >\n                  {isGenerating ? (\n                    <CircularProgress size={16} />\n                  ) : (\n                    <Refresh color=\"primary\" fontSize=\"small\" />\n                  )}\n                </IconButton>\n              </Box>\n\n              <Typography variant=\"caption\" sx={{ \n                position: 'absolute',\n                bottom: 4,\n                left: 8,\n                bgcolor: 'rgba(0,0,0,0.7)',\n                color: 'white',\n                px: 1,\n                py: 0.5,\n                borderRadius: 1\n              }}>\n                {pair.image.name}\n              </Typography>\n            </Box>\n          ) : (\n            <Box\n              {...getRootProps()}\n              sx={{\n                border: 2,\n                borderColor: isDragActive ? 'primary.main' : 'grey.300',\n                borderStyle: 'dashed',\n                borderRadius: 1,\n                p: 2,\n                textAlign: 'center',\n                cursor: 'pointer',\n                bgcolor: isDragActive ? 'action.hover' : 'background.paper',\n                mb: 2,\n                aspectRatio: '1/1',\n                display: 'flex',\n                flexDirection: 'column',\n                justifyContent: 'center',\n                '&:hover': {\n                  borderColor: 'primary.main',\n                  bgcolor: 'action.hover'\n                }\n              }}\n            >\n              <input {...getInputProps()} />\n              <CloudUpload sx={{ fontSize: 32, color: 'grey.400', mb: 1 }} />\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                {isDragActive ? 'íŒŒì¼ì„ ë†“ìœ¼ì„¸ìš”' : 'ë¯¸ë””ì–´ ë“œë˜ê·¸ ë˜ëŠ” í´ë¦­'}\n              </Typography>\n            </Box>\n          )}\n\n          {/* ìƒíƒœ ë©”ì‹œì§€ */}\n          {isGenerating && (\n            <Alert severity=\"info\" sx={{ mt: 1 }}>\n              <Box sx={{ display: 'flex', alignItems: 'center' }}>\n                <CircularProgress size={16} sx={{ mr: 1 }} />\n                ì´ë¯¸ì§€ ìƒì„± ì¤‘...\n              </Box>\n            </Alert>\n          )}\n          \n          {generationSuccess && (\n            <Alert severity=\"success\" sx={{ mt: 1 }}>\n              ì´ë¯¸ì§€ ìƒì„± ì™„ë£Œ!\n            </Alert>\n          )}\n          \n          {generationError && (\n            <Alert severity=\"error\" sx={{ mt: 1 }}>\n              ì´ë¯¸ì§€ ìƒì„± ì‹¤íŒ¨. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.\n            </Alert>\n          )}\n          \n          {uploadError && (\n            <Alert severity=\"error\" sx={{ mt: 1 }}>\n              {uploadError}\n            </Alert>\n          )}\n        </CardContent>\n\n        {/* í•˜ë‹¨ ì•¡ì…˜ ë²„íŠ¼ */}\n        <Box sx={{ p: 1.5, pt: 0 }}>\n          <Button\n            fullWidth\n            variant=\"outlined\"\n            size=\"small\"\n            startIcon={<AutoFixHigh />}\n            onClick={() => {\n              console.log('ğŸ–±ï¸ ìë™ìƒì„± ë²„íŠ¼ í´ë¦­ë¨ - imageIndex:', imageIndex, 'textContent:', pair.textContent);\n              handleIndividualGenerate(\n                imageIndex,\n                pair.textContent,\n                currentCustomPrompt?.prompt,\n                currentCustomPrompt?.enabled\n              );\n            }}\n            disabled={isGenerating}\n            sx={{\n              bgcolor: currentCustomPrompt?.enabled ? 'rgba(25, 118, 210, 0.08)' : 'transparent',\n              borderColor: currentCustomPrompt?.enabled ? 'primary.main' : 'grey.300',\n              color: currentCustomPrompt?.enabled ? 'primary.main' : 'text.primary',\n              '&:hover': {\n                bgcolor: currentCustomPrompt?.enabled ? 'rgba(25, 118, 210, 0.12)' : 'action.hover',\n              }\n            }}\n          >\n            {isGenerating ? 'ìƒì„±ì¤‘...' : (currentCustomPrompt?.enabled ? 'ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ë¡œ ìƒì„±' : 'AI ìë™ìƒì„±')}\n          </Button>\n        </Box>\n      </Card>\n    );\n  });\n\n  return (\n    <Box>\n      <Typography variant=\"h6\" gutterBottom sx={{ mb: 3 }}>\n        í…ìŠ¤íŠ¸-ì´ë¯¸ì§€ ë§¤ì¹­ ê´€ë¦¬\n      </Typography>\n      \n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        ê° í…ìŠ¤íŠ¸ì— ëŒ€ì‘ë˜ëŠ” ì´ë¯¸ì§€ë¥¼ ê°œë³„ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \n        ë“œë˜ê·¸ì•¤ë“œë¡­ìœ¼ë¡œ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ê±°ë‚˜ AIë¡œ ìë™ ìƒì„±í•˜ì„¸ìš”.\n      </Typography>\n\n      <Grid container spacing={2}>\n        {textImagePairs.map((pair, index) => (\n          <Grid item xs={12} sm={6} md={4} key={pair.textKey}>\n            <IndividualDropZone imageIndex={pair.imageIndex} pair={pair} />\n          </Grid>\n        ))}\n      </Grid>\n\n      {textImagePairs.length === 0 && (\n        <Alert severity=\"info\" sx={{ mt: 2 }}>\n          ëŒ€ë³¸ì„ ë¨¼ì € ì‘ì„±í•´ì£¼ì„¸ìš”.\n        </Alert>\n      )}\n    </Box>\n  );\n};\n\nexport default TextImagePairManager;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}