{"ast":null,"code":"var _jsxFileName = \"/zstus/frontend/src/components/ImageStep.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useCallback, useRef, useImperativeHandle, forwardRef } from 'react';\nimport { Box, Paper, Typography, Button, FormControl, RadioGroup, FormControlLabel, Radio, Alert, LinearProgress, CircularProgress, Divider } from '@mui/material';\nimport { CloudUpload, AutoFixHigh } from '@mui/icons-material';\nimport { useDropzone } from 'react-dropzone';\nimport TextImagePairManager from './TextImagePairManager';\n\n// âœ… ImageStep ref íƒ€ì… ì •ì˜\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ImageStep = /*#__PURE__*/_s(/*#__PURE__*/forwardRef(_c = _s(({\n  images,\n  imageUploadMode,\n  content,\n  jobId,\n  onChange,\n  onNext,\n  onBack\n}, ref) => {\n  _s();\n  // âœ… TextImagePairManagerì˜ ref ìƒì„±\n  const textImagePairManagerRef = useRef(null);\n  const [uploadProgress, setUploadProgress] = useState({});\n  const [errors, setErrors] = useState([]);\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [generationProgress, setGenerationProgress] = useState('');\n\n  // âœ… ì™¸ë¶€ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ê°ˆ ìˆ˜ ìˆë„ë¡ ë©”ì„œë“œ ì œê³µ\n  useImperativeHandle(ref, () => ({\n    getEditedData: () => {\n      var _textImagePairManager;\n      return ((_textImagePairManager = textImagePairManagerRef.current) === null || _textImagePairManager === void 0 ? void 0 : _textImagePairManager.getEditedData()) || {\n        editedTexts: {},\n        customPrompts: {}\n      };\n    }\n  }), []);\n\n  // í•„ìš”í•œ ì´ë¯¸ì§€ ê°œìˆ˜ ê³„ì‚°\n  const getRequiredImageCount = () => {\n    const scriptCount = Object.values(content).slice(1) // title ì œì™¸\n    .filter(script => script === null || script === void 0 ? void 0 : script.trim()).length;\n    if (imageUploadMode === 'per-script') {\n      return scriptCount;\n    } else if (imageUploadMode === 'per-two-scripts') {\n      return Math.ceil(scriptCount / 2);\n    } else {\n      // single-for-all\n      return 1;\n    }\n  };\n  const requiredImageCount = getRequiredImageCount();\n  const onDrop = useCallback(acceptedFiles => {\n    const validFiles = [];\n    const newErrors = [];\n    acceptedFiles.forEach((file, index) => {\n      // íŒŒì¼ í¬ê¸° ê²€ì¦ (ëª¨ë“œì— ë”°ë¼ ë‹¤ë¥¸ ì œí•œ)\n      const maxSize = imageUploadMode === 'single-for-all' ? 80 * 1024 * 1024 : 40 * 1024 * 1024;\n      const maxSizeText = imageUploadMode === 'single-for-all' ? '80MB' : '40MB';\n      if (file.size > maxSize) {\n        newErrors.push(`${file.name}: íŒŒì¼ í¬ê¸°ê°€ ${maxSizeText}ë¥¼ ì´ˆê³¼í•©ë‹ˆë‹¤`);\n        return;\n      }\n\n      // íŒŒì¼ í˜•ì‹ ê²€ì¦ (ì´ë¯¸ì§€ + ë¹„ë””ì˜¤)\n      const isImage = file.type.startsWith('image/');\n      const isVideo = file.type.startsWith('video/');\n      if (!isImage && !isVideo) {\n        newErrors.push(`${file.name}: ì´ë¯¸ì§€ ë˜ëŠ” ë¹„ë””ì˜¤ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤`);\n        return;\n      }\n      validFiles.push(file);\n\n      // ì—…ë¡œë“œ ì§„í–‰ë¥  ì‹œë®¬ë ˆì´ì…˜\n      setUploadProgress(prev => ({\n        ...prev,\n        [file.name]: 0\n      }));\n\n      // ê°€ìƒì˜ ì—…ë¡œë“œ ì§„í–‰ë¥ \n      let progress = 0;\n      const interval = setInterval(() => {\n        progress += 10;\n        setUploadProgress(prev => ({\n          ...prev,\n          [file.name]: progress\n        }));\n        if (progress >= 100) {\n          clearInterval(interval);\n          setTimeout(() => {\n            setUploadProgress(prev => {\n              const newProgress = {\n                ...prev\n              };\n              delete newProgress[file.name];\n              return newProgress;\n            });\n          }, 500);\n        }\n      }, 100);\n    });\n    if (validFiles.length > 0) {\n      // ìŠ¤ë§ˆíŠ¸ ì´ë¯¸ì§€ í• ë‹¹: ë¹ˆ ìŠ¬ë¡¯ë¶€í„° ì±„ìš°ê¸°\n      const updatedImages = [...images];\n\n      // ê° valid íŒŒì¼ì— ëŒ€í•´ ì²« ë²ˆì§¸ë¡œ ë¹„ì–´ìˆëŠ” ìŠ¬ë¡¯ì— __imageIndex ì„¤ì •í•˜ì—¬ ì¶”ê°€\n      let validFileIndex = 0;\n      for (let i = 0; i < requiredImageCount && validFileIndex < validFiles.length; i++) {\n        // í•´ë‹¹ ì¸ë±ìŠ¤ì— ì´ë¯¸ì§€ê°€ ì—†ìœ¼ë©´ ìƒˆ íŒŒì¼ í• ë‹¹\n        const hasImageAtIndex = images.some(img => img.__imageIndex === i);\n        if (!hasImageAtIndex) {\n          const file = validFiles[validFileIndex];\n          file.__imageIndex = i;\n          updatedImages.push(file);\n          validFileIndex++;\n        }\n      }\n\n      // ìœ„ì¹˜ ì •ë³´ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬\n      updatedImages.sort((a, b) => {\n        var _imageIndex, _imageIndex2;\n        const indexA = (_imageIndex = a.__imageIndex) !== null && _imageIndex !== void 0 ? _imageIndex : 0;\n        const indexB = (_imageIndex2 = b.__imageIndex) !== null && _imageIndex2 !== void 0 ? _imageIndex2 : 0;\n        return indexA - indexB;\n      });\n      onChange(updatedImages, imageUploadMode);\n    }\n    setErrors(newErrors);\n  }, [images, imageUploadMode, requiredImageCount, onChange]);\n  const {\n    getRootProps,\n    getInputProps,\n    isDragActive\n  } = useDropzone({\n    onDrop,\n    accept: {\n      'image/*': ['.jpeg', '.jpg', '.png', '.gif', '.webp', '.bmp', '.heic', '.heif'],\n      'video/*': ['.mp4', '.mov', '.avi', '.webm', '.mkv']\n    },\n    // ë¬´ì œí•œ íŒŒì¼ ì—…ë¡œë“œ í—ˆìš© (ë¹ˆ ìŠ¬ë¡¯ì— ìë™ í• ë‹¹)\n    maxFiles: undefined,\n    disabled: false\n  });\n  const removeImage = imageIndex => {\n    // íŠ¹ì • __imageIndexë¥¼ ê°€ì§„ íŒŒì¼ë§Œ ì œê±°\n    const newImages = images.filter(img => img.__imageIndex !== imageIndex);\n    onChange(newImages, imageUploadMode);\n  };\n  const handleModeChange = event => {\n    const newMode = event.target.value;\n    const scriptCount = Object.values(content).slice(1).filter(script => script === null || script === void 0 ? void 0 : script.trim()).length;\n    let newRequiredCount;\n    if (newMode === 'per-script') {\n      newRequiredCount = scriptCount;\n    } else if (newMode === 'per-two-scripts') {\n      newRequiredCount = Math.ceil(scriptCount / 2);\n    } else {\n      // single-for-all\n      newRequiredCount = 1;\n    }\n\n    // ê¸°ì¡´ ì´ë¯¸ì§€ê°€ ìƒˆë¡œìš´ ìš”êµ¬ì‚¬í•­ë³´ë‹¤ ë§ìœ¼ë©´ ìë¥´ê¸°\n    const newImages = images.slice(0, newRequiredCount);\n    onChange(newImages, newMode);\n  };\n  const formatFileSize = bytes => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n  const getMediaPreview = file => {\n    return URL.createObjectURL(file);\n  };\n  const isVideoFile = file => {\n    return file.type.startsWith('video/');\n  };\n\n  // ìœ„ì¹˜ ì •ë³´ê°€ ìˆëŠ” ì‹¤ì œ ì´ë¯¸ì§€ ê°œìˆ˜ ê³„ì‚°\n  const getActualImageCount = () => {\n    return images.filter(img => typeof img.__imageIndex === 'number').length;\n  };\n  const canProceed = getActualImageCount() === requiredImageCount;\n\n  // ìë™ ì´ë¯¸ì§€ ìƒì„± í•¨ìˆ˜\n  const handleAutoGenerate = async mode => {\n    setIsGenerating(true);\n    setErrors([]);\n    try {\n      // contentì—ì„œ body í…ìŠ¤íŠ¸ë“¤ ì¶”ì¶œ\n      const bodyTexts = Object.entries(content).filter(([key, value]) => key.startsWith('body') && (value === null || value === void 0 ? void 0 : value.trim())).map(([key, value]) => value.trim());\n      if (bodyTexts.length === 0) {\n        setErrors(['ëŒ€ë³¸ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € ëŒ€ë³¸ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.']);\n        setIsGenerating(false);\n        return;\n      }\n      setGenerationProgress('ì´ë¯¸ì§€ ìƒì„± ì¤‘...');\n      const response = await fetch('/generate-images', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          texts: bodyTexts,\n          mode: mode,\n          job_id: jobId // Job ID ì¶”ê°€\n        })\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.detail || ' ì´ë¯¸ì§€ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');\n      }\n      const data = await response.json();\n      const imageUrls = data.image_urls;\n      setGenerationProgress('ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ ì¤‘...');\n\n      // ë°±ì—”ë“œì—ì„œ ì €ì¥ëœ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê³  File ê°ì²´ë¡œ ë³€í™˜\n      const imageFiles = await Promise.all(imageUrls.filter(url => url.trim() !== '').map(async (url, index) => {\n        // ë°±ì—”ë“œì™€ ê°™ì€ ì„œë²„ë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ìƒëŒ€ ê²½ë¡œë¡œ ì ‘ê·¼\n        const fullUrl = url.startsWith('http') ? url : url;\n        const imageResponse = await fetch(fullUrl);\n        if (!imageResponse.ok) {\n          throw new Error(`ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨: ${index + 1}`);\n        }\n        const blob = await imageResponse.blob();\n        const fileName = `generated_image_${index + 1}.png`;\n        const file = new File([blob], fileName, {\n          type: 'image/png'\n        });\n\n        // ğŸ”§ ì¤‘ìš”: TextImagePairManagerì—ì„œ ë§¤ì¹­ì„ ìœ„í•œ __imageIndex ì„¤ì •\n        file.__imageIndex = index;\n        return file;\n      }));\n\n      // ğŸ”§ ê¸°ì¡´ ì´ë¯¸ì§€ì™€ ìƒˆë¡œ ìƒì„±ëœ ì´ë¯¸ì§€ë¥¼ ìŠ¤ë§ˆíŠ¸í•˜ê²Œ ë³‘í•©\n      // ë¹ˆ ìŠ¬ë¡¯ë¶€í„° ì±„ìš°ê³ , imageIndex ìˆœìœ¼ë¡œ ì •ë ¬\n      const updatedImages = [...images];\n      imageFiles.forEach(file => {\n        const targetIndex = file.__imageIndex;\n        // í•´ë‹¹ ì¸ë±ìŠ¤ì— ê¸°ì¡´ ì´ë¯¸ì§€ê°€ ìˆìœ¼ë©´ êµì²´, ì—†ìœ¼ë©´ ì¶”ê°€\n        const existingIndex = updatedImages.findIndex(img => img.__imageIndex === targetIndex);\n        if (existingIndex >= 0) {\n          updatedImages[existingIndex] = file;\n        } else {\n          updatedImages.push(file);\n        }\n      });\n\n      // imageIndex ìˆœìœ¼ë¡œ ì •ë ¬\n      updatedImages.sort((a, b) => {\n        var _imageIndex3, _imageIndex4;\n        const indexA = (_imageIndex3 = a.__imageIndex) !== null && _imageIndex3 !== void 0 ? _imageIndex3 : 0;\n        const indexB = (_imageIndex4 = b.__imageIndex) !== null && _imageIndex4 !== void 0 ? _imageIndex4 : 0;\n        return indexA - indexB;\n      });\n\n      // í•„ìš”í•œ ê°œìˆ˜ë§Œí¼ë§Œ ìœ ì§€\n      const finalImages = updatedImages.slice(0, requiredImageCount);\n      onChange(finalImages, imageUploadMode);\n      const successCount = imageFiles.length;\n      const totalRequested = imageUrls.length;\n      if (successCount === totalRequested) {\n        setGenerationProgress('ì´ë¯¸ì§€ ìƒì„± ì™„ë£Œ!');\n      } else {\n        setGenerationProgress(`ì´ë¯¸ì§€ ìƒì„± ì™„ë£Œ! (${successCount}/${totalRequested}ê°œ ì„±ê³µ)`);\n      }\n      setTimeout(() => setGenerationProgress(''), 3000);\n    } catch (error) {\n      console.error('ì´ë¯¸ì§€ ìƒì„± ì¤‘ ì˜¤ë¥˜:', error);\n      setErrors([error instanceof Error ? error.message : 'ì´ë¯¸ì§€ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤']);\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h4\",\n      component: \"h1\",\n      gutterBottom: true,\n      children: \"\\uBBF8\\uB514\\uC5B4 \\uC5C5\\uB85C\\uB4DC\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"body1\",\n      color: \"text.secondary\",\n      sx: {\n        mb: 3\n      },\n      children: \"\\uB9B4\\uC2A4 \\uC601\\uC0C1\\uC758 \\uBC30\\uACBD\\uC73C\\uB85C \\uC0AC\\uC6A9\\uD560 \\uC774\\uBBF8\\uC9C0 \\uB610\\uB294 \\uC601\\uC0C1\\uC744 \\uC5C5\\uB85C\\uB4DC\\uD558\\uC138\\uC694. (\\uC774\\uBBF8\\uC9C0: JPG, PNG, GIF, WebP / \\uC601\\uC0C1: MP4, MOV, AVI, WebM, MKV)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Paper, {\n      sx: {\n        p: 3,\n        mb: 3\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        gutterBottom: true,\n        children: \"\\uC5C5\\uB85C\\uB4DC \\uBAA8\\uB4DC \\uC120\\uD0DD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n        component: \"fieldset\",\n        children: /*#__PURE__*/_jsxDEV(RadioGroup, {\n          value: imageUploadMode,\n          onChange: handleModeChange,\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'space-between',\n              width: '100%'\n            },\n            children: [/*#__PURE__*/_jsxDEV(FormControlLabel, {\n              value: \"per-two-scripts\",\n              control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 26\n              }, this),\n              label: /*#__PURE__*/_jsxDEV(Box, {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body1\",\n                  children: \"\\uB300\\uC0AC 2\\uAC1C\\uB9C8\\uB2E4 \\uBBF8\\uB514\\uC5B4 1\\uAC1C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 356,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"caption\",\n                  color: \"text.secondary\",\n                  children: [\"\\uD544\\uC694 \\uBBF8\\uB514\\uC5B4: \", Math.ceil(Object.values(content).slice(1).filter(script => script === null || script === void 0 ? void 0 : script.trim()).length / 2), \"\\uAC1C (\\uAC01 \\uCD5C\\uB300 10MB)\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 359,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 355,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outlined\",\n              size: \"small\",\n              startIcon: /*#__PURE__*/_jsxDEV(AutoFixHigh, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 368,\n                columnNumber: 28\n              }, this),\n              onClick: () => handleAutoGenerate('per_two_scripts'),\n              disabled: isGenerating || Object.values(content).slice(1).filter(script => script === null || script === void 0 ? void 0 : script.trim()).length === 0,\n              sx: {\n                ml: 2,\n                minWidth: 100\n              },\n              children: \"\\uC790\\uB3D9\\uC0DD\\uC131\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'space-between',\n              width: '100%'\n            },\n            children: [/*#__PURE__*/_jsxDEV(FormControlLabel, {\n              value: \"per-script\",\n              control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 379,\n                columnNumber: 26\n              }, this),\n              label: /*#__PURE__*/_jsxDEV(Box, {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body1\",\n                  children: \"\\uB300\\uC0AC\\uB9C8\\uB2E4 \\uBBF8\\uB514\\uC5B4 1\\uAC1C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 382,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"caption\",\n                  color: \"text.secondary\",\n                  children: [\"\\uD544\\uC694 \\uBBF8\\uB514\\uC5B4: \", Object.values(content).slice(1).filter(script => script === null || script === void 0 ? void 0 : script.trim()).length, \"\\uAC1C (\\uAC01 \\uCD5C\\uB300 10MB)\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 385,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 381,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outlined\",\n              size: \"small\",\n              startIcon: /*#__PURE__*/_jsxDEV(AutoFixHigh, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 394,\n                columnNumber: 28\n              }, this),\n              onClick: () => handleAutoGenerate('per_script'),\n              disabled: isGenerating || Object.values(content).slice(1).filter(script => script === null || script === void 0 ? void 0 : script.trim()).length === 0,\n              sx: {\n                ml: 2,\n                minWidth: 100\n              },\n              children: \"\\uC790\\uB3D9\\uC0DD\\uC131\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'space-between',\n              width: '100%'\n            },\n            children: [/*#__PURE__*/_jsxDEV(FormControlLabel, {\n              value: \"single-for-all\",\n              control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 405,\n                columnNumber: 26\n              }, this),\n              label: /*#__PURE__*/_jsxDEV(Box, {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body1\",\n                  children: \"\\uBAA8\\uB4E0 \\uB300\\uC0AC\\uC5D0 \\uBBF8\\uB514\\uC5B4 1\\uAC1C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 408,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"caption\",\n                  color: \"text.secondary\",\n                  children: \"\\uD544\\uC694 \\uBBF8\\uB514\\uC5B4: 1\\uAC1C (\\uBAA8\\uB4E0 \\uB300\\uC0AC\\uC5D0 \\uB3D9\\uC77C\\uD55C \\uBBF8\\uB514\\uC5B4 \\uC0AC\\uC6A9, \\uCD5C\\uB300 40MB)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 411,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outlined\",\n              size: \"small\",\n              startIcon: /*#__PURE__*/_jsxDEV(AutoFixHigh, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 420,\n                columnNumber: 28\n              }, this),\n              onClick: () => handleAutoGenerate('single_for_all'),\n              disabled: isGenerating || Object.values(content).slice(1).filter(script => script === null || script === void 0 ? void 0 : script.trim()).length === 0,\n              sx: {\n                ml: 2,\n                minWidth: 100\n              },\n              children: \"\\uC790\\uB3D9\\uC0DD\\uC131\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 9\n      }, this), isGenerating && /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          mt: 2,\n          display: 'flex',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(CircularProgress, {\n          size: 20,\n          sx: {\n            mr: 1\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          color: \"primary\",\n          children: generationProgress\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 11\n      }, this), generationProgress && !isGenerating && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"success\",\n        sx: {\n          mt: 2\n        },\n        children: generationProgress\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Paper, {\n      sx: {\n        p: 3,\n        mb: 3\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        gutterBottom: true,\n        children: \"\\uBBF8\\uB514\\uC5B4 \\uD30C\\uC77C \\uBA40\\uD2F0 \\uB4DC\\uB798\\uADF8 \\uC601\\uC5ED\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        color: \"text.secondary\",\n        sx: {\n          mb: 2\n        },\n        children: \"\\uC5EC\\uB7EC \\uBBF8\\uB514\\uC5B4 \\uD30C\\uC77C\\uC744 \\uD55C \\uBC88\\uC5D0 \\uB4DC\\uB798\\uADF8\\uD558\\uC5EC \\uC5C5\\uB85C\\uB4DC\\uD558\\uC138\\uC694. \\uBE48 \\uC2AC\\uB86F\\uBD80\\uD130 \\uC790\\uB3D9\\uC73C\\uB85C \\uCC44\\uC6CC\\uC9D1\\uB2C8\\uB2E4.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        ...getRootProps(),\n        sx: {\n          border: 2,\n          borderColor: isDragActive ? 'primary.main' : 'grey.300',\n          borderStyle: 'dashed',\n          borderRadius: 2,\n          p: 4,\n          textAlign: 'center',\n          cursor: 'pointer',\n          bgcolor: isDragActive ? 'action.hover' : 'background.paper',\n          transition: 'all 0.2s ease-in-out',\n          '&:hover': {\n            borderColor: 'primary.main',\n            bgcolor: 'action.hover'\n          }\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          ...getInputProps()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CloudUpload, {\n          sx: {\n            fontSize: 48,\n            color: 'grey.400',\n            mb: 2\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          gutterBottom: true,\n          children: isDragActive ? 'ì—¬ê¸°ì— íŒŒì¼ì„ ë†“ìœ¼ì„¸ìš”' : 'ë¯¸ë””ì–´ íŒŒì¼ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì„ íƒ'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          color: \"text.secondary\",\n          children: [\"\\uC9C0\\uC6D0 \\uD615\\uC2DD: JPG, PNG, GIF, WebP, BMP, MP4, MOV, AVI, WebM, MKV (\\uCD5C\\uB300 \", imageUploadMode === 'single-for-all' ? '40MB' : '10MB', \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          color: \"text.secondary\",\n          sx: {\n            mt: 1\n          },\n          children: [\"\\uD604\\uC7AC \\uC0C1\\uD0DC: \", getActualImageCount(), \"/\", requiredImageCount, \"\\uAC1C\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 9\n      }, this), Object.entries(uploadProgress).map(([filename, progress]) => /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          mt: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"caption\",\n          color: \"text.secondary\",\n          children: [filename, \" \\uC5C5\\uB85C\\uB4DC \\uC911...\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(LinearProgress, {\n          variant: \"determinate\",\n          value: progress,\n          sx: {\n            mt: 0.5\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 494,\n          columnNumber: 13\n        }, this)]\n      }, filename, true, {\n        fileName: _jsxFileName,\n        lineNumber: 490,\n        columnNumber: 11\n      }, this)), errors.map((error, index) => /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        sx: {\n          mt: 2\n        },\n        children: error\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 500,\n        columnNumber: 11\n      }, this)), canProceed && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"success\",\n        sx: {\n          mt: 2\n        },\n        children: \"\\uBAA8\\uB4E0 \\uBBF8\\uB514\\uC5B4\\uAC00 \\uC5C5\\uB85C\\uB4DC\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4! \\uB2E4\\uC74C \\uB2E8\\uACC4\\uB85C \\uC9C4\\uD589\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 449,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mt: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Divider, {\n        sx: {\n          mb: 3\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 515,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextImagePairManager, {\n        ref: textImagePairManagerRef,\n        content: content,\n        imageUploadMode: imageUploadMode,\n        images: images,\n        jobId: jobId,\n        onChange: onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 514,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        mt: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outlined\",\n        onClick: onBack,\n        size: \"large\",\n        children: \"\\uC774\\uC804: \\uB300\\uBCF8 \\uC791\\uC131\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 528,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        onClick: onNext,\n        size: \"large\",\n        disabled: !canProceed,\n        children: \"\\uB2E4\\uC74C: \\uC74C\\uC545 \\uC120\\uD0DD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 527,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 331,\n    columnNumber: 5\n  }, this);\n}, \"VKoZ/sGKpTIiFlNQU0v6tvORNlc=\", false, function () {\n  return [useDropzone];\n})), \"VKoZ/sGKpTIiFlNQU0v6tvORNlc=\", false, function () {\n  return [useDropzone];\n});\n\n// Display name for debugging\n_c2 = ImageStep;\nImageStep.displayName = 'ImageStep';\nexport default ImageStep;\nvar _c, _c2;\n$RefreshReg$(_c, \"ImageStep$forwardRef\");\n$RefreshReg$(_c2, \"ImageStep\");","map":{"version":3,"names":["React","useState","useCallback","useRef","useImperativeHandle","forwardRef","Box","Paper","Typography","Button","FormControl","RadioGroup","FormControlLabel","Radio","Alert","LinearProgress","CircularProgress","Divider","CloudUpload","AutoFixHigh","useDropzone","TextImagePairManager","jsxDEV","_jsxDEV","ImageStep","_s","_c","images","imageUploadMode","content","jobId","onChange","onNext","onBack","ref","textImagePairManagerRef","uploadProgress","setUploadProgress","errors","setErrors","isGenerating","setIsGenerating","generationProgress","setGenerationProgress","getEditedData","_textImagePairManager","current","editedTexts","customPrompts","getRequiredImageCount","scriptCount","Object","values","slice","filter","script","trim","length","Math","ceil","requiredImageCount","onDrop","acceptedFiles","validFiles","newErrors","forEach","file","index","maxSize","maxSizeText","size","push","name","isImage","type","startsWith","isVideo","prev","progress","interval","setInterval","clearInterval","setTimeout","newProgress","updatedImages","validFileIndex","i","hasImageAtIndex","some","img","__imageIndex","sort","a","b","_imageIndex","_imageIndex2","indexA","indexB","getRootProps","getInputProps","isDragActive","accept","maxFiles","undefined","disabled","removeImage","imageIndex","newImages","handleModeChange","event","newMode","target","value","newRequiredCount","formatFileSize","bytes","k","sizes","floor","log","parseFloat","pow","toFixed","getMediaPreview","URL","createObjectURL","isVideoFile","getActualImageCount","canProceed","handleAutoGenerate","mode","bodyTexts","entries","key","map","response","fetch","method","headers","body","JSON","stringify","texts","job_id","ok","errorData","json","Error","detail","data","imageUrls","image_urls","imageFiles","Promise","all","url","fullUrl","imageResponse","blob","fileName","File","targetIndex","existingIndex","findIndex","_imageIndex3","_imageIndex4","finalImages","successCount","totalRequested","error","console","message","children","variant","component","gutterBottom","_jsxFileName","lineNumber","columnNumber","color","sx","mb","p","display","alignItems","justifyContent","width","control","label","startIcon","onClick","ml","minWidth","mt","mr","severity","border","borderColor","borderStyle","borderRadius","textAlign","cursor","bgcolor","transition","fontSize","filename","_c2","displayName","$RefreshReg$"],"sources":["/zstus/frontend/src/components/ImageStep.tsx"],"sourcesContent":["import React, { useState, useCallback, useEffect, useRef, useImperativeHandle, forwardRef } from 'react';\nimport {\n  Box,\n  Paper,\n  Typography,\n  Button,\n  Grid,\n  FormControl,\n  FormLabel,\n  RadioGroup,\n  FormControlLabel,\n  Radio,\n  Alert,\n  Card,\n  CardContent,\n  IconButton,\n  Chip,\n  LinearProgress,\n  CircularProgress,\n  Divider,\n} from '@mui/material';\nimport { CloudUpload, Delete, Image as ImageIcon, AutoFixHigh } from '@mui/icons-material';\nimport { useDropzone } from 'react-dropzone';\nimport { ReelsContent, ImageUploadMode } from '../types';\nimport TextImagePairManager, { TextImagePairManagerRef } from './TextImagePairManager';\n\ninterface ImageStepProps {\n  images: File[];\n  imageUploadMode: ImageUploadMode;\n  content: ReelsContent;\n  jobId: string;\n  onChange: (images: File[], mode: ImageUploadMode) => void;\n  onNext: () => void;\n  onBack: () => void;\n}\n\n// âœ… ImageStep ref íƒ€ì… ì •ì˜\nexport interface ImageStepRef {\n  getEditedData: () => {\n    editedTexts: { [key: number]: string[] };\n    customPrompts: { [key: number]: any };\n  };\n}\n\nconst ImageStep = forwardRef<ImageStepRef, ImageStepProps>(({\n  images,\n  imageUploadMode,\n  content,\n  jobId,\n  onChange,\n  onNext,\n  onBack,\n}, ref) => {\n  // âœ… TextImagePairManagerì˜ ref ìƒì„±\n  const textImagePairManagerRef = useRef<TextImagePairManagerRef>(null);\n  const [uploadProgress, setUploadProgress] = useState<{ [key: string]: number }>({});\n  const [errors, setErrors] = useState<string[]>([]);\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [generationProgress, setGenerationProgress] = useState('');\n\n  // âœ… ì™¸ë¶€ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ê°ˆ ìˆ˜ ìˆë„ë¡ ë©”ì„œë“œ ì œê³µ\n  useImperativeHandle(ref, () => ({\n    getEditedData: () => {\n      return textImagePairManagerRef.current?.getEditedData() || {\n        editedTexts: {},\n        customPrompts: {}\n      };\n    }\n  }), []);\n\n  // í•„ìš”í•œ ì´ë¯¸ì§€ ê°œìˆ˜ ê³„ì‚°\n  const getRequiredImageCount = () => {\n    const scriptCount = Object.values(content)\n      .slice(1) // title ì œì™¸\n      .filter(script => script?.trim()).length;\n\n    if (imageUploadMode === 'per-script') {\n      return scriptCount;\n    } else if (imageUploadMode === 'per-two-scripts') {\n      return Math.ceil(scriptCount / 2);\n    } else { // single-for-all\n      return 1;\n    }\n  };\n\n  const requiredImageCount = getRequiredImageCount();\n\n  const onDrop = useCallback((acceptedFiles: File[]) => {\n    const validFiles: File[] = [];\n    const newErrors: string[] = [];\n\n    acceptedFiles.forEach((file, index) => {\n      // íŒŒì¼ í¬ê¸° ê²€ì¦ (ëª¨ë“œì— ë”°ë¼ ë‹¤ë¥¸ ì œí•œ)\n      const maxSize = imageUploadMode === 'single-for-all' ? 80 * 1024 * 1024 : 40 * 1024 * 1024;\n      const maxSizeText = imageUploadMode === 'single-for-all' ? '80MB' : '40MB';\n\n      if (file.size > maxSize) {\n        newErrors.push(`${file.name}: íŒŒì¼ í¬ê¸°ê°€ ${maxSizeText}ë¥¼ ì´ˆê³¼í•©ë‹ˆë‹¤`);\n        return;\n      }\n\n      // íŒŒì¼ í˜•ì‹ ê²€ì¦ (ì´ë¯¸ì§€ + ë¹„ë””ì˜¤)\n      const isImage = file.type.startsWith('image/');\n      const isVideo = file.type.startsWith('video/');\n      \n      if (!isImage && !isVideo) {\n        newErrors.push(`${file.name}: ì´ë¯¸ì§€ ë˜ëŠ” ë¹„ë””ì˜¤ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤`);\n        return;\n      }\n\n      validFiles.push(file);\n\n      // ì—…ë¡œë“œ ì§„í–‰ë¥  ì‹œë®¬ë ˆì´ì…˜\n      setUploadProgress(prev => ({ ...prev, [file.name]: 0 }));\n      \n      // ê°€ìƒì˜ ì—…ë¡œë“œ ì§„í–‰ë¥ \n      let progress = 0;\n      const interval = setInterval(() => {\n        progress += 10;\n        setUploadProgress(prev => ({ ...prev, [file.name]: progress }));\n        \n        if (progress >= 100) {\n          clearInterval(interval);\n          setTimeout(() => {\n            setUploadProgress(prev => {\n              const newProgress = { ...prev };\n              delete newProgress[file.name];\n              return newProgress;\n            });\n          }, 500);\n        }\n      }, 100);\n    });\n\n    if (validFiles.length > 0) {\n      // ìŠ¤ë§ˆíŠ¸ ì´ë¯¸ì§€ í• ë‹¹: ë¹ˆ ìŠ¬ë¡¯ë¶€í„° ì±„ìš°ê¸°\n      const updatedImages = [...images];\n      \n      // ê° valid íŒŒì¼ì— ëŒ€í•´ ì²« ë²ˆì§¸ë¡œ ë¹„ì–´ìˆëŠ” ìŠ¬ë¡¯ì— __imageIndex ì„¤ì •í•˜ì—¬ ì¶”ê°€\n      let validFileIndex = 0;\n      for (let i = 0; i < requiredImageCount && validFileIndex < validFiles.length; i++) {\n        // í•´ë‹¹ ì¸ë±ìŠ¤ì— ì´ë¯¸ì§€ê°€ ì—†ìœ¼ë©´ ìƒˆ íŒŒì¼ í• ë‹¹\n        const hasImageAtIndex = images.some(img => (img as any).__imageIndex === i);\n        if (!hasImageAtIndex) {\n          const file = validFiles[validFileIndex];\n          (file as any).__imageIndex = i;\n          updatedImages.push(file);\n          validFileIndex++;\n        }\n      }\n      \n      // ìœ„ì¹˜ ì •ë³´ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬\n      updatedImages.sort((a, b) => {\n        const indexA = (a as any).__imageIndex ?? 0;\n        const indexB = (b as any).__imageIndex ?? 0;\n        return indexA - indexB;\n      });\n      \n      onChange(updatedImages, imageUploadMode);\n    }\n\n    setErrors(newErrors);\n  }, [images, imageUploadMode, requiredImageCount, onChange]);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: {\n      'image/*': ['.jpeg', '.jpg', '.png', '.gif', '.webp', '.bmp', '.heic', '.heif'],\n      'video/*': ['.mp4', '.mov', '.avi', '.webm', '.mkv']\n    },\n    // ë¬´ì œí•œ íŒŒì¼ ì—…ë¡œë“œ í—ˆìš© (ë¹ˆ ìŠ¬ë¡¯ì— ìë™ í• ë‹¹)\n    maxFiles: undefined,\n    disabled: false\n  });\n\n  const removeImage = (imageIndex: number) => {\n    // íŠ¹ì • __imageIndexë¥¼ ê°€ì§„ íŒŒì¼ë§Œ ì œê±°\n    const newImages = images.filter(img => (img as any).__imageIndex !== imageIndex);\n    onChange(newImages, imageUploadMode);\n  };\n\n  const handleModeChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const newMode = event.target.value as ImageUploadMode;\n    const scriptCount = Object.values(content).slice(1).filter(script => script?.trim()).length;\n\n    let newRequiredCount;\n    if (newMode === 'per-script') {\n      newRequiredCount = scriptCount;\n    } else if (newMode === 'per-two-scripts') {\n      newRequiredCount = Math.ceil(scriptCount / 2);\n    } else { // single-for-all\n      newRequiredCount = 1;\n    }\n\n    // ê¸°ì¡´ ì´ë¯¸ì§€ê°€ ìƒˆë¡œìš´ ìš”êµ¬ì‚¬í•­ë³´ë‹¤ ë§ìœ¼ë©´ ìë¥´ê¸°\n    const newImages = images.slice(0, newRequiredCount);\n    onChange(newImages, newMode);\n  };\n\n  const formatFileSize = (bytes: number) => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  const getMediaPreview = (file: File) => {\n    return URL.createObjectURL(file);\n  };\n\n  const isVideoFile = (file: File) => {\n    return file.type.startsWith('video/');\n  };\n\n  // ìœ„ì¹˜ ì •ë³´ê°€ ìˆëŠ” ì‹¤ì œ ì´ë¯¸ì§€ ê°œìˆ˜ ê³„ì‚°\n  const getActualImageCount = () => {\n    return images.filter(img => typeof (img as any).__imageIndex === 'number').length;\n  };\n\n  const canProceed = getActualImageCount() === requiredImageCount;\n\n  // ìë™ ì´ë¯¸ì§€ ìƒì„± í•¨ìˆ˜\n  const handleAutoGenerate = async (mode: 'per_script' | 'per_two_scripts' | 'single_for_all') => {\n    setIsGenerating(true);\n    setErrors([]);\n    \n    try {\n      // contentì—ì„œ body í…ìŠ¤íŠ¸ë“¤ ì¶”ì¶œ\n      const bodyTexts = Object.entries(content)\n        .filter(([key, value]) => key.startsWith('body') && value?.trim())\n        .map(([key, value]) => value.trim());\n      \n      if (bodyTexts.length === 0) {\n        setErrors(['ëŒ€ë³¸ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € ëŒ€ë³¸ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.']);\n        setIsGenerating(false);\n        return;\n      }\n\n      setGenerationProgress('ì´ë¯¸ì§€ ìƒì„± ì¤‘...');\n      \n      const response = await fetch('/generate-images', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          texts: bodyTexts,\n          mode: mode,\n          job_id: jobId  // Job ID ì¶”ê°€\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.detail || ' ì´ë¯¸ì§€ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');\n      }\n\n      const data = await response.json();\n      const imageUrls = data.image_urls;\n\n      setGenerationProgress('ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ ì¤‘...');\n      \n      // ë°±ì—”ë“œì—ì„œ ì €ì¥ëœ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê³  File ê°ì²´ë¡œ ë³€í™˜\n      const imageFiles = await Promise.all(\n        imageUrls.filter((url: string) => url.trim() !== '').map(async (url: string, index: number) => {\n          // ë°±ì—”ë“œì™€ ê°™ì€ ì„œë²„ë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ìƒëŒ€ ê²½ë¡œë¡œ ì ‘ê·¼\n          const fullUrl = url.startsWith('http') ? url : url;\n          const imageResponse = await fetch(fullUrl);\n          if (!imageResponse.ok) {\n            throw new Error(`ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨: ${index + 1}`);\n          }\n          \n          const blob = await imageResponse.blob();\n          const fileName = `generated_image_${index + 1}.png`;\n          const file = new File([blob], fileName, { type: 'image/png' });\n          \n          // ğŸ”§ ì¤‘ìš”: TextImagePairManagerì—ì„œ ë§¤ì¹­ì„ ìœ„í•œ __imageIndex ì„¤ì •\n          (file as any).__imageIndex = index;\n          \n          return file;\n        })\n      );\n\n      // ğŸ”§ ê¸°ì¡´ ì´ë¯¸ì§€ì™€ ìƒˆë¡œ ìƒì„±ëœ ì´ë¯¸ì§€ë¥¼ ìŠ¤ë§ˆíŠ¸í•˜ê²Œ ë³‘í•©\n      // ë¹ˆ ìŠ¬ë¡¯ë¶€í„° ì±„ìš°ê³ , imageIndex ìˆœìœ¼ë¡œ ì •ë ¬\n      const updatedImages = [...images];\n      \n      imageFiles.forEach((file) => {\n        const targetIndex = (file as any).__imageIndex;\n        // í•´ë‹¹ ì¸ë±ìŠ¤ì— ê¸°ì¡´ ì´ë¯¸ì§€ê°€ ìˆìœ¼ë©´ êµì²´, ì—†ìœ¼ë©´ ì¶”ê°€\n        const existingIndex = updatedImages.findIndex(img => (img as any).__imageIndex === targetIndex);\n        if (existingIndex >= 0) {\n          updatedImages[existingIndex] = file;\n        } else {\n          updatedImages.push(file);\n        }\n      });\n      \n      // imageIndex ìˆœìœ¼ë¡œ ì •ë ¬\n      updatedImages.sort((a, b) => {\n        const indexA = (a as any).__imageIndex ?? 0;\n        const indexB = (b as any).__imageIndex ?? 0;\n        return indexA - indexB;\n      });\n      \n      // í•„ìš”í•œ ê°œìˆ˜ë§Œí¼ë§Œ ìœ ì§€\n      const finalImages = updatedImages.slice(0, requiredImageCount);\n      onChange(finalImages, imageUploadMode);\n      \n      const successCount = imageFiles.length;\n      const totalRequested = imageUrls.length;\n      \n      if (successCount === totalRequested) {\n        setGenerationProgress('ì´ë¯¸ì§€ ìƒì„± ì™„ë£Œ!');\n      } else {\n        setGenerationProgress(`ì´ë¯¸ì§€ ìƒì„± ì™„ë£Œ! (${successCount}/${totalRequested}ê°œ ì„±ê³µ)`);\n      }\n      \n      setTimeout(() => setGenerationProgress(''), 3000);\n      \n    } catch (error) {\n      console.error('ì´ë¯¸ì§€ ìƒì„± ì¤‘ ì˜¤ë¥˜:', error);\n      setErrors([error instanceof Error ? error.message : 'ì´ë¯¸ì§€ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤']);\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  return (\n    <Box>\n      <Typography variant=\"h4\" component=\"h1\" gutterBottom>\n        ë¯¸ë””ì–´ ì—…ë¡œë“œ\n      </Typography>\n      <Typography variant=\"body1\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        ë¦´ìŠ¤ ì˜ìƒì˜ ë°°ê²½ìœ¼ë¡œ ì‚¬ìš©í•  ì´ë¯¸ì§€ ë˜ëŠ” ì˜ìƒì„ ì—…ë¡œë“œí•˜ì„¸ìš”. (ì´ë¯¸ì§€: JPG, PNG, GIF, WebP / ì˜ìƒ: MP4, MOV, AVI, WebM, MKV)\n      </Typography>\n\n      {/* ì—…ë¡œë“œ ëª¨ë“œ ì„ íƒ */}\n      <Paper sx={{ p: 3, mb: 3 }}>\n        <Typography variant=\"h6\" gutterBottom>\n          ì—…ë¡œë“œ ëª¨ë“œ ì„ íƒ\n        </Typography>\n        \n        <FormControl component=\"fieldset\">\n          <RadioGroup\n            value={imageUploadMode}\n            onChange={handleModeChange}\n          >\n            <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', width: '100%' }}>\n              <FormControlLabel\n                value=\"per-two-scripts\"\n                control={<Radio />}\n                label={\n                  <Box>\n                    <Typography variant=\"body1\">\n                      ëŒ€ì‚¬ 2ê°œë§ˆë‹¤ ë¯¸ë””ì–´ 1ê°œ\n                    </Typography>\n                    <Typography variant=\"caption\" color=\"text.secondary\">\n                      í•„ìš” ë¯¸ë””ì–´: {Math.ceil(Object.values(content).slice(1).filter(script => script?.trim()).length / 2)}ê°œ (ê° ìµœëŒ€ 10MB)\n                    </Typography>\n                  </Box>\n                }\n              />\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                startIcon={<AutoFixHigh />}\n                onClick={() => handleAutoGenerate('per_two_scripts')}\n                disabled={isGenerating || Object.values(content).slice(1).filter(script => script?.trim()).length === 0}\n                sx={{ ml: 2, minWidth: 100 }}\n              >\n                ìë™ìƒì„±\n              </Button>\n            </Box>\n            <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', width: '100%' }}>\n              <FormControlLabel\n                value=\"per-script\"\n                control={<Radio />}\n                label={\n                  <Box>\n                    <Typography variant=\"body1\">\n                      ëŒ€ì‚¬ë§ˆë‹¤ ë¯¸ë””ì–´ 1ê°œ\n                    </Typography>\n                    <Typography variant=\"caption\" color=\"text.secondary\">\n                      í•„ìš” ë¯¸ë””ì–´: {Object.values(content).slice(1).filter(script => script?.trim()).length}ê°œ (ê° ìµœëŒ€ 10MB)\n                    </Typography>\n                  </Box>\n                }\n              />\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                startIcon={<AutoFixHigh />}\n                onClick={() => handleAutoGenerate('per_script')}\n                disabled={isGenerating || Object.values(content).slice(1).filter(script => script?.trim()).length === 0}\n                sx={{ ml: 2, minWidth: 100 }}\n              >\n                ìë™ìƒì„±\n              </Button>\n            </Box>\n            <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', width: '100%' }}>\n              <FormControlLabel\n                value=\"single-for-all\"\n                control={<Radio />}\n                label={\n                  <Box>\n                    <Typography variant=\"body1\">\n                      ëª¨ë“  ëŒ€ì‚¬ì— ë¯¸ë””ì–´ 1ê°œ\n                    </Typography>\n                    <Typography variant=\"caption\" color=\"text.secondary\">\n                      í•„ìš” ë¯¸ë””ì–´: 1ê°œ (ëª¨ë“  ëŒ€ì‚¬ì— ë™ì¼í•œ ë¯¸ë””ì–´ ì‚¬ìš©, ìµœëŒ€ 40MB)\n                    </Typography>\n                  </Box>\n                }\n              />\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                startIcon={<AutoFixHigh />}\n                onClick={() => handleAutoGenerate('single_for_all')}\n                disabled={isGenerating || Object.values(content).slice(1).filter(script => script?.trim()).length === 0}\n                sx={{ ml: 2, minWidth: 100 }}\n              >\n                ìë™ìƒì„±\n              </Button>\n            </Box>\n          </RadioGroup>\n        </FormControl>\n        \n        {/* ìƒì„± ì§„í–‰ ìƒí™© í‘œì‹œ */}\n        {isGenerating && (\n          <Box sx={{ mt: 2, display: 'flex', alignItems: 'center' }}>\n            <CircularProgress size={20} sx={{ mr: 1 }} />\n            <Typography variant=\"body2\" color=\"primary\">\n              {generationProgress}\n            </Typography>\n          </Box>\n        )}\n        \n        {generationProgress && !isGenerating && (\n          <Alert severity=\"success\" sx={{ mt: 2 }}>\n            {generationProgress}\n          </Alert>\n        )}\n      </Paper>\n\n      {/* ë¯¸ë””ì–´ íŒŒì¼ ë©€í‹° ë“œë˜ê·¸ ì˜ì—­ */}\n      <Paper sx={{ p: 3, mb: 3 }}>\n        <Typography variant=\"h6\" gutterBottom>\n          ë¯¸ë””ì–´ íŒŒì¼ ë©€í‹° ë“œë˜ê·¸ ì˜ì—­\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n          ì—¬ëŸ¬ ë¯¸ë””ì–´ íŒŒì¼ì„ í•œ ë²ˆì— ë“œë˜ê·¸í•˜ì—¬ ì—…ë¡œë“œí•˜ì„¸ìš”. ë¹ˆ ìŠ¬ë¡¯ë¶€í„° ìë™ìœ¼ë¡œ ì±„ì›Œì§‘ë‹ˆë‹¤.\n        </Typography>\n        \n        <Box\n          {...getRootProps()}\n          sx={{\n            border: 2,\n            borderColor: isDragActive ? 'primary.main' : 'grey.300',\n            borderStyle: 'dashed',\n            borderRadius: 2,\n            p: 4,\n            textAlign: 'center',\n            cursor: 'pointer',\n            bgcolor: isDragActive ? 'action.hover' : 'background.paper',\n            transition: 'all 0.2s ease-in-out',\n            '&:hover': {\n              borderColor: 'primary.main',\n              bgcolor: 'action.hover',\n            }\n          }}\n        >\n          <input {...getInputProps()} />\n          <CloudUpload sx={{ fontSize: 48, color: 'grey.400', mb: 2 }} />\n          <Typography variant=\"h6\" gutterBottom>\n            {isDragActive ? 'ì—¬ê¸°ì— íŒŒì¼ì„ ë†“ìœ¼ì„¸ìš”' : 'ë¯¸ë””ì–´ íŒŒì¼ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì„ íƒ'}\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            ì§€ì› í˜•ì‹: JPG, PNG, GIF, WebP, BMP, MP4, MOV, AVI, WebM, MKV (ìµœëŒ€ {imageUploadMode === 'single-for-all' ? '40MB' : '10MB'})\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1 }}>\n            í˜„ì¬ ìƒíƒœ: {getActualImageCount()}/{requiredImageCount}ê°œ\n          </Typography>\n        </Box>\n\n        {/* ì—…ë¡œë“œ ì§„í–‰ë¥  */}\n        {Object.entries(uploadProgress).map(([filename, progress]) => (\n          <Box key={filename} sx={{ mt: 2 }}>\n            <Typography variant=\"caption\" color=\"text.secondary\">\n              {filename} ì—…ë¡œë“œ ì¤‘...\n            </Typography>\n            <LinearProgress variant=\"determinate\" value={progress} sx={{ mt: 0.5 }} />\n          </Box>\n        ))}\n\n        {/* ì—ëŸ¬ ë©”ì‹œì§€ */}\n        {errors.map((error, index) => (\n          <Alert severity=\"error\" key={index} sx={{ mt: 2 }}>\n            {error}\n          </Alert>\n        ))}\n        \n        {/* ì§„í–‰ë¥  í‘œì‹œ */}\n        {canProceed && (\n          <Alert severity=\"success\" sx={{ mt: 2 }}>\n            ëª¨ë“  ë¯¸ë””ì–´ê°€ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤! ë‹¤ìŒ ë‹¨ê³„ë¡œ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n          </Alert>\n        )}\n      </Paper>\n\n      {/* í…ìŠ¤íŠ¸-ì´ë¯¸ì§€ ë§¤ì¹­ ê´€ë¦¬ ì˜ì—­ */}\n      <Box sx={{ mt: 4 }}>\n        <Divider sx={{ mb: 3 }} />\n        <TextImagePairManager\n          ref={textImagePairManagerRef}\n          content={content}\n          imageUploadMode={imageUploadMode}\n          images={images}\n          jobId={jobId}\n          onChange={onChange}\n        />\n      </Box>\n\n      {/* í•˜ë‹¨ ë²„íŠ¼ */}\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', mt: 4 }}>\n        <Button\n          variant=\"outlined\"\n          onClick={onBack}\n          size=\"large\"\n        >\n          ì´ì „: ëŒ€ë³¸ ì‘ì„±\n        </Button>\n        <Button\n          variant=\"contained\"\n          onClick={onNext}\n          size=\"large\"\n          disabled={!canProceed}\n        >\n          ë‹¤ìŒ: ìŒì•… ì„ íƒ\n        </Button>\n      </Box>\n    </Box>\n  );\n});\n\n// Display name for debugging\nImageStep.displayName = 'ImageStep';\n\nexport default ImageStep;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}