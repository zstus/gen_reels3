{"ast":null,"code":"var _jsxFileName = \"/zstus/frontend/src/components/TextImagePairManager.tsx\",\n  _s3 = $RefreshSig$();\nimport React, { useState, useCallback, useMemo, memo, useEffect, useRef, useImperativeHandle, forwardRef } from 'react';\nimport { Box, Typography, Button, Grid, Card, CardContent, IconButton, Alert, CircularProgress, TextField, FormControlLabel, Switch, Collapse } from '@mui/material';\nimport { CloudUpload, Delete, AutoFixHigh, Refresh, Download, ExpandMore, ExpandLess, Movie as MovieIcon, VideoLibrary } from '@mui/icons-material';\nimport { useDropzone } from 'react-dropzone';\nimport VideoBookmarkModal from './VideoBookmarkModal';\nimport apiService from '../services/api';\n\n// ‚úÖ refÎ•º ÌÜµÌï¥ Ïô∏Î∂ÄÏóêÏÑú Ï†ëÍ∑º Í∞ÄÎä•Ìïú Î©îÏÑúÎìú ÌÉÄÏûÖ Ï†ïÏùò\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TextImagePairManager = /*#__PURE__*/_s3(/*#__PURE__*/forwardRef(_c = _s3(({\n  content,\n  imageUploadMode,\n  images,\n  jobId,\n  onChange\n}, ref) => {\n  var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  _s3();\n  const [generationStatus, setGenerationStatus] = useState({});\n  const [uploadErrors, setUploadErrors] = useState({});\n  const [customPrompts, setCustomPrompts] = useState({});\n  const [promptsExpanded, setPromptsExpanded] = useState({});\n  const [bookmarkModalOpen, setBookmarkModalOpen] = useState(false);\n  const [currentBookmarkIndex, setCurrentBookmarkIndex] = useState(null);\n  // ÏàòÏ†ïÎêú ÌÖçÏä§Ìä∏ Í¥ÄÎ¶¨ (imageIndex ‚Üí ÌÖçÏä§Ìä∏ Î∞∞Ïó¥)\n  const [editedTexts, setEditedTexts] = useState({});\n\n  // ÏµúÏã† images ÏÉÅÌÉúÎ•º Ï∂îÏ†ÅÌïòÍ∏∞ ÏúÑÌïú ref\n  const imagesRef = useRef(images);\n\n  // images propÏù¥ Î≥ÄÍ≤ΩÎê† ÎïåÎßàÎã§ ref ÏóÖÎç∞Ïù¥Ìä∏\n  useEffect(() => {\n    imagesRef.current = images;\n  }, [images]);\n\n  // ‚úÖ ÏòÅÏÉÅ ÏÉùÏÑ± ÏãúÏ†êÏóêÎßå Îç∞Ïù¥ÌÑ∞Î•º ÏàòÏßëÌïòÎØÄÎ°ú Ïã§ÏãúÍ∞Ñ Ï†ÑÎã¨ Î∂àÌïÑÏöî\n\n  // ‚úÖ refÎ•º ÌÜµÌï¥ Ïô∏Î∂ÄÏóêÏÑú Îç∞Ïù¥ÌÑ∞Î•º Í∞ÄÏ†∏Í∞à Ïàò ÏûàÎèÑÎ°ù Î©îÏÑúÎìú Ï†úÍ≥µ\n  useImperativeHandle(ref, () => ({\n    getEditedData: () => ({\n      editedTexts,\n      customPrompts\n    })\n  }), [editedTexts, customPrompts]);\n\n  // ‚úÖ Ïã¨ÌîåÌïú Ïª§Ïä§ÌÖÄ ÌîÑÎ°¨ÌîÑÌä∏ ÏóÖÎç∞Ïù¥Ìä∏ (useCallback Ï†úÍ±∞)\n  const updateCustomPrompt = (imageIndex, prompt, enabled) => {\n    setCustomPrompts(prev => ({\n      ...prev,\n      [imageIndex]: {\n        imageIndex,\n        prompt,\n        enabled\n      }\n    }));\n  };\n  const togglePromptExpanded = imageIndex => {\n    setPromptsExpanded(prev => ({\n      ...prev,\n      [imageIndex]: !prev[imageIndex]\n    }));\n  };\n\n  // ‚úÖ Ïã¨ÌîåÌïú ÌÖçÏä§Ìä∏ ÏàòÏ†ï Ìï∏Îì§Îü¨ (useCallback Ï†úÍ±∞)\n  const handleTextEdit = (imageIndex, textIdx, newValue) => {\n    setEditedTexts(prev => {\n      const current = prev[imageIndex] || [];\n      const updated = [...current];\n      updated[textIdx] = newValue;\n      return {\n        ...prev,\n        [imageIndex]: updated\n      };\n    });\n  };\n\n  // ÌÖçÏä§Ìä∏-Ïù¥ÎØ∏ÏßÄ Ïåç Îç∞Ïù¥ÌÑ∞ ÏÉùÏÑ± (useMemoÎ°ú ÏµúÏ†ÅÌôî)\n  const textImagePairs = useMemo(() => {\n    const bodyTexts = Object.entries(content).filter(([key, value]) => key.startsWith('body') && (value === null || value === void 0 ? void 0 : value.trim())).map(([key, value], index) => ({\n      key,\n      value: value.trim(),\n      index\n    }));\n\n    // ÏúÑÏπò Ï†ïÎ≥¥Î•º Í∞ÄÏßÑ Ïù¥ÎØ∏ÏßÄÎì§ÏùÑ ÎßµÏúºÎ°ú ÏÉùÏÑ±\n    const imageMap = new Map();\n    images.forEach(img => {\n      const storedIndex = img.__imageIndex;\n      if (typeof storedIndex === 'number') {\n        imageMap.set(storedIndex, img);\n      }\n    });\n    console.log('üó∫Ô∏è createTextImagePairs - imageMap:', Array.from(imageMap.entries()).map(([idx, file]) => `${idx}:${file.name}`));\n    console.log('üìù bodyTexts Í∏∏Ïù¥:', bodyTexts.length, 'imageUploadMode:', imageUploadMode);\n    console.log('üîç Î∞õÏùÄ images Î∞∞Ïó¥:', images.map(img => `${img.name}(__imageIndex:${img.__imageIndex})`));\n    const pairs = [];\n    if (imageUploadMode === 'per-script') {\n      // ÌÖçÏä§Ìä∏ 1Í∞úÎãπ Ïù¥ÎØ∏ÏßÄ 1Í∞ú\n      bodyTexts.forEach(({\n        key,\n        value,\n        index\n      }) => {\n        const foundImage = imageMap.get(index);\n        const customPrompt = customPrompts[index];\n\n        // ÏõêÎ≥∏ ÌÖçÏä§Ìä∏ Î∞∞Ïó¥ (per-scriptÎäî 1Í∞ú)\n        const originalTexts = [value];\n        console.log(`üìã per-script: textIndex=${index}, imageIndex=${index}, foundImage=${(foundImage === null || foundImage === void 0 ? void 0 : foundImage.name) || 'null'}`);\n        pairs.push({\n          textIndex: index,\n          textKey: key,\n          textContent: value,\n          image: foundImage || null,\n          imageIndex: index,\n          isGenerating: false,\n          customPrompt: (customPrompt === null || customPrompt === void 0 ? void 0 : customPrompt.prompt) || '',\n          useCustomPrompt: (customPrompt === null || customPrompt === void 0 ? void 0 : customPrompt.enabled) || false,\n          originalTexts: originalTexts,\n          // Ï∂îÍ∞Ä\n          editedTexts: editedTexts[index] || originalTexts // Ï∂îÍ∞Ä\n        });\n      });\n    } else if (imageUploadMode === 'per-two-scripts') {\n      // ÌÖçÏä§Ìä∏ 2Í∞úÎãπ Ïù¥ÎØ∏ÏßÄ 1Í∞ú\n      for (let i = 0; i < bodyTexts.length; i += 2) {\n        const imageIndex = Math.floor(i / 2);\n        const text1 = bodyTexts[i];\n        const text2 = bodyTexts[i + 1];\n        if (text1) {\n          const foundImage = imageMap.get(imageIndex);\n          const customPrompt = customPrompts[imageIndex];\n\n          // ÏõêÎ≥∏ ÌÖçÏä§Ìä∏ Î∞∞Ïó¥\n          const originalTexts = [text1.value, text2 === null || text2 === void 0 ? void 0 : text2.value].filter(Boolean);\n          // ÏàòÏ†ïÎêú ÌÖçÏä§Ìä∏ Î∞∞Ïó¥ (ÏóÜÏúºÎ©¥ ÏõêÎ≥∏ ÏÇ¨Ïö©)\n          const edited = editedTexts[imageIndex] || originalTexts;\n          console.log(`üìã per-two-scripts: textIndex=${i}, imageIndex=${imageIndex}, foundImage=${(foundImage === null || foundImage === void 0 ? void 0 : foundImage.name) || 'null'}`);\n          pairs.push({\n            textIndex: i,\n            textKey: `${text1.key}${text2 ? `+${text2.key}` : ''}`,\n            textContent: `${text1.value}${text2 ? ` / ${text2.value}` : ''}`,\n            image: foundImage || null,\n            imageIndex: imageIndex,\n            // Ïã§Ï†ú Ïù¥ÎØ∏ÏßÄ Ïù∏Îç±Ïä§ Ï†ÄÏû•\n            isGenerating: false,\n            customPrompt: (customPrompt === null || customPrompt === void 0 ? void 0 : customPrompt.prompt) || '',\n            useCustomPrompt: (customPrompt === null || customPrompt === void 0 ? void 0 : customPrompt.enabled) || false,\n            editedTexts: edited,\n            originalTexts: originalTexts\n          });\n        }\n      }\n    } else if (imageUploadMode === 'single-for-all') {\n      // Î™®Îì† ÌÖçÏä§Ìä∏Ïóê Ïù¥ÎØ∏ÏßÄ 1Í∞ú\n      const allTexts = bodyTexts.map(({\n        key,\n        value\n      }) => key.replace('body', 'ÎåÄÏÇ¨')).join(' + ');\n      const allContent = bodyTexts.map(({\n        value\n      }) => value).join(' / ');\n      const foundImage = imageMap.get(0);\n      const customPrompt = customPrompts[0];\n\n      // ÏõêÎ≥∏ ÌÖçÏä§Ìä∏ Î∞∞Ïó¥ (Î™®Îì† ÎåÄÏÇ¨)\n      const originalTexts = bodyTexts.map(({\n        value\n      }) => value);\n      console.log(`üìã single-for-all: Î™®Îì† ÎåÄÏÇ¨, imageIndex=0, foundImage=${(foundImage === null || foundImage === void 0 ? void 0 : foundImage.name) || 'null'}`);\n      pairs.push({\n        textIndex: 0,\n        textKey: allTexts,\n        textContent: allContent,\n        image: foundImage || null,\n        imageIndex: 0,\n        isGenerating: false,\n        customPrompt: (customPrompt === null || customPrompt === void 0 ? void 0 : customPrompt.prompt) || '',\n        useCustomPrompt: (customPrompt === null || customPrompt === void 0 ? void 0 : customPrompt.enabled) || false,\n        originalTexts: originalTexts,\n        // Ï∂îÍ∞Ä\n        editedTexts: editedTexts[0] || originalTexts // Ï∂îÍ∞Ä\n      });\n    }\n    console.log('üéØ ÏµúÏ¢Ö pairs Í∞úÏàò:', pairs.length);\n    return pairs;\n  }, [content, images, imageUploadMode, customPrompts]);\n\n  // ÌòÑÏû¨ images Î∞∞Ïó¥ ÏÉÅÌÉú Î°úÍπÖ\n  console.log('üì¶ ÌòÑÏû¨ images Î∞∞Ïó¥ Í∏∏Ïù¥:', images.length);\n  console.log('üì¶ ÌòÑÏû¨ images Î∞∞Ïó¥:', images.length > 0 ? images.map(img => `${img.name}(index:${img.__imageIndex})`) : 'Îπà Î∞∞Ïó¥');\n  console.log('üéÆ generationStatus:', generationStatus);\n\n  // Í∞úÎ≥Ñ Ïù¥ÎØ∏ÏßÄ ÏóÖÎ°úÎìú Ìï∏Îì§Îü¨\n  const handleIndividualImageUpload = useCallback((imageIndex, acceptedFiles) => {\n    if (acceptedFiles.length === 0) return;\n    const file = acceptedFiles[0];\n\n    // Í∏∞Ï°¥ ÏóêÎü¨ ÏÉÅÌÉú Ï†úÍ±∞\n    setUploadErrors(prev => {\n      const newErrors = {\n        ...prev\n      };\n      delete newErrors[imageIndex];\n      return newErrors;\n    });\n\n    // ÌååÏùº Ïú†Ìö®ÏÑ± Í≤ÄÏ¶ù (Î™®ÎìúÏóê Îî∞Îùº Îã§Î•∏ Ï†úÌïú)\n    const maxSize = imageUploadMode === 'single-for-all' ? 80 * 1024 * 1024 : 40 * 1024 * 1024;\n    const maxSizeText = imageUploadMode === 'single-for-all' ? '80MB' : '40MB';\n    if (file.size > maxSize) {\n      setUploadErrors(prev => ({\n        ...prev,\n        [imageIndex]: `ÌååÏùº ÌÅ¨Í∏∞Í∞Ä ${maxSizeText}Î•º Ï¥àÍ≥ºÌï©ÎãàÎã§`\n      }));\n      return;\n    }\n    const isImage = file.type.startsWith('image/');\n    const isVideo = file.type.startsWith('video/');\n    if (!isImage && !isVideo) {\n      setUploadErrors(prev => ({\n        ...prev,\n        [imageIndex]: 'Ïù¥ÎØ∏ÏßÄ ÎòêÎäî ÎπÑÎîîÏò§ ÌååÏùºÎßå ÏóÖÎ°úÎìú Í∞ÄÎä•Ìï©ÎãàÎã§'\n      }));\n      return;\n    }\n    console.log('üîß handleIndividualImageUpload - imageIndex:', imageIndex, 'fileName:', file.name);\n\n    // ÌååÏùºÏóê ÏúÑÏπò Ï†ïÎ≥¥ Ï∂îÍ∞Ä\n    file.__imageIndex = imageIndex;\n    console.log('üè∑Ô∏è ÌååÏùºÏóê __imageIndex ÏÑ§Ï†ï:', imageIndex);\n\n    // ÏµúÏã† images ÏÉÅÌÉúÎ•º Í∞ÄÏ†∏ÏôÄÏÑú ÏóÖÎç∞Ïù¥Ìä∏\n    const currentImages = imagesRef.current;\n    console.log('üîÑ ÏóÖÎç∞Ïù¥Ìä∏ Ï†Ñ currentImages (ref):', currentImages.map(img => `${img.name}(index:${img.__imageIndex})`));\n\n    // ÌòÑÏû¨ imagesÏóêÏÑú Ìï¥Îãπ imageIndexÎ•º Í∞ÄÏßÑ ÌååÏùº Ï†úÍ±∞ÌïòÍ≥† ÏÉà ÌååÏùº Ï∂îÍ∞Ä\n    const newImages = currentImages.filter(img => img.__imageIndex !== imageIndex);\n    newImages.push(file);\n\n    // imageIndex ÏàúÏúºÎ°ú Ï†ïÎ†¨\n    newImages.sort((a, b) => {\n      var _imageIndex, _imageIndex2;\n      const indexA = (_imageIndex = a.__imageIndex) !== null && _imageIndex !== void 0 ? _imageIndex : 0;\n      const indexB = (_imageIndex2 = b.__imageIndex) !== null && _imageIndex2 !== void 0 ? _imageIndex2 : 0;\n      return indexA - indexB;\n    });\n    console.log('üìä ÏóÖÎç∞Ïù¥Ìä∏Îêú images Î∞∞Ïó¥:', newImages.map(img => `${img.name}(index:${img.__imageIndex})`));\n    onChange(newImages, imageUploadMode);\n  }, [imageUploadMode, onChange]); // images ÏùòÏ°¥ÏÑ± Ï†úÍ±∞\n\n  // Í∞úÎ≥Ñ Ïù¥ÎØ∏ÏßÄ ÏûêÎèô ÏÉùÏÑ±\n  const handleIndividualGenerate = async (imageIndex, pair, customPrompt, useCustomPrompt) => {\n    console.log('ü§ñ handleIndividualGenerate ÏãúÏûë - imageIndex:', imageIndex, 'pair:', pair, 'customPrompt:', customPrompt, 'useCustomPrompt:', useCustomPrompt);\n    setGenerationStatus(prev => ({\n      ...prev,\n      [imageIndex]: 'generating'\n    }));\n    try {\n      // ÏöîÏ≤≠ Î∞îÎîî Íµ¨ÏÑ±\n      let requestBody = {\n        job_id: jobId // Job ID Ï∂îÍ∞Ä\n      };\n\n      // üéØ Ïö∞ÏÑ†ÏàúÏúÑ 1: Ïª§Ïä§ÌÖÄ ÌîÑÎ°¨ÌîÑÌä∏\n      if (useCustomPrompt && customPrompt !== null && customPrompt !== void 0 && customPrompt.trim()) {\n        requestBody.custom_prompt = customPrompt.trim();\n        console.log('üìù [Ïö∞ÏÑ†ÏàúÏúÑ 1] Ïª§Ïä§ÌÖÄ ÌîÑÎ°¨ÌîÑÌä∏ ÏÇ¨Ïö©:', customPrompt.trim());\n      }\n      // üéØ Ïö∞ÏÑ†ÏàúÏúÑ 2: ÏàòÏ†ïÎêú ÌÖçÏä§Ìä∏ (per-two-scripts Î™®Îìú)\n      else if (pair.editedTexts && pair.originalTexts && pair.editedTexts.some((t, idx) => {\n        var _pair$originalTexts;\n        return t !== ((_pair$originalTexts = pair.originalTexts) === null || _pair$originalTexts === void 0 ? void 0 : _pair$originalTexts[idx]);\n      })) {\n        requestBody.text = pair.editedTexts[0];\n        if (pair.editedTexts[1]) {\n          requestBody.additional_context = pair.editedTexts[1];\n        }\n        console.log('üìù [Ïö∞ÏÑ†ÏàúÏúÑ 2] ÏàòÏ†ïÎêú ÌÖçÏä§Ìä∏ ÏÇ¨Ïö©:', pair.editedTexts[0]);\n      }\n      // üéØ Ïö∞ÏÑ†ÏàúÏúÑ 3: ÏõêÎ≥∏ ÌÖçÏä§Ìä∏\n      else {\n        const texts = pair.textContent.split(' / ');\n        requestBody.text = texts[0];\n        if (texts.length > 1) {\n          requestBody.additional_context = texts[1];\n        }\n        console.log('üìù [Ïö∞ÏÑ†ÏàúÏúÑ 3] ÏõêÎ≥∏ ÌÖçÏä§Ìä∏ ÏÇ¨Ïö©:', texts[0]);\n      }\n      console.log('üöÄ ÏöîÏ≤≠ Î∞îÎîî (Job ID Ìè¨Ìï®):', requestBody);\n      const response = await fetch('/generate-single-image', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(requestBody)\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.detail || 'Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ±Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§');\n      }\n      const data = await response.json();\n      const imageUrl = data.image_url;\n\n      // ÏÉùÏÑ±Îêú Ïù¥ÎØ∏ÏßÄÎ•º Îã§Ïö¥Î°úÎìúÌïòÍ≥† File Í∞ùÏ≤¥Î°ú Î≥ÄÌôò\n      const imageResponse = await fetch(imageUrl);\n      if (!imageResponse.ok) {\n        throw new Error('ÏÉùÏÑ±Îêú Ïù¥ÎØ∏ÏßÄ Îã§Ïö¥Î°úÎìúÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§');\n      }\n      const blob = await imageResponse.blob();\n      const fileName = `generated_image_pair_${imageIndex}.png`;\n      const file = new File([blob], fileName, {\n        type: 'image/png'\n      });\n      console.log('üì∏ Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ± ÏôÑÎ£å - fileName:', fileName, 'Ìò∏Ï∂úÌï† imageIndex:', imageIndex);\n\n      // Ïù¥ÎØ∏ÏßÄ Î∞∞Ïó¥ ÏóÖÎç∞Ïù¥Ìä∏\n      handleIndividualImageUpload(imageIndex, [file]);\n      setGenerationStatus(prev => ({\n        ...prev,\n        [imageIndex]: 'success'\n      }));\n      setTimeout(() => {\n        setGenerationStatus(prev => {\n          const newStatus = {\n            ...prev\n          };\n          delete newStatus[imageIndex];\n          return newStatus;\n        });\n      }, 3000);\n    } catch (error) {\n      console.error('Í∞úÎ≥Ñ Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ± Ïò§Î•ò:', error);\n      setGenerationStatus(prev => ({\n        ...prev,\n        [imageIndex]: 'error'\n      }));\n      setTimeout(() => {\n        setGenerationStatus(prev => {\n          const newStatus = {\n            ...prev\n          };\n          delete newStatus[imageIndex];\n          return newStatus;\n        });\n      }, 5000);\n    }\n  };\n\n  // Í∞úÎ≥Ñ Ïù¥ÎØ∏ÏßÄ ÏÇ≠Ï†ú (Í∞úÏÑ†Îê®)\n  const handleRemoveImage = imageIndex => {\n    console.log('üóëÔ∏è Ïù¥ÎØ∏ÏßÄ ÏÇ≠Ï†ú ÏöîÏ≤≠ - imageIndex:', imageIndex);\n\n    // ÏµúÏã† images ÏÉÅÌÉúÎ•º Í∞ÄÏ†∏ÏôÄÏÑú ÏÇ≠Ï†ú\n    const currentImages = imagesRef.current;\n    const newImages = currentImages.filter(img => img.__imageIndex !== imageIndex);\n\n    // Ìï¥Îãπ Ïù∏Îç±Ïä§Ïùò ÏóêÎü¨ ÏÉÅÌÉúÎèÑ Ìï®Íªò Ï†úÍ±∞\n    setUploadErrors(prev => {\n      const newErrors = {\n        ...prev\n      };\n      delete newErrors[imageIndex];\n      return newErrors;\n    });\n\n    // ÏÉùÏÑ± ÏÉÅÌÉúÎèÑ Ìï®Íªò Ï†úÍ±∞\n    setGenerationStatus(prev => {\n      const newStatus = {\n        ...prev\n      };\n      delete newStatus[imageIndex];\n      return newStatus;\n    });\n    console.log('‚úÖ Ïù¥ÎØ∏ÏßÄ ÏÇ≠Ï†ú ÏôÑÎ£å - imageIndex:', imageIndex);\n    console.log('üìä ÎÇ®ÏùÄ Ïù¥ÎØ∏ÏßÄ:', newImages.map(img => `${img.name}(index:${img.__imageIndex})`));\n    onChange(newImages, imageUploadMode);\n  };\n\n  // Í∞úÎ≥Ñ Ïù¥ÎØ∏ÏßÄ Îã§Ïö¥Î°úÎìú\n  const handleDownloadImage = async (imageIndex, image) => {\n    try {\n      // ÏÉùÏÑ±Îêú Ïù¥ÎØ∏ÏßÄÏù∏ÏßÄ ÌôïÏù∏ (filenameÏúºÎ°ú ÌåêÎã®)\n      if (image.name.startsWith('generated_')) {\n        // Î∞±ÏóîÎìú Îã§Ïö¥Î°úÎìú APIÎ•º ÌÜµÌï¥ Îã§Ïö¥Î°úÎìú\n        const link = document.createElement('a');\n        link.href = `/download-image/${image.name}`;\n        link.download = `reels_image_${imageIndex + 1}.png`;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n      } else {\n        // ÏóÖÎ°úÎìúÎêú ÌååÏùºÏùÄ ÏßÅÏ†ë Îã§Ïö¥Î°úÎìú\n        const url = URL.createObjectURL(image);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `reels_image_${imageIndex + 1}_${image.name}`;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        URL.revokeObjectURL(url);\n      }\n      console.log('üíæ Ïù¥ÎØ∏ÏßÄ Îã§Ïö¥Î°úÎìú ÏôÑÎ£å - imageIndex:', imageIndex, 'fileName:', image.name);\n    } catch (error) {\n      console.error('Ïù¥ÎØ∏ÏßÄ Îã§Ïö¥Î°úÎìú Ïò§Î•ò:', error);\n    }\n  };\n\n  // Î∂ÅÎßàÌÅ¨ Î™®Îã¨ Ïó¥Í∏∞\n  const handleOpenBookmarkModal = imageIndex => {\n    console.log('üé¨ Î∂ÅÎßàÌÅ¨ Î™®Îã¨ Ïó¥Í∏∞ - imageIndex:', imageIndex);\n    setCurrentBookmarkIndex(imageIndex);\n    setBookmarkModalOpen(true);\n  };\n\n  // Î∂ÅÎßàÌÅ¨ Î™®Îã¨ Îã´Í∏∞\n  const handleCloseBookmarkModal = () => {\n    setBookmarkModalOpen(false);\n    setCurrentBookmarkIndex(null);\n  };\n\n  // Î∂ÅÎßàÌÅ¨ ÎπÑÎîîÏò§ ÏÑ†ÌÉù Ìï∏Îì§Îü¨\n  const handleSelectBookmarkVideo = async video => {\n    if (currentBookmarkIndex === null) return;\n    console.log('‚úÖ Î∂ÅÎßàÌÅ¨ ÎπÑÎîîÏò§ ÏÑ†ÌÉù:', video.filename, 'imageIndex:', currentBookmarkIndex);\n    try {\n      // ÏÉùÏÑ± ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏\n      setGenerationStatus(prev => ({\n        ...prev,\n        [currentBookmarkIndex]: 'generating'\n      }));\n\n      // Î∞±ÏóîÎìú API Ìò∏Ï∂ú: Î∂ÅÎßàÌÅ¨ ÎπÑÎîîÏò§Î•º Job Ìè¥ÎçîÎ°ú Î≥µÏÇ¨\n      const response = await apiService.copyBookmarkVideo(jobId, video.filename, currentBookmarkIndex);\n      if (response.status === 'success') {\n        // Î≥µÏÇ¨Îêú ÎπÑÎîîÏò§ ÌååÏùºÏùÑ File Í∞ùÏ≤¥Î°ú Î≥ÄÌôòÌïòÏó¨ Ïù¥ÎØ∏ÏßÄ Î∞∞Ïó¥Ïóê Ï∂îÍ∞Ä\n        const videoUrl = response.data.file_url;\n        const videoFilename = response.data.filename;\n\n        // ÎπÑÎîîÏò§ ÌååÏùºÏùÑ FetchÎ°ú Í∞ÄÏ†∏ÏôÄÏÑú File Í∞ùÏ≤¥ ÏÉùÏÑ±\n        const videoResponse = await fetch(videoUrl);\n        if (!videoResponse.ok) {\n          throw new Error('ÎπÑÎîîÏò§ ÌååÏùº Îã§Ïö¥Î°úÎìúÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§');\n        }\n        const blob = await videoResponse.blob();\n        const file = new File([blob], videoFilename, {\n          type: 'video/mp4'\n        });\n        console.log('üì∏ Î∂ÅÎßàÌÅ¨ ÎπÑÎîîÏò§ ÌååÏùº ÏÉùÏÑ± ÏôÑÎ£å - fileName:', videoFilename, 'imageIndex:', currentBookmarkIndex);\n\n        // Ïù¥ÎØ∏ÏßÄ Î∞∞Ïó¥ ÏóÖÎç∞Ïù¥Ìä∏\n        handleIndividualImageUpload(currentBookmarkIndex, [file]);\n        setGenerationStatus(prev => ({\n          ...prev,\n          [currentBookmarkIndex]: 'success'\n        }));\n        setTimeout(() => {\n          setGenerationStatus(prev => {\n            const newStatus = {\n              ...prev\n            };\n            delete newStatus[currentBookmarkIndex];\n            return newStatus;\n          });\n        }, 3000);\n        console.log('‚úÖ Î∂ÅÎßàÌÅ¨ ÎπÑÎîîÏò§ Î≥µÏÇ¨ Î∞è ÏóÖÎ°úÎìú ÏôÑÎ£å');\n      }\n    } catch (error) {\n      console.error('‚ùå Î∂ÅÎßàÌÅ¨ ÎπÑÎîîÏò§ ÏÑ†ÌÉù Ïò§Î•ò:', error);\n      setGenerationStatus(prev => ({\n        ...prev,\n        [currentBookmarkIndex]: 'error'\n      }));\n      setUploadErrors(prev => ({\n        ...prev,\n        [currentBookmarkIndex]: error.message || 'Î∂ÅÎßàÌÅ¨ ÎπÑÎîîÏò§ Î∂àÎü¨Ïò§Í∏∞ Ïã§Ìå®'\n      }));\n      setTimeout(() => {\n        setGenerationStatus(prev => {\n          const newStatus = {\n            ...prev\n          };\n          delete newStatus[currentBookmarkIndex];\n          return newStatus;\n        });\n      }, 5000);\n    }\n  };\n\n  // ÎπÑÎîîÏò§ ÎØ∏Î¶¨Î≥¥Í∏∞ Ïª¥Ìè¨ÎÑåÌä∏ (Î∏åÎùºÏö∞Ï†Ä ÏßÅÏ†ë Ïû¨ÏÉù)\n  const VideoPreview = /*#__PURE__*/_s(/*#__PURE__*/memo(_s(({\n    file\n  }) => {\n    _s();\n    const [videoUrl, setVideoUrl] = useState(null);\n    useEffect(() => {\n      // Î∏åÎùºÏö∞Ï†ÄÏóêÏÑú ÏßÅÏ†ë Ïû¨ÏÉùÌï† Ïàò ÏûàÎèÑÎ°ù URL ÏÉùÏÑ±\n      const url = URL.createObjectURL(file);\n      setVideoUrl(url);\n      return () => {\n        if (url) {\n          URL.revokeObjectURL(url);\n        }\n      };\n    }, [file]);\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        position: 'relative'\n      },\n      children: [videoUrl && /*#__PURE__*/_jsxDEV(\"video\", {\n        src: videoUrl,\n        style: {\n          width: '100%',\n          aspectRatio: '1/1',\n          objectFit: 'cover',\n          borderRadius: '8px'\n        },\n        autoPlay: true,\n        muted: true,\n        loop: true,\n        playsInline: true,\n        controls: false,\n        onError: e => {\n          console.error('ÎπÑÎîîÏò§ Ïû¨ÏÉù Ïò§Î•ò:', e);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 519,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          position: 'absolute',\n          top: 8,\n          left: 8,\n          bgcolor: 'rgba(0,0,0,0.7)',\n          borderRadius: 1,\n          p: 0.5,\n          display: 'flex',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(MovieIcon, {\n          sx: {\n            fontSize: 16,\n            color: 'white'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 551,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"caption\",\n          color: \"white\",\n          sx: {\n            ml: 0.5\n          },\n          children: \"\\uC601\\uC0C1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 539,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 517,\n      columnNumber: 7\n    }, this);\n  }, \"nkRZTjcntyJfhojS751MifEn6dQ=\")), \"nkRZTjcntyJfhojS751MifEn6dQ=\");\n\n  // Í∞úÎ≥Ñ ÎìúÎûòÍ∑∏Ïï§ÎìúÎ°≠ Ïª¥Ìè¨ÎÑåÌä∏ (React.memoÎ°ú ÏµúÏ†ÅÌôî)\n  const IndividualDropZone = /*#__PURE__*/_s2(/*#__PURE__*/memo(_s2(({\n    imageIndex,\n    pair\n  }) => {\n    _s2();\n    const onDrop = useCallback(acceptedFiles => {\n      handleIndividualImageUpload(imageIndex, acceptedFiles);\n    }, [imageIndex]);\n    const {\n      getRootProps,\n      getInputProps,\n      isDragActive\n    } = useDropzone({\n      onDrop,\n      accept: {\n        'image/*': ['.jpeg', '.jpg', '.png', '.gif', '.webp', '.bmp'],\n        'video/*': ['.mp4', '.mov', '.avi', '.webm', '.mkv']\n      },\n      maxFiles: 1,\n      multiple: false\n    });\n    const isGenerating = generationStatus[imageIndex] === 'generating';\n    const generationError = generationStatus[imageIndex] === 'error';\n    const generationSuccess = generationStatus[imageIndex] === 'success';\n    const uploadError = uploadErrors[imageIndex];\n    const isPromptExpanded = promptsExpanded[imageIndex] || false;\n    const currentCustomPrompt = customPrompts[imageIndex];\n\n    // ‚úÖ Ïã¨ÌîåÌïú Ïª§Ïä§ÌÖÄ ÌîÑÎ°¨ÌîÑÌä∏ Ìï∏Îì§Îü¨ (Î≥µÏû°Ìïú Î°úÏª¨ ÏÉÅÌÉú/ÎîîÎ∞îÏö¥Ïä§ Ï†úÍ±∞)\n\n    return /*#__PURE__*/_jsxDEV(Card, {\n      sx: {\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column'\n      },\n      children: [/*#__PURE__*/_jsxDEV(CardContent, {\n        sx: {\n          flex: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          gutterBottom: true,\n          sx: {\n            fontSize: '0.9rem',\n            fontWeight: 600,\n            color: 'primary.main',\n            mb: 2\n          },\n          children: pair.textKey.replace('body', 'ÎåÄÏÇ¨ ').replace('+body', ' + ÎåÄÏÇ¨ ')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 592,\n          columnNumber: 11\n        }, this), pair.originalTexts ? /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mb: 2\n          },\n          children: pair.originalTexts.map((originalText, idx) => /*#__PURE__*/_jsxDEV(TextField, {\n            fullWidth: true,\n            multiline: true,\n            rows: 2,\n            value: (editedTexts[imageIndex] || pair.originalTexts)[idx] || originalText,\n            onChange: e => handleTextEdit(imageIndex, idx, e.target.value),\n            label: imageUploadMode === 'per-two-scripts' ? `ÎåÄÏÇ¨ ${pair.textIndex + idx + 1}` : imageUploadMode === 'per-script' ? `ÎåÄÏÇ¨ ${pair.textIndex + 1}` : `ÎåÄÏÇ¨ ${idx + 1}`,\n            variant: \"outlined\",\n            size: \"small\",\n            sx: {\n              mb: 1\n            },\n            helperText: idx === 0 ? \"ÏàòÏ†ïÎêú ÌÖçÏä§Ìä∏Îäî ÏòÅÏÉÅ ÏÉùÏÑ± Ïãú ÏÇ¨Ïö©Îê©ÎãàÎã§\" : \"\"\n          }, `text-${imageIndex}-${idx}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 605,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 603,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          sx: {\n            mb: 2,\n            p: 1.5,\n            bgcolor: 'grey.50',\n            borderRadius: 1,\n            border: '1px solid',\n            borderColor: 'grey.200',\n            fontSize: '0.8rem',\n            lineHeight: 1.4\n          },\n          children: pair.textContent\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 623,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mb: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'space-between',\n              mb: 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"caption\",\n              color: \"text.secondary\",\n              sx: {\n                fontWeight: 600\n              },\n              children: \"AI \\uC0DD\\uC131 \\uC635\\uC158\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 640,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n              size: \"small\",\n              onClick: () => togglePromptExpanded(imageIndex),\n              sx: {\n                p: 0.5\n              },\n              children: isPromptExpanded ? /*#__PURE__*/_jsxDEV(ExpandLess, {\n                fontSize: \"small\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 648,\n                columnNumber: 37\n              }, this) : /*#__PURE__*/_jsxDEV(ExpandMore, {\n                fontSize: \"small\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 648,\n                columnNumber: 71\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 643,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 639,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n            in: isPromptExpanded,\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                bgcolor: 'rgba(25, 118, 210, 0.04)',\n                p: 1.5,\n                borderRadius: 1,\n                border: '1px solid rgba(25, 118, 210, 0.12)'\n              },\n              children: [/*#__PURE__*/_jsxDEV(FormControlLabel, {\n                control: /*#__PURE__*/_jsxDEV(Switch, {\n                  checked: (currentCustomPrompt === null || currentCustomPrompt === void 0 ? void 0 : currentCustomPrompt.enabled) || false,\n                  onChange: e => {\n                    updateCustomPrompt(imageIndex, (currentCustomPrompt === null || currentCustomPrompt === void 0 ? void 0 : currentCustomPrompt.prompt) || '', e.target.checked);\n                  },\n                  size: \"small\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 656,\n                  columnNumber: 21\n                }, this),\n                label: /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"caption\",\n                  sx: {\n                    fontWeight: 500\n                  },\n                  children: \"\\uCEE4\\uC2A4\\uD140 \\uD504\\uB86C\\uD504\\uD2B8 \\uC0AC\\uC6A9\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 669,\n                  columnNumber: 21\n                }, this),\n                sx: {\n                  mb: 1,\n                  ml: 0\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 654,\n                columnNumber: 17\n              }, this), (currentCustomPrompt === null || currentCustomPrompt === void 0 ? void 0 : currentCustomPrompt.enabled) && /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                multiline: true,\n                rows: 2,\n                size: \"small\",\n                placeholder: \"\\uC774\\uBBF8\\uC9C0 \\uC0DD\\uC131\\uC744 \\uC704\\uD55C \\uCEE4\\uC2A4\\uD140 \\uD504\\uB86C\\uD504\\uD2B8\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694...\",\n                value: (currentCustomPrompt === null || currentCustomPrompt === void 0 ? void 0 : currentCustomPrompt.prompt) || '',\n                onChange: e => {\n                  updateCustomPrompt(imageIndex, e.target.value, true);\n                },\n                variant: \"outlined\",\n                sx: {\n                  '& .MuiOutlinedInput-root': {\n                    fontSize: '0.75rem',\n                    bgcolor: 'white'\n                  }\n                },\n                helperText: \"\\uC2E4\\uC81C \\uC601\\uC0C1\\uC5D0\\uC11C\\uB294 \\uAE30\\uC874 \\uB300\\uC0AC\\uAC00 \\uC0AC\\uC6A9\\uB418\\uBA70, \\uC774 \\uD504\\uB86C\\uD504\\uD2B8\\uB294 \\uC774\\uBBF8\\uC9C0 \\uC0DD\\uC131\\uC5D0\\uB9CC \\uC0AC\\uC6A9\\uB429\\uB2C8\\uB2E4.\",\n                autoComplete: \"off\",\n                spellCheck: \"false\"\n              }, `prompt-${imageIndex}`, false, {\n                fileName: _jsxFileName,\n                lineNumber: 677,\n                columnNumber: 19\n              }, this), !(currentCustomPrompt !== null && currentCustomPrompt !== void 0 && currentCustomPrompt.enabled) && /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"caption\",\n                color: \"text.secondary\",\n                sx: {\n                  fontStyle: 'italic'\n                },\n                children: \"\\uAE30\\uBCF8 \\uBAA8\\uB4DC: \\uC704\\uC758 \\uB300\\uC0AC \\uB0B4\\uC6A9\\uC744 \\uAE30\\uBC18\\uC73C\\uB85C \\uC774\\uBBF8\\uC9C0\\uB97C \\uC0DD\\uC131\\uD569\\uB2C8\\uB2E4.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 702,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 653,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 652,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 638,\n          columnNumber: 11\n        }, this), pair.image ? /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            position: 'relative',\n            mb: 2\n          },\n          children: [pair.image.type.startsWith('video/') ? /*#__PURE__*/_jsxDEV(VideoPreview, {\n            file: pair.image\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 714,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              width: '100%',\n              aspectRatio: '1/1',\n              backgroundImage: `url(${URL.createObjectURL(pair.image)})`,\n              backgroundSize: 'cover',\n              backgroundPosition: 'center',\n              borderRadius: 1\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 716,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              position: 'absolute',\n              top: 8,\n              right: 8,\n              display: 'flex',\n              gap: 0.5\n            },\n            children: [/*#__PURE__*/_jsxDEV(IconButton, {\n              size: \"small\",\n              onClick: () => handleDownloadImage(imageIndex, pair.image),\n              sx: {\n                bgcolor: 'rgba(255,255,255,0.9)',\n                '&:hover': {\n                  bgcolor: 'rgba(255,255,255,1)'\n                }\n              },\n              title: \"\\uC774\\uBBF8\\uC9C0 \\uB2E4\\uC6B4\\uB85C\\uB4DC\",\n              children: /*#__PURE__*/_jsxDEV(Download, {\n                color: \"success\",\n                fontSize: \"small\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 745,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 736,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n              size: \"small\",\n              onClick: () => handleRemoveImage(imageIndex),\n              sx: {\n                bgcolor: 'rgba(255,255,255,0.9)',\n                '&:hover': {\n                  bgcolor: 'rgba(255,255,255,1)'\n                }\n              },\n              title: \"\\uC774\\uBBF8\\uC9C0 \\uC0AD\\uC81C\",\n              children: /*#__PURE__*/_jsxDEV(Delete, {\n                color: \"error\",\n                fontSize: \"small\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 756,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 747,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n              size: \"small\",\n              onClick: () => {\n                console.log('üîÑ ÏÉàÎ°úÍ≥†Ïπ® Î≤ÑÌäº ÌÅ¥Î¶≠Îê® - imageIndex:', imageIndex, 'pair:', pair);\n                handleIndividualGenerate(imageIndex, pair, currentCustomPrompt === null || currentCustomPrompt === void 0 ? void 0 : currentCustomPrompt.prompt, currentCustomPrompt === null || currentCustomPrompt === void 0 ? void 0 : currentCustomPrompt.enabled);\n              },\n              disabled: isGenerating,\n              sx: {\n                bgcolor: 'rgba(255,255,255,0.9)',\n                '&:hover': {\n                  bgcolor: 'rgba(255,255,255,1)'\n                }\n              },\n              title: \"\\uC774\\uBBF8\\uC9C0 \\uC7AC\\uC0DD\\uC131\",\n              children: isGenerating ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 777,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(Refresh, {\n                color: \"primary\",\n                fontSize: \"small\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 779,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 758,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 729,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"caption\",\n            sx: {\n              position: 'absolute',\n              bottom: 4,\n              left: 8,\n              bgcolor: 'rgba(0,0,0,0.7)',\n              color: 'white',\n              px: 1,\n              py: 0.5,\n              borderRadius: 1\n            },\n            children: pair.image.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 784,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 712,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Box, {\n          ...getRootProps(),\n          sx: {\n            border: 2,\n            borderColor: isDragActive ? 'primary.main' : 'grey.300',\n            borderStyle: 'dashed',\n            borderRadius: 1,\n            p: 2,\n            textAlign: 'center',\n            cursor: 'pointer',\n            bgcolor: isDragActive ? 'action.hover' : 'background.paper',\n            mb: 2,\n            aspectRatio: '1/1',\n            display: 'flex',\n            flexDirection: 'column',\n            justifyContent: 'center',\n            '&:hover': {\n              borderColor: 'primary.main',\n              bgcolor: 'action.hover'\n            }\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            ...getInputProps()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 820,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              justifyContent: 'center',\n              width: '100%'\n            },\n            children: /*#__PURE__*/_jsxDEV(CloudUpload, {\n              sx: {\n                fontSize: 32,\n                color: 'grey.400',\n                mb: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 822,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 821,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"caption\",\n            color: \"text.secondary\",\n            children: isDragActive ? 'ÌååÏùºÏùÑ ÎÜìÏúºÏÑ∏Ïöî' : 'ÎØ∏ÎîîÏñ¥ ÎìúÎûòÍ∑∏ ÎòêÎäî ÌÅ¥Î¶≠'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 824,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"caption\",\n            color: \"text.secondary\",\n            sx: {\n              display: 'block',\n              mt: 0.5,\n              fontSize: '0.7rem'\n            },\n            children: [\"\\uCD5C\\uB300 \", imageUploadMode === 'single-for-all' ? '40MB' : '10MB']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 827,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 798,\n          columnNumber: 13\n        }, this), isGenerating && /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"info\",\n          sx: {\n            mt: 1\n          },\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(CircularProgress, {\n              size: 16,\n              sx: {\n                mr: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 837,\n              columnNumber: 17\n            }, this), \"\\uC774\\uBBF8\\uC9C0 \\uC0DD\\uC131 \\uC911...\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 836,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 835,\n          columnNumber: 13\n        }, this), generationSuccess && /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"success\",\n          sx: {\n            mt: 1\n          },\n          children: \"\\uC774\\uBBF8\\uC9C0 \\uC0DD\\uC131 \\uC644\\uB8CC!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 844,\n          columnNumber: 13\n        }, this), generationError && /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"error\",\n          sx: {\n            mt: 1\n          },\n          children: \"\\uC774\\uBBF8\\uC9C0 \\uC0DD\\uC131 \\uC2E4\\uD328. \\uB2E4\\uC2DC \\uC2DC\\uB3C4\\uD574\\uC8FC\\uC138\\uC694.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 850,\n          columnNumber: 13\n        }, this), uploadError && /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"error\",\n          sx: {\n            mt: 1\n          },\n          children: uploadError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 856,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 590,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          p: 1.5,\n          pt: 0,\n          display: 'flex',\n          flexDirection: 'column',\n          gap: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          fullWidth: true,\n          variant: \"outlined\",\n          size: \"small\",\n          startIcon: /*#__PURE__*/_jsxDEV(AutoFixHigh, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 868,\n            columnNumber: 24\n          }, this),\n          onClick: () => {\n            console.log('üñ±Ô∏è ÏûêÎèôÏÉùÏÑ± Î≤ÑÌäº ÌÅ¥Î¶≠Îê® - imageIndex:', imageIndex, 'pair:', pair);\n            handleIndividualGenerate(imageIndex, pair, currentCustomPrompt === null || currentCustomPrompt === void 0 ? void 0 : currentCustomPrompt.prompt, currentCustomPrompt === null || currentCustomPrompt === void 0 ? void 0 : currentCustomPrompt.enabled);\n          },\n          disabled: isGenerating,\n          sx: {\n            bgcolor: currentCustomPrompt !== null && currentCustomPrompt !== void 0 && currentCustomPrompt.enabled ? 'rgba(25, 118, 210, 0.08)' : 'transparent',\n            borderColor: currentCustomPrompt !== null && currentCustomPrompt !== void 0 && currentCustomPrompt.enabled ? 'primary.main' : 'grey.300',\n            color: currentCustomPrompt !== null && currentCustomPrompt !== void 0 && currentCustomPrompt.enabled ? 'primary.main' : 'text.primary',\n            '&:hover': {\n              bgcolor: currentCustomPrompt !== null && currentCustomPrompt !== void 0 && currentCustomPrompt.enabled ? 'rgba(25, 118, 210, 0.12)' : 'action.hover'\n            }\n          },\n          children: isGenerating ? 'ÏÉùÏÑ±Ï§ë...' : currentCustomPrompt !== null && currentCustomPrompt !== void 0 && currentCustomPrompt.enabled ? 'Ïª§Ïä§ÌÖÄ ÌîÑÎ°¨ÌîÑÌä∏Î°ú ÏÉùÏÑ±' : 'AI ÏûêÎèôÏÉùÏÑ±'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 864,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          fullWidth: true,\n          variant: \"outlined\",\n          size: \"small\",\n          startIcon: /*#__PURE__*/_jsxDEV(VideoLibrary, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 895,\n            columnNumber: 24\n          }, this),\n          onClick: () => handleOpenBookmarkModal(imageIndex),\n          disabled: isGenerating,\n          sx: {\n            borderColor: 'secondary.main',\n            color: 'secondary.main',\n            '&:hover': {\n              bgcolor: 'rgba(156, 39, 176, 0.08)',\n              borderColor: 'secondary.main'\n            }\n          },\n          children: \"\\uB3D9\\uC601\\uC0C1 \\uBD88\\uB7EC\\uC624\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 891,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 863,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 589,\n      columnNumber: 7\n    }, this);\n  }, \"yd//yJtVY5DqPYzQY0xGsdgoRlk=\", false, function () {\n    return [useDropzone];\n  })), \"yd//yJtVY5DqPYzQY0xGsdgoRlk=\", false, function () {\n    return [useDropzone];\n  });\n  return /*#__PURE__*/_jsxDEV(Box, {\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h6\",\n      gutterBottom: true,\n      sx: {\n        mb: 3\n      },\n      children: \"\\uD14D\\uC2A4\\uD2B8-\\uC774\\uBBF8\\uC9C0 \\uB9E4\\uCE6D \\uAD00\\uB9AC\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 916,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"body2\",\n      color: \"text.secondary\",\n      sx: {\n        mb: 3\n      },\n      children: [\"\\uAC01 \\uD14D\\uC2A4\\uD2B8\\uC5D0 \\uB300\\uC751\\uB418\\uB294 \\uC774\\uBBF8\\uC9C0\\uB97C \\uAC1C\\uBCC4\\uC801\\uC73C\\uB85C \\uAD00\\uB9AC\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4. \\uB4DC\\uB798\\uADF8\\uC564\\uB4DC\\uB86D\\uC73C\\uB85C \\uC774\\uBBF8\\uC9C0\\uB97C \\uC5C5\\uB85C\\uB4DC\\uD558\\uAC70\\uB098 AI\\uB85C \\uC790\\uB3D9 \\uC0DD\\uC131\\uD558\\uC138\\uC694.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 923,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        component: \"span\",\n        variant: \"caption\",\n        color: \"text.secondary\",\n        children: [\"\\uD30C\\uC77C \\uD06C\\uAE30 \\uC81C\\uD55C: \", imageUploadMode === 'single-for-all' ? 'ÏµúÎåÄ 40MB' : 'Í∞Å ÌååÏùº ÏµúÎåÄ 10MB']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 924,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 920,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 2,\n      children: textImagePairs.map((pair, index) => /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        sm: 6,\n        md: 4,\n        children: /*#__PURE__*/_jsxDEV(IndividualDropZone, {\n          imageIndex: pair.imageIndex,\n          pair: pair\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 932,\n          columnNumber: 13\n        }, this)\n      }, `dropzone-${pair.imageIndex}-${pair.textKey}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 931,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 929,\n      columnNumber: 7\n    }, this), textImagePairs.length === 0 && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"info\",\n      sx: {\n        mt: 2\n      },\n      children: \"\\uB300\\uBCF8\\uC744 \\uBA3C\\uC800 \\uC791\\uC131\\uD574\\uC8FC\\uC138\\uC694.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 938,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(VideoBookmarkModal, {\n      open: bookmarkModalOpen,\n      onClose: handleCloseBookmarkModal,\n      onSelect: handleSelectBookmarkVideo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 944,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 915,\n    columnNumber: 5\n  }, this);\n}, \"tJmloEdmlGD+BORffSUVzVJ335Q=\")), \"tJmloEdmlGD+BORffSUVzVJ335Q=\");\n\n// Display name for debugging\n_c2 = TextImagePairManager;\nTextImagePairManager.displayName = 'TextImagePairManager';\nexport default TextImagePairManager;\nvar _c, _c2;\n$RefreshReg$(_c, \"TextImagePairManager$forwardRef\");\n$RefreshReg$(_c2, \"TextImagePairManager\");","map":{"version":3,"names":["React","useState","useCallback","useMemo","memo","useEffect","useRef","useImperativeHandle","forwardRef","Box","Typography","Button","Grid","Card","CardContent","IconButton","Alert","CircularProgress","TextField","FormControlLabel","Switch","Collapse","CloudUpload","Delete","AutoFixHigh","Refresh","Download","ExpandMore","ExpandLess","Movie","MovieIcon","VideoLibrary","useDropzone","VideoBookmarkModal","apiService","jsxDEV","_jsxDEV","TextImagePairManager","_s3","_c","content","imageUploadMode","images","jobId","onChange","ref","_s","$RefreshSig$","_s2","generationStatus","setGenerationStatus","uploadErrors","setUploadErrors","customPrompts","setCustomPrompts","promptsExpanded","setPromptsExpanded","bookmarkModalOpen","setBookmarkModalOpen","currentBookmarkIndex","setCurrentBookmarkIndex","editedTexts","setEditedTexts","imagesRef","current","getEditedData","updateCustomPrompt","imageIndex","prompt","enabled","prev","togglePromptExpanded","handleTextEdit","textIdx","newValue","updated","textImagePairs","bodyTexts","Object","entries","filter","key","value","startsWith","trim","map","index","imageMap","Map","forEach","img","storedIndex","__imageIndex","set","console","log","Array","from","idx","file","name","length","pairs","foundImage","get","customPrompt","originalTexts","push","textIndex","textKey","textContent","image","isGenerating","useCustomPrompt","i","Math","floor","text1","text2","Boolean","edited","allTexts","replace","join","allContent","handleIndividualImageUpload","acceptedFiles","newErrors","maxSize","maxSizeText","size","isImage","type","isVideo","currentImages","newImages","sort","a","b","_imageIndex","_imageIndex2","indexA","indexB","handleIndividualGenerate","pair","requestBody","job_id","custom_prompt","some","t","_pair$originalTexts","text","additional_context","texts","split","response","fetch","method","headers","body","JSON","stringify","ok","errorData","json","Error","detail","data","imageUrl","image_url","imageResponse","blob","fileName","File","setTimeout","newStatus","error","handleRemoveImage","handleDownloadImage","link","document","createElement","href","download","appendChild","click","removeChild","url","URL","createObjectURL","revokeObjectURL","handleOpenBookmarkModal","handleCloseBookmarkModal","handleSelectBookmarkVideo","video","filename","copyBookmarkVideo","status","videoUrl","file_url","videoFilename","videoResponse","message","VideoPreview","setVideoUrl","sx","position","children","src","style","width","aspectRatio","objectFit","borderRadius","autoPlay","muted","loop","playsInline","controls","onError","e","_jsxFileName","lineNumber","columnNumber","top","left","bgcolor","p","display","alignItems","fontSize","color","variant","ml","IndividualDropZone","onDrop","getRootProps","getInputProps","isDragActive","accept","maxFiles","multiple","generationError","generationSuccess","uploadError","isPromptExpanded","currentCustomPrompt","height","flexDirection","flex","gutterBottom","fontWeight","mb","originalText","fullWidth","multiline","rows","target","label","helperText","border","borderColor","lineHeight","justifyContent","onClick","in","control","checked","placeholder","autoComplete","spellCheck","fontStyle","backgroundImage","backgroundSize","backgroundPosition","right","gap","title","disabled","bottom","px","py","borderStyle","textAlign","cursor","mt","severity","mr","pt","startIcon","component","container","spacing","item","xs","sm","md","open","onClose","onSelect","_c2","displayName","$RefreshReg$"],"sources":["/zstus/frontend/src/components/TextImagePairManager.tsx"],"sourcesContent":["import React, { useState, useCallback, useMemo, memo, useEffect, useRef, useImperativeHandle, forwardRef } from 'react';\nimport {\n  Box,\n  Paper,\n  Typography,\n  Button,\n  Grid,\n  Card,\n  CardContent,\n  IconButton,\n  Chip,\n  Alert,\n  CircularProgress,\n  TextField,\n  FormControlLabel,\n  Switch,\n  Collapse,\n} from '@mui/material';\nimport {\n  CloudUpload,\n  Delete,\n  AutoFixHigh,\n  Refresh,\n  Image as ImageIcon,\n  Download,\n  Edit as EditIcon,\n  ExpandMore,\n  ExpandLess,\n  Movie as MovieIcon,\n  Warning,\n  VideoLibrary\n} from '@mui/icons-material';\nimport { useDropzone } from 'react-dropzone';\nimport { ReelsContent, ImageUploadMode, TextImagePair, CustomPrompt, BookmarkVideo } from '../types';\nimport VideoBookmarkModal from './VideoBookmarkModal';\nimport apiService from '../services/api';\n\ninterface TextImagePairManagerProps {\n  content: ReelsContent;\n  imageUploadMode: ImageUploadMode;\n  images: File[];\n  jobId: string;\n  onChange: (images: File[], mode: ImageUploadMode) => void;\n}\n\n// ‚úÖ refÎ•º ÌÜµÌï¥ Ïô∏Î∂ÄÏóêÏÑú Ï†ëÍ∑º Í∞ÄÎä•Ìïú Î©îÏÑúÎìú ÌÉÄÏûÖ Ï†ïÏùò\nexport interface TextImagePairManagerRef {\n  getEditedData: () => {\n    editedTexts: { [key: number]: string[] };\n    customPrompts: { [key: number]: CustomPrompt };\n  };\n}\n\nconst TextImagePairManager = forwardRef<TextImagePairManagerRef, TextImagePairManagerProps>(({\n  content,\n  imageUploadMode,\n  images,\n  jobId,\n  onChange,\n}, ref) => {\n  const [generationStatus, setGenerationStatus] = useState<{ [key: string]: string }>({});\n  const [uploadErrors, setUploadErrors] = useState<{ [key: number]: string }>({});\n  const [customPrompts, setCustomPrompts] = useState<{ [key: number]: CustomPrompt }>({});\n  const [promptsExpanded, setPromptsExpanded] = useState<{ [key: number]: boolean }>({});\n  const [bookmarkModalOpen, setBookmarkModalOpen] = useState<boolean>(false);\n  const [currentBookmarkIndex, setCurrentBookmarkIndex] = useState<number | null>(null);\n  // ÏàòÏ†ïÎêú ÌÖçÏä§Ìä∏ Í¥ÄÎ¶¨ (imageIndex ‚Üí ÌÖçÏä§Ìä∏ Î∞∞Ïó¥)\n  const [editedTexts, setEditedTexts] = useState<{ [key: number]: string[] }>({});\n\n  // ÏµúÏã† images ÏÉÅÌÉúÎ•º Ï∂îÏ†ÅÌïòÍ∏∞ ÏúÑÌïú ref\n  const imagesRef = useRef<File[]>(images);\n\n  // images propÏù¥ Î≥ÄÍ≤ΩÎê† ÎïåÎßàÎã§ ref ÏóÖÎç∞Ïù¥Ìä∏\n  useEffect(() => {\n    imagesRef.current = images;\n  }, [images]);\n\n  // ‚úÖ ÏòÅÏÉÅ ÏÉùÏÑ± ÏãúÏ†êÏóêÎßå Îç∞Ïù¥ÌÑ∞Î•º ÏàòÏßëÌïòÎØÄÎ°ú Ïã§ÏãúÍ∞Ñ Ï†ÑÎã¨ Î∂àÌïÑÏöî\n\n  // ‚úÖ refÎ•º ÌÜµÌï¥ Ïô∏Î∂ÄÏóêÏÑú Îç∞Ïù¥ÌÑ∞Î•º Í∞ÄÏ†∏Í∞à Ïàò ÏûàÎèÑÎ°ù Î©îÏÑúÎìú Ï†úÍ≥µ\n  useImperativeHandle(ref, () => ({\n    getEditedData: () => ({\n      editedTexts,\n      customPrompts\n    })\n  }), [editedTexts, customPrompts]);\n\n  // ‚úÖ Ïã¨ÌîåÌïú Ïª§Ïä§ÌÖÄ ÌîÑÎ°¨ÌîÑÌä∏ ÏóÖÎç∞Ïù¥Ìä∏ (useCallback Ï†úÍ±∞)\n  const updateCustomPrompt = (imageIndex: number, prompt: string, enabled: boolean) => {\n    setCustomPrompts(prev => ({\n      ...prev,\n      [imageIndex]: { imageIndex, prompt, enabled }\n    }));\n  };\n\n  const togglePromptExpanded = (imageIndex: number) => {\n    setPromptsExpanded(prev => ({\n      ...prev,\n      [imageIndex]: !prev[imageIndex]\n    }));\n  };\n\n  // ‚úÖ Ïã¨ÌîåÌïú ÌÖçÏä§Ìä∏ ÏàòÏ†ï Ìï∏Îì§Îü¨ (useCallback Ï†úÍ±∞)\n  const handleTextEdit = (imageIndex: number, textIdx: number, newValue: string) => {\n    setEditedTexts(prev => {\n      const current = prev[imageIndex] || [];\n      const updated = [...current];\n      updated[textIdx] = newValue;\n      return { ...prev, [imageIndex]: updated };\n    });\n  };\n\n  // ÌÖçÏä§Ìä∏-Ïù¥ÎØ∏ÏßÄ Ïåç Îç∞Ïù¥ÌÑ∞ ÏÉùÏÑ± (useMemoÎ°ú ÏµúÏ†ÅÌôî)\n  const textImagePairs = useMemo((): (TextImagePair & { imageIndex: number })[] => {\n    const bodyTexts = Object.entries(content)\n      .filter(([key, value]) => key.startsWith('body') && value?.trim())\n      .map(([key, value], index) => ({ key, value: value.trim(), index }));\n\n    // ÏúÑÏπò Ï†ïÎ≥¥Î•º Í∞ÄÏßÑ Ïù¥ÎØ∏ÏßÄÎì§ÏùÑ ÎßµÏúºÎ°ú ÏÉùÏÑ±\n    const imageMap = new Map<number, File>();\n    images.forEach(img => {\n      const storedIndex = (img as any).__imageIndex;\n      if (typeof storedIndex === 'number') {\n        imageMap.set(storedIndex, img);\n      }\n    });\n\n    console.log('üó∫Ô∏è createTextImagePairs - imageMap:', Array.from(imageMap.entries()).map(([idx, file]) => `${idx}:${file.name}`));\n    console.log('üìù bodyTexts Í∏∏Ïù¥:', bodyTexts.length, 'imageUploadMode:', imageUploadMode);\n    console.log('üîç Î∞õÏùÄ images Î∞∞Ïó¥:', images.map(img => `${img.name}(__imageIndex:${(img as any).__imageIndex})`));\n\n    const pairs: (TextImagePair & { imageIndex: number })[] = [];\n\n    if (imageUploadMode === 'per-script') {\n      // ÌÖçÏä§Ìä∏ 1Í∞úÎãπ Ïù¥ÎØ∏ÏßÄ 1Í∞ú\n      bodyTexts.forEach(({ key, value, index }) => {\n        const foundImage = imageMap.get(index);\n        const customPrompt = customPrompts[index];\n\n        // ÏõêÎ≥∏ ÌÖçÏä§Ìä∏ Î∞∞Ïó¥ (per-scriptÎäî 1Í∞ú)\n        const originalTexts = [value];\n\n        console.log(`üìã per-script: textIndex=${index}, imageIndex=${index}, foundImage=${foundImage?.name || 'null'}`);\n        pairs.push({\n          textIndex: index,\n          textKey: key,\n          textContent: value,\n          image: foundImage || null,\n          imageIndex: index,\n          isGenerating: false,\n          customPrompt: customPrompt?.prompt || '',\n          useCustomPrompt: customPrompt?.enabled || false,\n          originalTexts: originalTexts, // Ï∂îÍ∞Ä\n          editedTexts: editedTexts[index] || originalTexts, // Ï∂îÍ∞Ä\n        });\n      });\n    } else if (imageUploadMode === 'per-two-scripts') {\n      // ÌÖçÏä§Ìä∏ 2Í∞úÎãπ Ïù¥ÎØ∏ÏßÄ 1Í∞ú\n      for (let i = 0; i < bodyTexts.length; i += 2) {\n        const imageIndex = Math.floor(i / 2);\n        const text1 = bodyTexts[i];\n        const text2 = bodyTexts[i + 1];\n\n        if (text1) {\n          const foundImage = imageMap.get(imageIndex);\n          const customPrompt = customPrompts[imageIndex];\n\n          // ÏõêÎ≥∏ ÌÖçÏä§Ìä∏ Î∞∞Ïó¥\n          const originalTexts = [text1.value, text2?.value].filter(Boolean) as string[];\n          // ÏàòÏ†ïÎêú ÌÖçÏä§Ìä∏ Î∞∞Ïó¥ (ÏóÜÏúºÎ©¥ ÏõêÎ≥∏ ÏÇ¨Ïö©)\n          const edited = editedTexts[imageIndex] || originalTexts;\n\n          console.log(`üìã per-two-scripts: textIndex=${i}, imageIndex=${imageIndex}, foundImage=${foundImage?.name || 'null'}`);\n          pairs.push({\n            textIndex: i,\n            textKey: `${text1.key}${text2 ? `+${text2.key}` : ''}`,\n            textContent: `${text1.value}${text2 ? ` / ${text2.value}` : ''}`,\n            image: foundImage || null,\n            imageIndex: imageIndex, // Ïã§Ï†ú Ïù¥ÎØ∏ÏßÄ Ïù∏Îç±Ïä§ Ï†ÄÏû•\n            isGenerating: false,\n            customPrompt: customPrompt?.prompt || '',\n            useCustomPrompt: customPrompt?.enabled || false,\n            editedTexts: edited,\n            originalTexts: originalTexts,\n          });\n        }\n      }\n    } else if (imageUploadMode === 'single-for-all') {\n      // Î™®Îì† ÌÖçÏä§Ìä∏Ïóê Ïù¥ÎØ∏ÏßÄ 1Í∞ú\n      const allTexts = bodyTexts.map(({ key, value }) => key.replace('body', 'ÎåÄÏÇ¨')).join(' + ');\n      const allContent = bodyTexts.map(({ value }) => value).join(' / ');\n      const foundImage = imageMap.get(0);\n      const customPrompt = customPrompts[0];\n\n      // ÏõêÎ≥∏ ÌÖçÏä§Ìä∏ Î∞∞Ïó¥ (Î™®Îì† ÎåÄÏÇ¨)\n      const originalTexts = bodyTexts.map(({ value }) => value);\n\n      console.log(`üìã single-for-all: Î™®Îì† ÎåÄÏÇ¨, imageIndex=0, foundImage=${foundImage?.name || 'null'}`);\n      pairs.push({\n        textIndex: 0,\n        textKey: allTexts,\n        textContent: allContent,\n        image: foundImage || null,\n        imageIndex: 0,\n        isGenerating: false,\n        customPrompt: customPrompt?.prompt || '',\n        useCustomPrompt: customPrompt?.enabled || false,\n        originalTexts: originalTexts, // Ï∂îÍ∞Ä\n        editedTexts: editedTexts[0] || originalTexts, // Ï∂îÍ∞Ä\n      });\n    }\n\n    console.log('üéØ ÏµúÏ¢Ö pairs Í∞úÏàò:', pairs.length);\n    return pairs;\n  }, [content, images, imageUploadMode, customPrompts]);\n  \n  // ÌòÑÏû¨ images Î∞∞Ïó¥ ÏÉÅÌÉú Î°úÍπÖ\n  console.log('üì¶ ÌòÑÏû¨ images Î∞∞Ïó¥ Í∏∏Ïù¥:', images.length);\n  console.log('üì¶ ÌòÑÏû¨ images Î∞∞Ïó¥:', images.length > 0 ? images.map(img => `${img.name}(index:${(img as any).__imageIndex})`) : 'Îπà Î∞∞Ïó¥');\n  console.log('üéÆ generationStatus:', generationStatus);\n\n  // Í∞úÎ≥Ñ Ïù¥ÎØ∏ÏßÄ ÏóÖÎ°úÎìú Ìï∏Îì§Îü¨\n  const handleIndividualImageUpload = useCallback((imageIndex: number, acceptedFiles: File[]) => {\n    if (acceptedFiles.length === 0) return;\n\n    const file = acceptedFiles[0];\n\n    // Í∏∞Ï°¥ ÏóêÎü¨ ÏÉÅÌÉú Ï†úÍ±∞\n    setUploadErrors(prev => {\n      const newErrors = { ...prev };\n      delete newErrors[imageIndex];\n      return newErrors;\n    });\n\n    // ÌååÏùº Ïú†Ìö®ÏÑ± Í≤ÄÏ¶ù (Î™®ÎìúÏóê Îî∞Îùº Îã§Î•∏ Ï†úÌïú)\n    const maxSize = imageUploadMode === 'single-for-all' ? 80 * 1024 * 1024 : 40 * 1024 * 1024;\n    const maxSizeText = imageUploadMode === 'single-for-all' ? '80MB' : '40MB';\n\n    if (file.size > maxSize) {\n      setUploadErrors(prev => ({ ...prev, [imageIndex]: `ÌååÏùº ÌÅ¨Í∏∞Í∞Ä ${maxSizeText}Î•º Ï¥àÍ≥ºÌï©ÎãàÎã§` }));\n      return;\n    }\n\n    const isImage = file.type.startsWith('image/');\n    const isVideo = file.type.startsWith('video/');\n\n    if (!isImage && !isVideo) {\n      setUploadErrors(prev => ({ ...prev, [imageIndex]: 'Ïù¥ÎØ∏ÏßÄ ÎòêÎäî ÎπÑÎîîÏò§ ÌååÏùºÎßå ÏóÖÎ°úÎìú Í∞ÄÎä•Ìï©ÎãàÎã§' }));\n      return;\n    }\n\n    console.log('üîß handleIndividualImageUpload - imageIndex:', imageIndex, 'fileName:', file.name);\n\n    // ÌååÏùºÏóê ÏúÑÏπò Ï†ïÎ≥¥ Ï∂îÍ∞Ä\n    (file as any).__imageIndex = imageIndex;\n    console.log('üè∑Ô∏è ÌååÏùºÏóê __imageIndex ÏÑ§Ï†ï:', imageIndex);\n\n    // ÏµúÏã† images ÏÉÅÌÉúÎ•º Í∞ÄÏ†∏ÏôÄÏÑú ÏóÖÎç∞Ïù¥Ìä∏\n    const currentImages = imagesRef.current;\n    console.log('üîÑ ÏóÖÎç∞Ïù¥Ìä∏ Ï†Ñ currentImages (ref):', currentImages.map(img => `${img.name}(index:${(img as any).__imageIndex})`));\n\n    // ÌòÑÏû¨ imagesÏóêÏÑú Ìï¥Îãπ imageIndexÎ•º Í∞ÄÏßÑ ÌååÏùº Ï†úÍ±∞ÌïòÍ≥† ÏÉà ÌååÏùº Ï∂îÍ∞Ä\n    const newImages = currentImages.filter(img => (img as any).__imageIndex !== imageIndex);\n    newImages.push(file);\n\n    // imageIndex ÏàúÏúºÎ°ú Ï†ïÎ†¨\n    newImages.sort((a, b) => {\n      const indexA = (a as any).__imageIndex ?? 0;\n      const indexB = (b as any).__imageIndex ?? 0;\n      return indexA - indexB;\n    });\n\n    console.log('üìä ÏóÖÎç∞Ïù¥Ìä∏Îêú images Î∞∞Ïó¥:', newImages.map(img => `${img.name}(index:${(img as any).__imageIndex})`));\n\n    onChange(newImages, imageUploadMode);\n  }, [imageUploadMode, onChange]); // images ÏùòÏ°¥ÏÑ± Ï†úÍ±∞\n\n  // Í∞úÎ≥Ñ Ïù¥ÎØ∏ÏßÄ ÏûêÎèô ÏÉùÏÑ±\n  const handleIndividualGenerate = async (imageIndex: number, pair: TextImagePair & { imageIndex: number }, customPrompt?: string, useCustomPrompt?: boolean) => {\n    console.log('ü§ñ handleIndividualGenerate ÏãúÏûë - imageIndex:', imageIndex, 'pair:', pair, 'customPrompt:', customPrompt, 'useCustomPrompt:', useCustomPrompt);\n    setGenerationStatus(prev => ({ ...prev, [imageIndex]: 'generating' }));\n\n    try {\n      // ÏöîÏ≤≠ Î∞îÎîî Íµ¨ÏÑ±\n      let requestBody: any = {\n        job_id: jobId  // Job ID Ï∂îÍ∞Ä\n      };\n\n      // üéØ Ïö∞ÏÑ†ÏàúÏúÑ 1: Ïª§Ïä§ÌÖÄ ÌîÑÎ°¨ÌîÑÌä∏\n      if (useCustomPrompt && customPrompt?.trim()) {\n        requestBody.custom_prompt = customPrompt.trim();\n        console.log('üìù [Ïö∞ÏÑ†ÏàúÏúÑ 1] Ïª§Ïä§ÌÖÄ ÌîÑÎ°¨ÌîÑÌä∏ ÏÇ¨Ïö©:', customPrompt.trim());\n      }\n      // üéØ Ïö∞ÏÑ†ÏàúÏúÑ 2: ÏàòÏ†ïÎêú ÌÖçÏä§Ìä∏ (per-two-scripts Î™®Îìú)\n      else if (pair.editedTexts && pair.originalTexts &&\n               pair.editedTexts.some((t, idx) => t !== pair.originalTexts?.[idx])) {\n        requestBody.text = pair.editedTexts[0];\n        if (pair.editedTexts[1]) {\n          requestBody.additional_context = pair.editedTexts[1];\n        }\n        console.log('üìù [Ïö∞ÏÑ†ÏàúÏúÑ 2] ÏàòÏ†ïÎêú ÌÖçÏä§Ìä∏ ÏÇ¨Ïö©:', pair.editedTexts[0]);\n      }\n      // üéØ Ïö∞ÏÑ†ÏàúÏúÑ 3: ÏõêÎ≥∏ ÌÖçÏä§Ìä∏\n      else {\n        const texts = pair.textContent.split(' / ');\n        requestBody.text = texts[0];\n        if (texts.length > 1) {\n          requestBody.additional_context = texts[1];\n        }\n        console.log('üìù [Ïö∞ÏÑ†ÏàúÏúÑ 3] ÏõêÎ≥∏ ÌÖçÏä§Ìä∏ ÏÇ¨Ïö©:', texts[0]);\n      }\n\n      console.log('üöÄ ÏöîÏ≤≠ Î∞îÎîî (Job ID Ìè¨Ìï®):', requestBody);\n\n      const response = await fetch('/generate-single-image', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(requestBody),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.detail || 'Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ±Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§');\n      }\n\n      const data = await response.json();\n      const imageUrl = data.image_url;\n\n      // ÏÉùÏÑ±Îêú Ïù¥ÎØ∏ÏßÄÎ•º Îã§Ïö¥Î°úÎìúÌïòÍ≥† File Í∞ùÏ≤¥Î°ú Î≥ÄÌôò\n      const imageResponse = await fetch(imageUrl);\n      if (!imageResponse.ok) {\n        throw new Error('ÏÉùÏÑ±Îêú Ïù¥ÎØ∏ÏßÄ Îã§Ïö¥Î°úÎìúÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§');\n      }\n\n      const blob = await imageResponse.blob();\n      const fileName = `generated_image_pair_${imageIndex}.png`;\n      const file = new File([blob], fileName, { type: 'image/png' });\n\n      console.log('üì∏ Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ± ÏôÑÎ£å - fileName:', fileName, 'Ìò∏Ï∂úÌï† imageIndex:', imageIndex);\n\n      // Ïù¥ÎØ∏ÏßÄ Î∞∞Ïó¥ ÏóÖÎç∞Ïù¥Ìä∏\n      handleIndividualImageUpload(imageIndex, [file]);\n      \n      setGenerationStatus(prev => ({ ...prev, [imageIndex]: 'success' }));\n      setTimeout(() => {\n        setGenerationStatus(prev => {\n          const newStatus = { ...prev };\n          delete newStatus[imageIndex];\n          return newStatus;\n        });\n      }, 3000);\n\n    } catch (error) {\n      console.error('Í∞úÎ≥Ñ Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ± Ïò§Î•ò:', error);\n      setGenerationStatus(prev => ({ ...prev, [imageIndex]: 'error' }));\n      setTimeout(() => {\n        setGenerationStatus(prev => {\n          const newStatus = { ...prev };\n          delete newStatus[imageIndex];\n          return newStatus;\n        });\n      }, 5000);\n    }\n  };\n\n  // Í∞úÎ≥Ñ Ïù¥ÎØ∏ÏßÄ ÏÇ≠Ï†ú (Í∞úÏÑ†Îê®)\n  const handleRemoveImage = (imageIndex: number) => {\n    console.log('üóëÔ∏è Ïù¥ÎØ∏ÏßÄ ÏÇ≠Ï†ú ÏöîÏ≤≠ - imageIndex:', imageIndex);\n\n    // ÏµúÏã† images ÏÉÅÌÉúÎ•º Í∞ÄÏ†∏ÏôÄÏÑú ÏÇ≠Ï†ú\n    const currentImages = imagesRef.current;\n    const newImages = currentImages.filter(img => (img as any).__imageIndex !== imageIndex);\n    \n    // Ìï¥Îãπ Ïù∏Îç±Ïä§Ïùò ÏóêÎü¨ ÏÉÅÌÉúÎèÑ Ìï®Íªò Ï†úÍ±∞\n    setUploadErrors(prev => {\n      const newErrors = { ...prev };\n      delete newErrors[imageIndex];\n      return newErrors;\n    });\n    \n    // ÏÉùÏÑ± ÏÉÅÌÉúÎèÑ Ìï®Íªò Ï†úÍ±∞\n    setGenerationStatus(prev => {\n      const newStatus = { ...prev };\n      delete newStatus[imageIndex];\n      return newStatus;\n    });\n    \n    console.log('‚úÖ Ïù¥ÎØ∏ÏßÄ ÏÇ≠Ï†ú ÏôÑÎ£å - imageIndex:', imageIndex);\n    console.log('üìä ÎÇ®ÏùÄ Ïù¥ÎØ∏ÏßÄ:', newImages.map(img => `${img.name}(index:${(img as any).__imageIndex})`));\n    \n    onChange(newImages, imageUploadMode);\n  };\n\n  // Í∞úÎ≥Ñ Ïù¥ÎØ∏ÏßÄ Îã§Ïö¥Î°úÎìú\n  const handleDownloadImage = async (imageIndex: number, image: File) => {\n    try {\n      // ÏÉùÏÑ±Îêú Ïù¥ÎØ∏ÏßÄÏù∏ÏßÄ ÌôïÏù∏ (filenameÏúºÎ°ú ÌåêÎã®)\n      if (image.name.startsWith('generated_')) {\n        // Î∞±ÏóîÎìú Îã§Ïö¥Î°úÎìú APIÎ•º ÌÜµÌï¥ Îã§Ïö¥Î°úÎìú\n        const link = document.createElement('a');\n        link.href = `/download-image/${image.name}`;\n        link.download = `reels_image_${imageIndex + 1}.png`;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n      } else {\n        // ÏóÖÎ°úÎìúÎêú ÌååÏùºÏùÄ ÏßÅÏ†ë Îã§Ïö¥Î°úÎìú\n        const url = URL.createObjectURL(image);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `reels_image_${imageIndex + 1}_${image.name}`;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        URL.revokeObjectURL(url);\n      }\n      console.log('üíæ Ïù¥ÎØ∏ÏßÄ Îã§Ïö¥Î°úÎìú ÏôÑÎ£å - imageIndex:', imageIndex, 'fileName:', image.name);\n    } catch (error) {\n      console.error('Ïù¥ÎØ∏ÏßÄ Îã§Ïö¥Î°úÎìú Ïò§Î•ò:', error);\n    }\n  };\n\n  // Î∂ÅÎßàÌÅ¨ Î™®Îã¨ Ïó¥Í∏∞\n  const handleOpenBookmarkModal = (imageIndex: number) => {\n    console.log('üé¨ Î∂ÅÎßàÌÅ¨ Î™®Îã¨ Ïó¥Í∏∞ - imageIndex:', imageIndex);\n    setCurrentBookmarkIndex(imageIndex);\n    setBookmarkModalOpen(true);\n  };\n\n  // Î∂ÅÎßàÌÅ¨ Î™®Îã¨ Îã´Í∏∞\n  const handleCloseBookmarkModal = () => {\n    setBookmarkModalOpen(false);\n    setCurrentBookmarkIndex(null);\n  };\n\n  // Î∂ÅÎßàÌÅ¨ ÎπÑÎîîÏò§ ÏÑ†ÌÉù Ìï∏Îì§Îü¨\n  const handleSelectBookmarkVideo = async (video: BookmarkVideo) => {\n    if (currentBookmarkIndex === null) return;\n\n    console.log('‚úÖ Î∂ÅÎßàÌÅ¨ ÎπÑÎîîÏò§ ÏÑ†ÌÉù:', video.filename, 'imageIndex:', currentBookmarkIndex);\n\n    try {\n      // ÏÉùÏÑ± ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏\n      setGenerationStatus(prev => ({ ...prev, [currentBookmarkIndex]: 'generating' }));\n\n      // Î∞±ÏóîÎìú API Ìò∏Ï∂ú: Î∂ÅÎßàÌÅ¨ ÎπÑÎîîÏò§Î•º Job Ìè¥ÎçîÎ°ú Î≥µÏÇ¨\n      const response = await apiService.copyBookmarkVideo(\n        jobId,\n        video.filename,\n        currentBookmarkIndex\n      );\n\n      if (response.status === 'success') {\n        // Î≥µÏÇ¨Îêú ÎπÑÎîîÏò§ ÌååÏùºÏùÑ File Í∞ùÏ≤¥Î°ú Î≥ÄÌôòÌïòÏó¨ Ïù¥ÎØ∏ÏßÄ Î∞∞Ïó¥Ïóê Ï∂îÍ∞Ä\n        const videoUrl = response.data.file_url;\n        const videoFilename = response.data.filename;\n\n        // ÎπÑÎîîÏò§ ÌååÏùºÏùÑ FetchÎ°ú Í∞ÄÏ†∏ÏôÄÏÑú File Í∞ùÏ≤¥ ÏÉùÏÑ±\n        const videoResponse = await fetch(videoUrl);\n        if (!videoResponse.ok) {\n          throw new Error('ÎπÑÎîîÏò§ ÌååÏùº Îã§Ïö¥Î°úÎìúÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§');\n        }\n\n        const blob = await videoResponse.blob();\n        const file = new File([blob], videoFilename, { type: 'video/mp4' });\n\n        console.log('üì∏ Î∂ÅÎßàÌÅ¨ ÎπÑÎîîÏò§ ÌååÏùº ÏÉùÏÑ± ÏôÑÎ£å - fileName:', videoFilename, 'imageIndex:', currentBookmarkIndex);\n\n        // Ïù¥ÎØ∏ÏßÄ Î∞∞Ïó¥ ÏóÖÎç∞Ïù¥Ìä∏\n        handleIndividualImageUpload(currentBookmarkIndex, [file]);\n\n        setGenerationStatus(prev => ({ ...prev, [currentBookmarkIndex]: 'success' }));\n        setTimeout(() => {\n          setGenerationStatus(prev => {\n            const newStatus = { ...prev };\n            delete newStatus[currentBookmarkIndex];\n            return newStatus;\n          });\n        }, 3000);\n\n        console.log('‚úÖ Î∂ÅÎßàÌÅ¨ ÎπÑÎîîÏò§ Î≥µÏÇ¨ Î∞è ÏóÖÎ°úÎìú ÏôÑÎ£å');\n      }\n    } catch (error: any) {\n      console.error('‚ùå Î∂ÅÎßàÌÅ¨ ÎπÑÎîîÏò§ ÏÑ†ÌÉù Ïò§Î•ò:', error);\n      setGenerationStatus(prev => ({ ...prev, [currentBookmarkIndex]: 'error' }));\n      setUploadErrors(prev => ({ ...prev, [currentBookmarkIndex]: error.message || 'Î∂ÅÎßàÌÅ¨ ÎπÑÎîîÏò§ Î∂àÎü¨Ïò§Í∏∞ Ïã§Ìå®' }));\n\n      setTimeout(() => {\n        setGenerationStatus(prev => {\n          const newStatus = { ...prev };\n          delete newStatus[currentBookmarkIndex];\n          return newStatus;\n        });\n      }, 5000);\n    }\n  };\n\n  // ÎπÑÎîîÏò§ ÎØ∏Î¶¨Î≥¥Í∏∞ Ïª¥Ìè¨ÎÑåÌä∏ (Î∏åÎùºÏö∞Ï†Ä ÏßÅÏ†ë Ïû¨ÏÉù)\n  const VideoPreview: React.FC<{ file: File }> = memo(({ file }) => {\n    const [videoUrl, setVideoUrl] = useState<string | null>(null);\n\n    useEffect(() => {\n      // Î∏åÎùºÏö∞Ï†ÄÏóêÏÑú ÏßÅÏ†ë Ïû¨ÏÉùÌï† Ïàò ÏûàÎèÑÎ°ù URL ÏÉùÏÑ±\n      const url = URL.createObjectURL(file);\n      setVideoUrl(url);\n\n      return () => {\n        if (url) {\n          URL.revokeObjectURL(url);\n        }\n      };\n    }, [file]);\n\n    return (\n      <Box sx={{ position: 'relative' }}>\n        {videoUrl && (\n          <video\n            src={videoUrl}\n            style={{\n              width: '100%',\n              aspectRatio: '1/1',\n              objectFit: 'cover',\n              borderRadius: '8px'\n            }}\n            autoPlay\n            muted\n            loop\n            playsInline\n            controls={false}\n            onError={(e) => {\n              console.error('ÎπÑÎîîÏò§ Ïû¨ÏÉù Ïò§Î•ò:', e);\n            }}\n          />\n        )}\n\n        {/* ÎπÑÎîîÏò§ ÏïÑÏù¥ÏΩò Ïò§Î≤ÑÎ†àÏù¥ */}\n        <Box\n          sx={{\n            position: 'absolute',\n            top: 8,\n            left: 8,\n            bgcolor: 'rgba(0,0,0,0.7)',\n            borderRadius: 1,\n            p: 0.5,\n            display: 'flex',\n            alignItems: 'center'\n          }}\n        >\n          <MovieIcon sx={{ fontSize: 16, color: 'white' }} />\n          <Typography variant=\"caption\" color=\"white\" sx={{ ml: 0.5 }}>\n            ÏòÅÏÉÅ\n          </Typography>\n        </Box>\n      </Box>\n    );\n  });\n\n  // Í∞úÎ≥Ñ ÎìúÎûòÍ∑∏Ïï§ÎìúÎ°≠ Ïª¥Ìè¨ÎÑåÌä∏ (React.memoÎ°ú ÏµúÏ†ÅÌôî)\n  const IndividualDropZone: React.FC<{\n    imageIndex: number;\n    pair: TextImagePair & { imageIndex: number };\n  }> = memo(({ imageIndex, pair }) => {\n    const onDrop = useCallback((acceptedFiles: File[]) => {\n      handleIndividualImageUpload(imageIndex, acceptedFiles);\n    }, [imageIndex]);\n\n    const { getRootProps, getInputProps, isDragActive } = useDropzone({\n      onDrop,\n      accept: {\n        'image/*': ['.jpeg', '.jpg', '.png', '.gif', '.webp', '.bmp'],\n        'video/*': ['.mp4', '.mov', '.avi', '.webm', '.mkv']\n      },\n      maxFiles: 1,\n      multiple: false\n    });\n\n    const isGenerating = generationStatus[imageIndex] === 'generating';\n    const generationError = generationStatus[imageIndex] === 'error';\n    const generationSuccess = generationStatus[imageIndex] === 'success';\n    const uploadError = uploadErrors[imageIndex];\n    const isPromptExpanded = promptsExpanded[imageIndex] || false;\n    const currentCustomPrompt = customPrompts[imageIndex];\n\n    // ‚úÖ Ïã¨ÌîåÌïú Ïª§Ïä§ÌÖÄ ÌîÑÎ°¨ÌîÑÌä∏ Ìï∏Îì§Îü¨ (Î≥µÏû°Ìïú Î°úÏª¨ ÏÉÅÌÉú/ÎîîÎ∞îÏö¥Ïä§ Ï†úÍ±∞)\n\n    return (\n      <Card sx={{ height: '100%', display: 'flex', flexDirection: 'column' }}>\n        <CardContent sx={{ flex: 1 }}>\n          {/* ÌÖçÏä§Ìä∏ ÌëúÏãú */}\n          <Typography variant=\"h6\" gutterBottom sx={{\n            fontSize: '0.9rem',\n            fontWeight: 600,\n            color: 'primary.main',\n            mb: 2\n          }}>\n            {pair.textKey.replace('body', 'ÎåÄÏÇ¨ ').replace('+body', ' + ÎåÄÏÇ¨ ')}\n          </Typography>\n\n          {/* Î™®Îì† Î™®Îìú: Í∞úÎ≥Ñ ÌÖçÏä§Ìä∏Î∞ïÏä§ */}\n          {pair.originalTexts ? (\n            <Box sx={{ mb: 2 }}>\n              {pair.originalTexts.map((originalText, idx) => (\n                <TextField\n                  key={`text-${imageIndex}-${idx}`}\n                  fullWidth\n                  multiline\n                  rows={2}\n                  value={(editedTexts[imageIndex] || pair.originalTexts)[idx] || originalText}\n                  onChange={(e) => handleTextEdit(imageIndex, idx, e.target.value)}\n                  label={imageUploadMode === 'per-two-scripts' ? `ÎåÄÏÇ¨ ${pair.textIndex + idx + 1}` :\n                         imageUploadMode === 'per-script' ? `ÎåÄÏÇ¨ ${pair.textIndex + 1}` :\n                         `ÎåÄÏÇ¨ ${idx + 1}`}\n                  variant=\"outlined\"\n                  size=\"small\"\n                  sx={{ mb: 1 }}\n                  helperText={idx === 0 ? \"ÏàòÏ†ïÎêú ÌÖçÏä§Ìä∏Îäî ÏòÅÏÉÅ ÏÉùÏÑ± Ïãú ÏÇ¨Ïö©Îê©ÎãàÎã§\" : \"\"}\n                />\n              ))}\n            </Box>\n          ) : (\n            <Typography variant=\"body2\" sx={{\n              mb: 2,\n              p: 1.5,\n              bgcolor: 'grey.50',\n              borderRadius: 1,\n              border: '1px solid',\n              borderColor: 'grey.200',\n              fontSize: '0.8rem',\n              lineHeight: 1.4\n            }}>\n              {pair.textContent}\n            </Typography>\n          )}\n\n          {/* Ïª§Ïä§ÌÖÄ ÌîÑÎ°¨ÌîÑÌä∏ ÏÑπÏÖò */}\n          <Box sx={{ mb: 2 }}>\n            <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 1 }}>\n              <Typography variant=\"caption\" color=\"text.secondary\" sx={{ fontWeight: 600 }}>\n                AI ÏÉùÏÑ± ÏòµÏÖò\n              </Typography>\n              <IconButton\n                size=\"small\"\n                onClick={() => togglePromptExpanded(imageIndex)}\n                sx={{ p: 0.5 }}\n              >\n                {isPromptExpanded ? <ExpandLess fontSize=\"small\" /> : <ExpandMore fontSize=\"small\" />}\n              </IconButton>\n            </Box>\n\n            <Collapse in={isPromptExpanded}>\n              <Box sx={{ bgcolor: 'rgba(25, 118, 210, 0.04)', p: 1.5, borderRadius: 1, border: '1px solid rgba(25, 118, 210, 0.12)' }}>\n                <FormControlLabel\n                  control={\n                    <Switch\n                      checked={currentCustomPrompt?.enabled || false}\n                      onChange={(e) => {\n                        updateCustomPrompt(\n                          imageIndex,\n                          currentCustomPrompt?.prompt || '',\n                          e.target.checked\n                        );\n                      }}\n                      size=\"small\"\n                    />\n                  }\n                  label={\n                    <Typography variant=\"caption\" sx={{ fontWeight: 500 }}>\n                      Ïª§Ïä§ÌÖÄ ÌîÑÎ°¨ÌîÑÌä∏ ÏÇ¨Ïö©\n                    </Typography>\n                  }\n                  sx={{ mb: 1, ml: 0 }}\n                />\n\n                {currentCustomPrompt?.enabled && (\n                  <TextField\n                    key={`prompt-${imageIndex}`}\n                    fullWidth\n                    multiline\n                    rows={2}\n                    size=\"small\"\n                    placeholder=\"Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ±ÏùÑ ÏúÑÌïú Ïª§Ïä§ÌÖÄ ÌîÑÎ°¨ÌîÑÌä∏Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî...\"\n                    value={currentCustomPrompt?.prompt || ''}\n                    onChange={(e) => {\n                      updateCustomPrompt(imageIndex, e.target.value, true);\n                    }}\n                    variant=\"outlined\"\n                    sx={{\n                      '& .MuiOutlinedInput-root': {\n                        fontSize: '0.75rem',\n                        bgcolor: 'white'\n                      }\n                    }}\n                    helperText=\"Ïã§Ï†ú ÏòÅÏÉÅÏóêÏÑúÎäî Í∏∞Ï°¥ ÎåÄÏÇ¨Í∞Ä ÏÇ¨Ïö©ÎêòÎ©∞, Ïù¥ ÌîÑÎ°¨ÌîÑÌä∏Îäî Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ±ÏóêÎßå ÏÇ¨Ïö©Îê©ÎãàÎã§.\"\n                    autoComplete=\"off\"\n                    spellCheck=\"false\"\n                  />\n                )}\n\n                {!currentCustomPrompt?.enabled && (\n                  <Typography variant=\"caption\" color=\"text.secondary\" sx={{ fontStyle: 'italic' }}>\n                    Í∏∞Î≥∏ Î™®Îìú: ÏúÑÏùò ÎåÄÏÇ¨ ÎÇ¥Ïö©ÏùÑ Í∏∞Î∞òÏúºÎ°ú Ïù¥ÎØ∏ÏßÄÎ•º ÏÉùÏÑ±Ìï©ÎãàÎã§.\n                  </Typography>\n                )}\n              </Box>\n            </Collapse>\n          </Box>\n\n          {/* Ïù¥ÎØ∏ÏßÄ/ÎπÑÎîîÏò§ ÌëúÏãú ÎòêÎäî ÎìúÎûòÍ∑∏Ïï§ÎìúÎ°≠ ÏòÅÏó≠ */}\n          {pair.image ? (\n            <Box sx={{ position: 'relative', mb: 2 }}>\n              {pair.image.type.startsWith('video/') ? (\n                <VideoPreview file={pair.image} />\n              ) : (\n                <Box\n                  sx={{\n                    width: '100%',\n                    aspectRatio: '1/1',\n                    backgroundImage: `url(${URL.createObjectURL(pair.image)})`,\n                    backgroundSize: 'cover',\n                    backgroundPosition: 'center',\n                    borderRadius: 1\n                  }}\n                />\n              )}\n              \n              {/* Ïù¥ÎØ∏ÏßÄ Ïª®Ìä∏Î°§ Î≤ÑÌäºÎì§ */}\n              <Box sx={{ \n                position: 'absolute', \n                top: 8, \n                right: 8,\n                display: 'flex',\n                gap: 0.5\n              }}>\n                <IconButton\n                  size=\"small\"\n                  onClick={() => handleDownloadImage(imageIndex, pair.image!)}\n                  sx={{\n                    bgcolor: 'rgba(255,255,255,0.9)',\n                    '&:hover': { bgcolor: 'rgba(255,255,255,1)' }\n                  }}\n                  title=\"Ïù¥ÎØ∏ÏßÄ Îã§Ïö¥Î°úÎìú\"\n                >\n                  <Download color=\"success\" fontSize=\"small\" />\n                </IconButton>\n                <IconButton\n                  size=\"small\"\n                  onClick={() => handleRemoveImage(imageIndex)}\n                  sx={{\n                    bgcolor: 'rgba(255,255,255,0.9)',\n                    '&:hover': { bgcolor: 'rgba(255,255,255,1)' }\n                  }}\n                  title=\"Ïù¥ÎØ∏ÏßÄ ÏÇ≠Ï†ú\"\n                >\n                  <Delete color=\"error\" fontSize=\"small\" />\n                </IconButton>\n                <IconButton\n                  size=\"small\"\n                  onClick={() => {\n                    console.log('üîÑ ÏÉàÎ°úÍ≥†Ïπ® Î≤ÑÌäº ÌÅ¥Î¶≠Îê® - imageIndex:', imageIndex, 'pair:', pair);\n                    handleIndividualGenerate(\n                      imageIndex,\n                      pair,\n                      currentCustomPrompt?.prompt,\n                      currentCustomPrompt?.enabled\n                    );\n                  }}\n                  disabled={isGenerating}\n                  sx={{\n                    bgcolor: 'rgba(255,255,255,0.9)',\n                    '&:hover': { bgcolor: 'rgba(255,255,255,1)' }\n                  }}\n                  title=\"Ïù¥ÎØ∏ÏßÄ Ïû¨ÏÉùÏÑ±\"\n                >\n                  {isGenerating ? (\n                    <CircularProgress size={16} />\n                  ) : (\n                    <Refresh color=\"primary\" fontSize=\"small\" />\n                  )}\n                </IconButton>\n              </Box>\n\n              <Typography variant=\"caption\" sx={{ \n                position: 'absolute',\n                bottom: 4,\n                left: 8,\n                bgcolor: 'rgba(0,0,0,0.7)',\n                color: 'white',\n                px: 1,\n                py: 0.5,\n                borderRadius: 1\n              }}>\n                {pair.image.name}\n              </Typography>\n            </Box>\n          ) : (\n            <Box\n              {...getRootProps()}\n              sx={{\n                border: 2,\n                borderColor: isDragActive ? 'primary.main' : 'grey.300',\n                borderStyle: 'dashed',\n                borderRadius: 1,\n                p: 2,\n                textAlign: 'center',\n                cursor: 'pointer',\n                bgcolor: isDragActive ? 'action.hover' : 'background.paper',\n                mb: 2,\n                aspectRatio: '1/1',\n                display: 'flex',\n                flexDirection: 'column',\n                justifyContent: 'center',\n                '&:hover': {\n                  borderColor: 'primary.main',\n                  bgcolor: 'action.hover'\n                }\n              }}\n            >\n              <input {...getInputProps()} />\n              <Box sx={{ display: 'flex', justifyContent: 'center', width: '100%' }}>\n                <CloudUpload sx={{ fontSize: 32, color: 'grey.400', mb: 1 }} />\n              </Box>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                {isDragActive ? 'ÌååÏùºÏùÑ ÎÜìÏúºÏÑ∏Ïöî' : 'ÎØ∏ÎîîÏñ¥ ÎìúÎûòÍ∑∏ ÎòêÎäî ÌÅ¥Î¶≠'}\n              </Typography>\n              <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: 'block', mt: 0.5, fontSize: '0.7rem' }}>\n                ÏµúÎåÄ {imageUploadMode === 'single-for-all' ? '40MB' : '10MB'}\n              </Typography>\n            </Box>\n          )}\n\n          {/* ÏÉÅÌÉú Î©îÏãúÏßÄ */}\n          {isGenerating && (\n            <Alert severity=\"info\" sx={{ mt: 1 }}>\n              <Box sx={{ display: 'flex', alignItems: 'center' }}>\n                <CircularProgress size={16} sx={{ mr: 1 }} />\n                Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ± Ï§ë...\n              </Box>\n            </Alert>\n          )}\n          \n          {generationSuccess && (\n            <Alert severity=\"success\" sx={{ mt: 1 }}>\n              Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ± ÏôÑÎ£å!\n            </Alert>\n          )}\n          \n          {generationError && (\n            <Alert severity=\"error\" sx={{ mt: 1 }}>\n              Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ± Ïã§Ìå®. Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.\n            </Alert>\n          )}\n          \n          {uploadError && (\n            <Alert severity=\"error\" sx={{ mt: 1 }}>\n              {uploadError}\n            </Alert>\n          )}\n        </CardContent>\n\n        {/* ÌïòÎã® Ïï°ÏÖò Î≤ÑÌäº */}\n        <Box sx={{ p: 1.5, pt: 0, display: 'flex', flexDirection: 'column', gap: 1 }}>\n          <Button\n            fullWidth\n            variant=\"outlined\"\n            size=\"small\"\n            startIcon={<AutoFixHigh />}\n            onClick={() => {\n              console.log('üñ±Ô∏è ÏûêÎèôÏÉùÏÑ± Î≤ÑÌäº ÌÅ¥Î¶≠Îê® - imageIndex:', imageIndex, 'pair:', pair);\n              handleIndividualGenerate(\n                imageIndex,\n                pair,\n                currentCustomPrompt?.prompt,\n                currentCustomPrompt?.enabled\n              );\n            }}\n            disabled={isGenerating}\n            sx={{\n              bgcolor: currentCustomPrompt?.enabled ? 'rgba(25, 118, 210, 0.08)' : 'transparent',\n              borderColor: currentCustomPrompt?.enabled ? 'primary.main' : 'grey.300',\n              color: currentCustomPrompt?.enabled ? 'primary.main' : 'text.primary',\n              '&:hover': {\n                bgcolor: currentCustomPrompt?.enabled ? 'rgba(25, 118, 210, 0.12)' : 'action.hover',\n              }\n            }}\n          >\n            {isGenerating ? 'ÏÉùÏÑ±Ï§ë...' : (currentCustomPrompt?.enabled ? 'Ïª§Ïä§ÌÖÄ ÌîÑÎ°¨ÌîÑÌä∏Î°ú ÏÉùÏÑ±' : 'AI ÏûêÎèôÏÉùÏÑ±')}\n          </Button>\n\n          <Button\n            fullWidth\n            variant=\"outlined\"\n            size=\"small\"\n            startIcon={<VideoLibrary />}\n            onClick={() => handleOpenBookmarkModal(imageIndex)}\n            disabled={isGenerating}\n            sx={{\n              borderColor: 'secondary.main',\n              color: 'secondary.main',\n              '&:hover': {\n                bgcolor: 'rgba(156, 39, 176, 0.08)',\n                borderColor: 'secondary.main',\n              }\n            }}\n          >\n            ÎèôÏòÅÏÉÅ Î∂àÎü¨Ïò§Í∏∞\n          </Button>\n        </Box>\n      </Card>\n    );\n  });\n\n  return (\n    <Box>\n      <Typography variant=\"h6\" gutterBottom sx={{ mb: 3 }}>\n        ÌÖçÏä§Ìä∏-Ïù¥ÎØ∏ÏßÄ Îß§Ïπ≠ Í¥ÄÎ¶¨\n      </Typography>\n      \n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        Í∞Å ÌÖçÏä§Ìä∏Ïóê ÎåÄÏùëÎêòÎäî Ïù¥ÎØ∏ÏßÄÎ•º Í∞úÎ≥ÑÏ†ÅÏúºÎ°ú Í¥ÄÎ¶¨Ìï† Ïàò ÏûàÏäµÎãàÎã§.\n        ÎìúÎûòÍ∑∏Ïï§ÎìúÎ°≠ÏúºÎ°ú Ïù¥ÎØ∏ÏßÄÎ•º ÏóÖÎ°úÎìúÌïòÍ±∞ÎÇò AIÎ°ú ÏûêÎèô ÏÉùÏÑ±ÌïòÏÑ∏Ïöî.\n        <br />\n        <Typography component=\"span\" variant=\"caption\" color=\"text.secondary\">\n          ÌååÏùº ÌÅ¨Í∏∞ Ï†úÌïú: {imageUploadMode === 'single-for-all' ? 'ÏµúÎåÄ 40MB' : 'Í∞Å ÌååÏùº ÏµúÎåÄ 10MB'}\n        </Typography>\n      </Typography>\n\n      <Grid container spacing={2}>\n        {textImagePairs.map((pair, index) => (\n          <Grid item xs={12} sm={6} md={4} key={`dropzone-${pair.imageIndex}-${pair.textKey}`}>\n            <IndividualDropZone imageIndex={pair.imageIndex} pair={pair} />\n          </Grid>\n        ))}\n      </Grid>\n\n      {textImagePairs.length === 0 && (\n        <Alert severity=\"info\" sx={{ mt: 2 }}>\n          ÎåÄÎ≥∏ÏùÑ Î®ºÏ†Ä ÏûëÏÑ±Ìï¥Ï£ºÏÑ∏Ïöî.\n        </Alert>\n      )}\n\n      {/* Î∂ÅÎßàÌÅ¨ ÎπÑÎîîÏò§ ÏÑ†ÌÉù Î™®Îã¨ */}\n      <VideoBookmarkModal\n        open={bookmarkModalOpen}\n        onClose={handleCloseBookmarkModal}\n        onSelect={handleSelectBookmarkVideo}\n      />\n    </Box>\n  );\n});\n\n// Display name for debugging\nTextImagePairManager.displayName = 'TextImagePairManager';\n\nexport default TextImagePairManager;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}