{"ast":null,"code":"var _jsxFileName = \"/zstus/frontend/src/components/TextImagePairManager.tsx\",\n  _s3 = $RefreshSig$();\nimport React, { useState, useCallback, useMemo, memo, useEffect, useRef, useImperativeHandle, forwardRef } from 'react';\nimport { Box, Typography, Button, Grid, Card, CardContent, IconButton, Alert, CircularProgress, TextField, FormControlLabel, Switch, Collapse } from '@mui/material';\nimport { CloudUpload, Delete, AutoFixHigh, Refresh, Download, ExpandMore, ExpandLess, Movie as MovieIcon, VideoLibrary } from '@mui/icons-material';\nimport { useDropzone } from 'react-dropzone';\nimport MediaBookmarkModal from './MediaBookmarkModal';\nimport apiService from '../services/api';\n\n// âœ… refë¥¼ í†µí•´ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•œ ë©”ì„œë“œ íƒ€ì… ì •ì˜\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TextImagePairManager = /*#__PURE__*/_s3(/*#__PURE__*/forwardRef(_c = _s3(({\n  content,\n  imageUploadMode,\n  images,\n  jobId,\n  onChange\n}, ref) => {\n  var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  _s3();\n  const [generationStatus, setGenerationStatus] = useState({});\n  const [generationType, setGenerationType] = useState({});\n  const [uploadErrors, setUploadErrors] = useState({});\n  const [customPrompts, setCustomPrompts] = useState({});\n  const [promptsExpanded, setPromptsExpanded] = useState({});\n  const [bookmarkModalOpen, setBookmarkModalOpen] = useState(false);\n  const [currentBookmarkIndex, setCurrentBookmarkIndex] = useState(null);\n\n  // ğŸ¨ ì´ë¯¸ì§€ë³„ íŒ¨ë‹ ì˜µì…˜ ìƒíƒœ (ê¸°ë³¸ê°’: true - íŒ¨ë‹ í™œì„±í™”)\n  const [imagePanningOptions, setImagePanningOptions] = useState({});\n\n  // âœ… Uncontrolled TextFieldë¥¼ ìœ„í•œ ref ì €ì¥ì†Œ\n  const textFieldRefs = useRef({});\n  const customPromptRefs = useRef({});\n\n  // âœ… TextFieldì˜ í˜„ì¬ ê°’ ìºì‹œ (ì¬ë Œë”ë§ ì‹œ ê°’ ë³µì›ìš©)\n  const textFieldValuesCache = useRef({});\n  const customPromptValuesCache = useRef({});\n\n  // ìµœì‹  images ìƒíƒœë¥¼ ì¶”ì í•˜ê¸° ìœ„í•œ ref\n  const imagesRef = useRef(images);\n\n  // images propì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ ref ì—…ë°ì´íŠ¸\n  useEffect(() => {\n    imagesRef.current = images;\n  }, [images]);\n\n  // âœ… refë¥¼ í†µí•´ ì™¸ë¶€ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ê°ˆ ìˆ˜ ìˆë„ë¡ ë©”ì„œë“œ ì œê³µ\n  useImperativeHandle(ref, () => ({\n    getEditedData: () => {\n      // âœ… TextField refì—ì„œ í˜„ì¬ ê°’ ì½ê¸°\n      const editedTexts = {};\n      Object.keys(textFieldRefs.current).forEach(key => {\n        var _textFieldRefs$curren;\n        // âœ… imageIndex-textIdx í˜•íƒœë§Œ ì²˜ë¦¬ (ì˜ˆ: \"0-0\", \"1-1\")\n        // stableRefKey í˜•íƒœ(ì˜ˆ: \"body1-0\")ëŠ” ê±´ë„ˆëœ€\n        const parts = key.split('-');\n        if (parts.length !== 2) return; // body1+body2 ê°™ì€ ê²½ìš° ê±´ë„ˆëœ€\n\n        const imageIndex = parseInt(parts[0]);\n        const textIdx = parseInt(parts[1]);\n\n        // ìˆ«ìë¡œ íŒŒì‹± ê°€ëŠ¥í•œ ê²½ìš°ë§Œ ì²˜ë¦¬\n        if (isNaN(imageIndex) || isNaN(textIdx)) return;\n        const value = ((_textFieldRefs$curren = textFieldRefs.current[key]) === null || _textFieldRefs$curren === void 0 ? void 0 : _textFieldRefs$curren.value) || '';\n        if (!editedTexts[imageIndex]) {\n          editedTexts[imageIndex] = [];\n        }\n        editedTexts[imageIndex][textIdx] = value;\n      });\n\n      // âœ… customPrompt refì—ì„œ í˜„ì¬ ê°’ ì½ê¸°\n      const customPromptsData = {};\n      Object.keys(customPromptRefs.current).forEach(indexStr => {\n        var _customPromptRefs$cur, _customPrompts$imageI;\n        const imageIndex = parseInt(indexStr);\n        const promptValue = ((_customPromptRefs$cur = customPromptRefs.current[imageIndex]) === null || _customPromptRefs$cur === void 0 ? void 0 : _customPromptRefs$cur.value) || '';\n        const enabled = ((_customPrompts$imageI = customPrompts[imageIndex]) === null || _customPrompts$imageI === void 0 ? void 0 : _customPrompts$imageI.enabled) || false;\n        if (promptValue || enabled) {\n          customPromptsData[imageIndex] = {\n            imageIndex,\n            prompt: promptValue,\n            enabled\n          };\n        }\n      });\n      return {\n        editedTexts,\n        customPrompts: customPromptsData,\n        imagePanningOptions: imagePanningOptions\n      };\n    }\n  }), [customPrompts, imagePanningOptions]); // customPromptsì™€ imagePanningOptions ì˜ì¡´\n\n  // âœ… ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ í† ê¸€ (enabled ìƒíƒœë§Œ ê´€ë¦¬)\n  const toggleCustomPrompt = (imageIndex, enabled) => {\n    setCustomPrompts(prev => {\n      var _prev$imageIndex;\n      return {\n        ...prev,\n        [imageIndex]: {\n          imageIndex,\n          prompt: ((_prev$imageIndex = prev[imageIndex]) === null || _prev$imageIndex === void 0 ? void 0 : _prev$imageIndex.prompt) || '',\n          enabled\n        }\n      };\n    });\n  };\n  const togglePromptExpanded = imageIndex => {\n    setPromptsExpanded(prev => ({\n      ...prev,\n      [imageIndex]: !prev[imageIndex]\n    }));\n  };\n\n  // ğŸ¨ íŒ¨ë‹ ì˜µì…˜ í† ê¸€ í•¨ìˆ˜\n  const togglePanningOption = (imageIndex, enabled) => {\n    setImagePanningOptions(prev => {\n      const newOptions = {\n        ...prev,\n        [imageIndex]: enabled\n      };\n      console.log(`ğŸ¨ íŒ¨ë‹ ì˜µì…˜ ë³€ê²½ - imageIndex: ${imageIndex}, enabled: ${enabled}`);\n      console.log(`ğŸ¨ ì „ì²´ íŒ¨ë‹ ì˜µì…˜ ìƒíƒœ:`, newOptions);\n      return newOptions;\n    });\n  };\n\n  // í…ìŠ¤íŠ¸-ì´ë¯¸ì§€ ìŒ ë°ì´í„° ìƒì„± (useMemoë¡œ ìµœì í™”)\n  // âœ… editedTexts ì˜ì¡´ì„± ì œê±° - TextField ì…ë ¥ ì‹œ ì¬ê³„ì‚° ë°©ì§€\n  const textImagePairs = useMemo(() => {\n    const bodyTexts = Object.entries(content).filter(([key, value]) => key.startsWith('body') && (value === null || value === void 0 ? void 0 : value.trim())).map(([key, value], index) => ({\n      key,\n      value: value.trim(),\n      index\n    }));\n\n    // ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì§„ ì´ë¯¸ì§€ë“¤ì„ ë§µìœ¼ë¡œ ìƒì„±\n    const imageMap = new Map();\n    images.forEach(img => {\n      const storedIndex = img.__imageIndex;\n      if (typeof storedIndex === 'number') {\n        imageMap.set(storedIndex, img);\n      }\n    });\n    console.log('ğŸ—ºï¸ createTextImagePairs - imageMap:', Array.from(imageMap.entries()).map(([idx, file]) => `${idx}:${file.name}`));\n    console.log('ğŸ“ bodyTexts ê¸¸ì´:', bodyTexts.length, 'imageUploadMode:', imageUploadMode);\n    console.log('ğŸ” ë°›ì€ images ë°°ì—´:', images.map(img => `${img.name}(__imageIndex:${img.__imageIndex})`));\n    const pairs = [];\n    if (imageUploadMode === 'per-script') {\n      // í…ìŠ¤íŠ¸ 1ê°œë‹¹ ì´ë¯¸ì§€ 1ê°œ\n      bodyTexts.forEach(({\n        key,\n        value,\n        index\n      }) => {\n        const foundImage = imageMap.get(index);\n        const customPrompt = customPrompts[index];\n\n        // ì›ë³¸ í…ìŠ¤íŠ¸ ë°°ì—´ (per-scriptëŠ” 1ê°œ)\n        const originalTexts = [value];\n        console.log(`ğŸ“‹ per-script: textIndex=${index}, imageIndex=${index}, foundImage=${(foundImage === null || foundImage === void 0 ? void 0 : foundImage.name) || 'null'}`);\n        pairs.push({\n          textIndex: index,\n          textKey: key,\n          textContent: value,\n          image: foundImage || null,\n          imageIndex: index,\n          isGenerating: false,\n          customPrompt: (customPrompt === null || customPrompt === void 0 ? void 0 : customPrompt.prompt) || '',\n          useCustomPrompt: (customPrompt === null || customPrompt === void 0 ? void 0 : customPrompt.enabled) || false,\n          originalTexts: originalTexts\n        });\n      });\n    } else if (imageUploadMode === 'per-two-scripts') {\n      // í…ìŠ¤íŠ¸ 2ê°œë‹¹ ì´ë¯¸ì§€ 1ê°œ\n      for (let i = 0; i < bodyTexts.length; i += 2) {\n        const imageIndex = Math.floor(i / 2);\n        const text1 = bodyTexts[i];\n        const text2 = bodyTexts[i + 1];\n        if (text1) {\n          const foundImage = imageMap.get(imageIndex);\n          const customPrompt = customPrompts[imageIndex];\n\n          // ì›ë³¸ í…ìŠ¤íŠ¸ ë°°ì—´\n          const originalTexts = [text1.value, text2 === null || text2 === void 0 ? void 0 : text2.value].filter(Boolean);\n          console.log(`ğŸ“‹ per-two-scripts: textIndex=${i}, imageIndex=${imageIndex}, foundImage=${(foundImage === null || foundImage === void 0 ? void 0 : foundImage.name) || 'null'}`);\n          pairs.push({\n            textIndex: i,\n            textKey: `${text1.key}${text2 ? `+${text2.key}` : ''}`,\n            textContent: `${text1.value}${text2 ? ` / ${text2.value}` : ''}`,\n            image: foundImage || null,\n            imageIndex: imageIndex,\n            isGenerating: false,\n            customPrompt: (customPrompt === null || customPrompt === void 0 ? void 0 : customPrompt.prompt) || '',\n            useCustomPrompt: (customPrompt === null || customPrompt === void 0 ? void 0 : customPrompt.enabled) || false,\n            originalTexts: originalTexts\n          });\n        }\n      }\n    } else if (imageUploadMode === 'single-for-all') {\n      // ëª¨ë“  í…ìŠ¤íŠ¸ì— ì´ë¯¸ì§€ 1ê°œ\n      const allTexts = bodyTexts.map(({\n        key,\n        value\n      }) => key.replace('body', 'ëŒ€ì‚¬')).join(' + ');\n      const allContent = bodyTexts.map(({\n        value\n      }) => value).join(' / ');\n      const foundImage = imageMap.get(0);\n      const customPrompt = customPrompts[0];\n\n      // ì›ë³¸ í…ìŠ¤íŠ¸ ë°°ì—´ (ëª¨ë“  ëŒ€ì‚¬)\n      const originalTexts = bodyTexts.map(({\n        value\n      }) => value);\n      console.log(`ğŸ“‹ single-for-all: ëª¨ë“  ëŒ€ì‚¬, imageIndex=0, foundImage=${(foundImage === null || foundImage === void 0 ? void 0 : foundImage.name) || 'null'}`);\n      pairs.push({\n        textIndex: 0,\n        textKey: allTexts,\n        textContent: allContent,\n        image: foundImage || null,\n        imageIndex: 0,\n        isGenerating: false,\n        customPrompt: (customPrompt === null || customPrompt === void 0 ? void 0 : customPrompt.prompt) || '',\n        useCustomPrompt: (customPrompt === null || customPrompt === void 0 ? void 0 : customPrompt.enabled) || false,\n        originalTexts: originalTexts\n      });\n    }\n    console.log('ğŸ¯ ìµœì¢… pairs ê°œìˆ˜:', pairs.length);\n    return pairs;\n  }, [content, images, imageUploadMode, customPrompts]);\n\n  // í˜„ì¬ images ë°°ì—´ ìƒíƒœ ë¡œê¹…\n  console.log('ğŸ“¦ í˜„ì¬ images ë°°ì—´ ê¸¸ì´:', images.length);\n  console.log('ğŸ“¦ í˜„ì¬ images ë°°ì—´:', images.length > 0 ? images.map(img => `${img.name}(index:${img.__imageIndex})`) : 'ë¹ˆ ë°°ì—´');\n  console.log('ğŸ® generationStatus:', generationStatus);\n\n  // ê°œë³„ ì´ë¯¸ì§€ ì—…ë¡œë“œ í•¸ë“¤ëŸ¬\n  const handleIndividualImageUpload = useCallback((imageIndex, acceptedFiles) => {\n    if (acceptedFiles.length === 0) return;\n    const file = acceptedFiles[0];\n\n    // ê¸°ì¡´ ì—ëŸ¬ ìƒíƒœ ì œê±°\n    setUploadErrors(prev => {\n      const newErrors = {\n        ...prev\n      };\n      delete newErrors[imageIndex];\n      return newErrors;\n    });\n\n    // íŒŒì¼ ìœ íš¨ì„± ê²€ì¦ (ëª¨ë“œì— ë”°ë¼ ë‹¤ë¥¸ ì œí•œ)\n    const maxSize = imageUploadMode === 'single-for-all' ? 80 * 1024 * 1024 : 40 * 1024 * 1024;\n    const maxSizeText = imageUploadMode === 'single-for-all' ? '80MB' : '40MB';\n    if (file.size > maxSize) {\n      setUploadErrors(prev => ({\n        ...prev,\n        [imageIndex]: `íŒŒì¼ í¬ê¸°ê°€ ${maxSizeText}ë¥¼ ì´ˆê³¼í•©ë‹ˆë‹¤`\n      }));\n      return;\n    }\n\n    // íŒŒì¼ í˜•ì‹ ê²€ì¦ (MIME íƒ€ì… + í™•ì¥ì)\n    const fileName = file.name.toLowerCase();\n    const isImageByType = file.type.startsWith('image/');\n    const isVideoByType = file.type.startsWith('video/');\n\n    // HEIC/HEIFëŠ” ë¸Œë¼ìš°ì €ì—ì„œ MIME íƒ€ì…ì´ ì—†ì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ í™•ì¥ìë¡œ ê²€ì¦\n    const imageExtensions = ['.jpg', '.jpeg', '.png', '.gif', '.webp', '.bmp', '.heic', '.heif'];\n    const videoExtensions = ['.mp4', '.mov', '.avi', '.webm', '.mkv'];\n    const isImageByExt = imageExtensions.some(ext => fileName.endsWith(ext));\n    const isVideoByExt = videoExtensions.some(ext => fileName.endsWith(ext));\n    const isImage = isImageByType || isImageByExt;\n    const isVideo = isVideoByType || isVideoByExt;\n    if (!isImage && !isVideo) {\n      setUploadErrors(prev => ({\n        ...prev,\n        [imageIndex]: 'ì´ë¯¸ì§€ ë˜ëŠ” ë¹„ë””ì˜¤ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤'\n      }));\n      return;\n    }\n    console.log('ğŸ”§ handleIndividualImageUpload - imageIndex:', imageIndex, 'fileName:', file.name);\n\n    // íŒŒì¼ì— ìœ„ì¹˜ ì •ë³´ ì¶”ê°€\n    file.__imageIndex = imageIndex;\n    console.log('ğŸ·ï¸ íŒŒì¼ì— __imageIndex ì„¤ì •:', imageIndex);\n\n    // ìµœì‹  images ìƒíƒœë¥¼ ê°€ì ¸ì™€ì„œ ì—…ë°ì´íŠ¸\n    const currentImages = imagesRef.current;\n    console.log('ğŸ”„ ì—…ë°ì´íŠ¸ ì „ currentImages (ref):', currentImages.map(img => `${img.name}(index:${img.__imageIndex})`));\n\n    // í˜„ì¬ imagesì—ì„œ í•´ë‹¹ imageIndexë¥¼ ê°€ì§„ íŒŒì¼ ì œê±°í•˜ê³  ìƒˆ íŒŒì¼ ì¶”ê°€\n    const newImages = currentImages.filter(img => img.__imageIndex !== imageIndex);\n    newImages.push(file);\n\n    // imageIndex ìˆœìœ¼ë¡œ ì •ë ¬\n    newImages.sort((a, b) => {\n      var _imageIndex, _imageIndex2;\n      const indexA = (_imageIndex = a.__imageIndex) !== null && _imageIndex !== void 0 ? _imageIndex : 0;\n      const indexB = (_imageIndex2 = b.__imageIndex) !== null && _imageIndex2 !== void 0 ? _imageIndex2 : 0;\n      return indexA - indexB;\n    });\n    console.log('ğŸ“Š ì—…ë°ì´íŠ¸ëœ images ë°°ì—´:', newImages.map(img => `${img.name}(index:${img.__imageIndex})`));\n    onChange(newImages, imageUploadMode);\n  }, [imageUploadMode, onChange]); // images ì˜ì¡´ì„± ì œê±°\n\n  // ê°œë³„ ì´ë¯¸ì§€ ìë™ ìƒì„±\n  const handleIndividualGenerate = async (imageIndex, pair, customPrompt, useCustomPrompt) => {\n    console.log('ğŸ¤– handleIndividualGenerate ì‹œì‘ - imageIndex:', imageIndex, 'pair:', pair, 'customPrompt:', customPrompt, 'useCustomPrompt:', useCustomPrompt);\n    setGenerationStatus(prev => ({\n      ...prev,\n      [imageIndex]: 'generating'\n    }));\n    setGenerationType(prev => ({\n      ...prev,\n      [imageIndex]: 'ai'\n    }));\n    try {\n      // ìš”ì²­ ë°”ë”” êµ¬ì„±\n      let requestBody = {\n        job_id: jobId // Job ID ì¶”ê°€\n      };\n\n      // ğŸ¯ ìš°ì„ ìˆœìœ„ 1: ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸\n      if (useCustomPrompt && customPrompt !== null && customPrompt !== void 0 && customPrompt.trim()) {\n        requestBody.custom_prompt = customPrompt.trim();\n        console.log('ğŸ“ [ìš°ì„ ìˆœìœ„ 1] ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ ì‚¬ìš©:', customPrompt.trim());\n      }\n      // ğŸ¯ ìš°ì„ ìˆœìœ„ 2: ìˆ˜ì •ëœ í…ìŠ¤íŠ¸ (TextField refì—ì„œ ì½ê¸°)\n      else {\n        var _textFieldRefs$curren2, _textFieldRefs$curren3;\n        // âœ… TextField refì—ì„œ í˜„ì¬ ì…ë ¥ëœ ê°’ ì½ê¸°\n        const editedText0 = ((_textFieldRefs$curren2 = textFieldRefs.current[`${imageIndex}-0`]) === null || _textFieldRefs$curren2 === void 0 ? void 0 : _textFieldRefs$curren2.value) || '';\n        const editedText1 = ((_textFieldRefs$curren3 = textFieldRefs.current[`${imageIndex}-1`]) === null || _textFieldRefs$curren3 === void 0 ? void 0 : _textFieldRefs$curren3.value) || '';\n\n        // originalTexts ê°€ì ¸ì˜¤ê¸°\n        const originalTexts = pair.originalTexts || [];\n\n        // ìˆ˜ì •ëœ í…ìŠ¤íŠ¸ê°€ ìˆëŠ”ì§€ í™•ì¸\n        const hasEditedText0 = editedText0 && editedText0 !== originalTexts[0];\n        const hasEditedText1 = editedText1 && editedText1 !== originalTexts[1];\n        if (hasEditedText0 || hasEditedText1) {\n          // ìˆ˜ì •ëœ í…ìŠ¤íŠ¸ ì‚¬ìš©\n          requestBody.text = editedText0 || originalTexts[0];\n          if (editedText1 || originalTexts[1]) {\n            requestBody.additional_context = editedText1 || originalTexts[1];\n          }\n          console.log('ğŸ“ [ìš°ì„ ìˆœìœ„ 2] ìˆ˜ì •ëœ í…ìŠ¤íŠ¸ ì‚¬ìš© (refì—ì„œ ì½ìŒ):', requestBody.text);\n        } else {\n          // ì›ë³¸ í…ìŠ¤íŠ¸ ì‚¬ìš©\n          const texts = pair.textContent.split(' / ');\n          requestBody.text = texts[0];\n          if (texts.length > 1) {\n            requestBody.additional_context = texts[1];\n          }\n          console.log('ğŸ“ [ìš°ì„ ìˆœìœ„ 3] ì›ë³¸ í…ìŠ¤íŠ¸ ì‚¬ìš©:', texts[0]);\n        }\n      }\n      console.log('ğŸš€ ìš”ì²­ ë°”ë”” (Job ID í¬í•¨):', requestBody);\n      const response = await fetch('/generate-single-image', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(requestBody)\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.detail || 'ì´ë¯¸ì§€ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');\n      }\n      const data = await response.json();\n      const imageUrl = data.image_url;\n\n      // ìƒì„±ëœ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê³  File ê°ì²´ë¡œ ë³€í™˜\n      const imageResponse = await fetch(imageUrl);\n      if (!imageResponse.ok) {\n        throw new Error('ìƒì„±ëœ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');\n      }\n      const blob = await imageResponse.blob();\n      const fileName = `generated_image_pair_${imageIndex}.png`;\n      const file = new File([blob], fileName, {\n        type: 'image/png'\n      });\n      console.log('ğŸ“¸ ì´ë¯¸ì§€ ìƒì„± ì™„ë£Œ - fileName:', fileName, 'í˜¸ì¶œí•  imageIndex:', imageIndex);\n\n      // ì´ë¯¸ì§€ ë°°ì—´ ì—…ë°ì´íŠ¸\n      handleIndividualImageUpload(imageIndex, [file]);\n      setGenerationStatus(prev => ({\n        ...prev,\n        [imageIndex]: 'success'\n      }));\n      setTimeout(() => {\n        setGenerationStatus(prev => {\n          const newStatus = {\n            ...prev\n          };\n          delete newStatus[imageIndex];\n          return newStatus;\n        });\n      }, 3000);\n    } catch (error) {\n      console.error('ê°œë³„ ì´ë¯¸ì§€ ìƒì„± ì˜¤ë¥˜:', error);\n      setGenerationStatus(prev => ({\n        ...prev,\n        [imageIndex]: 'error'\n      }));\n      setTimeout(() => {\n        setGenerationStatus(prev => {\n          const newStatus = {\n            ...prev\n          };\n          delete newStatus[imageIndex];\n          return newStatus;\n        });\n      }, 5000);\n    }\n  };\n\n  // ê°œë³„ ì´ë¯¸ì§€ ì‚­ì œ (ê°œì„ ë¨)\n  const handleRemoveImage = imageIndex => {\n    console.log('ğŸ—‘ï¸ ì´ë¯¸ì§€ ì‚­ì œ ìš”ì²­ - imageIndex:', imageIndex);\n\n    // ìµœì‹  images ìƒíƒœë¥¼ ê°€ì ¸ì™€ì„œ ì‚­ì œ\n    const currentImages = imagesRef.current;\n    const newImages = currentImages.filter(img => img.__imageIndex !== imageIndex);\n\n    // í•´ë‹¹ ì¸ë±ìŠ¤ì˜ ì—ëŸ¬ ìƒíƒœë„ í•¨ê»˜ ì œê±°\n    setUploadErrors(prev => {\n      const newErrors = {\n        ...prev\n      };\n      delete newErrors[imageIndex];\n      return newErrors;\n    });\n\n    // ìƒì„± ìƒíƒœë„ í•¨ê»˜ ì œê±°\n    setGenerationStatus(prev => {\n      const newStatus = {\n        ...prev\n      };\n      delete newStatus[imageIndex];\n      return newStatus;\n    });\n    console.log('âœ… ì´ë¯¸ì§€ ì‚­ì œ ì™„ë£Œ - imageIndex:', imageIndex);\n    console.log('ğŸ“Š ë‚¨ì€ ì´ë¯¸ì§€:', newImages.map(img => `${img.name}(index:${img.__imageIndex})`));\n    onChange(newImages, imageUploadMode);\n  };\n\n  // ê°œë³„ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ\n  const handleDownloadImage = async (imageIndex, image) => {\n    try {\n      // ìƒì„±ëœ ì´ë¯¸ì§€ì¸ì§€ í™•ì¸ (filenameìœ¼ë¡œ íŒë‹¨)\n      if (image.name.startsWith('generated_')) {\n        // ë°±ì—”ë“œ ë‹¤ìš´ë¡œë“œ APIë¥¼ í†µí•´ ë‹¤ìš´ë¡œë“œ\n        const link = document.createElement('a');\n        link.href = `/download-image/${image.name}`;\n        link.download = `reels_image_${imageIndex + 1}.png`;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n      } else {\n        // ì—…ë¡œë“œëœ íŒŒì¼ì€ ì§ì ‘ ë‹¤ìš´ë¡œë“œ\n        const url = URL.createObjectURL(image);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `reels_image_${imageIndex + 1}_${image.name}`;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        URL.revokeObjectURL(url);\n      }\n      console.log('ğŸ’¾ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ ì™„ë£Œ - imageIndex:', imageIndex, 'fileName:', image.name);\n    } catch (error) {\n      console.error('ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ ì˜¤ë¥˜:', error);\n    }\n  };\n\n  // ë¶ë§ˆí¬ ëª¨ë‹¬ ì—´ê¸°\n  const handleOpenBookmarkModal = imageIndex => {\n    console.log('ğŸ¬ ë¶ë§ˆí¬ ëª¨ë‹¬ ì—´ê¸° - imageIndex:', imageIndex);\n    setCurrentBookmarkIndex(imageIndex);\n    setBookmarkModalOpen(true);\n  };\n\n  // ë¶ë§ˆí¬ ëª¨ë‹¬ ë‹«ê¸°\n  const handleCloseBookmarkModal = () => {\n    setBookmarkModalOpen(false);\n    setCurrentBookmarkIndex(null);\n  };\n\n  // ë¶ë§ˆí¬ ë¯¸ë””ì–´(ë¹„ë””ì˜¤/ì´ë¯¸ì§€) ì„ íƒ í•¸ë“¤ëŸ¬\n  const handleSelectBookmarkMedia = async (media, mediaType) => {\n    if (currentBookmarkIndex === null) return;\n    console.log(`âœ… ë¶ë§ˆí¬ ${mediaType === 'video' ? 'ë¹„ë””ì˜¤' : 'ì´ë¯¸ì§€'} ì„ íƒ:`, media.filename, 'imageIndex:', currentBookmarkIndex);\n    try {\n      // ìƒì„± ìƒíƒœ ì—…ë°ì´íŠ¸\n      setGenerationStatus(prev => ({\n        ...prev,\n        [currentBookmarkIndex]: 'generating'\n      }));\n      setGenerationType(prev => ({\n        ...prev,\n        [currentBookmarkIndex]: 'bookmark'\n      }));\n\n      // ë°±ì—”ë“œ API í˜¸ì¶œ: ë¶ë§ˆí¬ ë¯¸ë””ì–´ë¥¼ Job í´ë”ë¡œ ë³µì‚¬\n      const response = mediaType === 'video' ? await apiService.copyBookmarkVideo(jobId, media.filename, currentBookmarkIndex) : await apiService.copyBookmarkImage(jobId, media.filename, currentBookmarkIndex);\n      if (response.status === 'success') {\n        var _filename$split$pop;\n        // ë³µì‚¬ëœ íŒŒì¼ì„ File ê°ì²´ë¡œ ë³€í™˜í•˜ì—¬ ì´ë¯¸ì§€ ë°°ì—´ì— ì¶”ê°€\n        const fileUrl = response.data.file_url;\n        const filename = response.data.filename;\n\n        // íŒŒì¼ì„ Fetchë¡œ ê°€ì ¸ì™€ì„œ File ê°ì²´ ìƒì„±\n        const fileResponse = await fetch(fileUrl);\n        if (!fileResponse.ok) {\n          throw new Error(`${mediaType === 'video' ? 'ë¹„ë””ì˜¤' : 'ì´ë¯¸ì§€'} íŒŒì¼ ë‹¤ìš´ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤`);\n        }\n        const blob = await fileResponse.blob();\n\n        // íŒŒì¼ íƒ€ì… ê²°ì •\n        const ext = (_filename$split$pop = filename.split('.').pop()) === null || _filename$split$pop === void 0 ? void 0 : _filename$split$pop.toLowerCase();\n        let mimeType = 'application/octet-stream';\n        if (mediaType === 'video') {\n          if (ext === 'mp4') mimeType = 'video/mp4';else if (ext === 'mov') mimeType = 'video/quicktime';else if (ext === 'avi') mimeType = 'video/x-msvideo';else if (ext === 'webm') mimeType = 'video/webm';\n        } else {\n          if (ext === 'jpg' || ext === 'jpeg') mimeType = 'image/jpeg';else if (ext === 'png') mimeType = 'image/png';else if (ext === 'webp') mimeType = 'image/webp';else if (ext === 'gif') mimeType = 'image/gif';\n        }\n        const file = new File([blob], filename, {\n          type: mimeType\n        });\n        console.log(`ğŸ“¸ ë¶ë§ˆí¬ ${mediaType === 'video' ? 'ë¹„ë””ì˜¤' : 'ì´ë¯¸ì§€'} íŒŒì¼ ìƒì„± ì™„ë£Œ - fileName:`, filename, 'imageIndex:', currentBookmarkIndex);\n\n        // ì´ë¯¸ì§€ ë°°ì—´ ì—…ë°ì´íŠ¸\n        handleIndividualImageUpload(currentBookmarkIndex, [file]);\n        setGenerationStatus(prev => ({\n          ...prev,\n          [currentBookmarkIndex]: 'success'\n        }));\n        setTimeout(() => {\n          setGenerationStatus(prev => {\n            const newStatus = {\n              ...prev\n            };\n            delete newStatus[currentBookmarkIndex];\n            return newStatus;\n          });\n        }, 3000);\n        console.log(`âœ… ë¶ë§ˆí¬ ${mediaType === 'video' ? 'ë¹„ë””ì˜¤' : 'ì´ë¯¸ì§€'} ë³µì‚¬ ë° ì—…ë¡œë“œ ì™„ë£Œ`);\n      }\n    } catch (error) {\n      console.error(`âŒ ë¶ë§ˆí¬ ${mediaType === 'video' ? 'ë¹„ë””ì˜¤' : 'ì´ë¯¸ì§€'} ì„ íƒ ì˜¤ë¥˜:`, error);\n      setGenerationStatus(prev => ({\n        ...prev,\n        [currentBookmarkIndex]: 'error'\n      }));\n      setUploadErrors(prev => ({\n        ...prev,\n        [currentBookmarkIndex]: error.message || `ë¶ë§ˆí¬ ${mediaType === 'video' ? 'ë¹„ë””ì˜¤' : 'ì´ë¯¸ì§€'} ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨`\n      }));\n      setTimeout(() => {\n        setGenerationStatus(prev => {\n          const newStatus = {\n            ...prev\n          };\n          delete newStatus[currentBookmarkIndex];\n          return newStatus;\n        });\n      }, 5000);\n    }\n  };\n\n  // ë¹„ë””ì˜¤ ë¯¸ë¦¬ë³´ê¸° ì»´í¬ë„ŒíŠ¸ (ë¸Œë¼ìš°ì € ì§ì ‘ ì¬ìƒ)\n  const VideoPreview = /*#__PURE__*/_s(/*#__PURE__*/memo(_s(({\n    file\n  }) => {\n    _s();\n    const [videoUrl, setVideoUrl] = useState(null);\n    useEffect(() => {\n      // ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ ì¬ìƒí•  ìˆ˜ ìˆë„ë¡ URL ìƒì„±\n      const url = URL.createObjectURL(file);\n      setVideoUrl(url);\n      return () => {\n        if (url) {\n          URL.revokeObjectURL(url);\n        }\n      };\n    }, [file]);\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        position: 'relative'\n      },\n      children: [videoUrl && /*#__PURE__*/_jsxDEV(\"video\", {\n        src: videoUrl,\n        style: {\n          width: '100%',\n          aspectRatio: '1/1',\n          objectFit: 'cover',\n          borderRadius: '8px'\n        },\n        autoPlay: true,\n        muted: true,\n        loop: true,\n        playsInline: true,\n        controls: false,\n        onError: e => {\n          console.error('ë¹„ë””ì˜¤ ì¬ìƒ ì˜¤ë¥˜:', e);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 615,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          position: 'absolute',\n          top: 8,\n          left: 8,\n          bgcolor: 'rgba(0,0,0,0.7)',\n          borderRadius: 1,\n          p: 0.5,\n          display: 'flex',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(MovieIcon, {\n          sx: {\n            fontSize: 16,\n            color: 'white'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 647,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"caption\",\n          color: \"white\",\n          sx: {\n            ml: 0.5\n          },\n          children: \"\\uC601\\uC0C1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 648,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 635,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 613,\n      columnNumber: 7\n    }, this);\n  }, \"nkRZTjcntyJfhojS751MifEn6dQ=\")), \"nkRZTjcntyJfhojS751MifEn6dQ=\");\n\n  // ê°œë³„ ë“œë˜ê·¸ì•¤ë“œë¡­ ì»´í¬ë„ŒíŠ¸ (React.memoë¡œ ìµœì í™”)\n  const IndividualDropZone = /*#__PURE__*/_s2(/*#__PURE__*/memo(_s2(({\n    imageIndex,\n    pair\n  }) => {\n    _s2();\n    const onDrop = useCallback(acceptedFiles => {\n      handleIndividualImageUpload(imageIndex, acceptedFiles);\n    }, [imageIndex]);\n    const {\n      getRootProps,\n      getInputProps,\n      isDragActive\n    } = useDropzone({\n      onDrop,\n      accept: {\n        'image/*': ['.jpeg', '.jpg', '.png', '.gif', '.webp', '.bmp', '.heic', '.heif'],\n        'video/*': ['.mp4', '.mov', '.avi', '.webm', '.mkv']\n      },\n      maxFiles: 1,\n      multiple: false\n    });\n    const isGenerating = generationStatus[imageIndex] === 'generating';\n    const generationError = generationStatus[imageIndex] === 'error';\n    const generationSuccess = generationStatus[imageIndex] === 'success';\n    const currentGenerationType = generationType[imageIndex];\n    const uploadError = uploadErrors[imageIndex];\n    const isPromptExpanded = promptsExpanded[imageIndex] || false;\n    const currentCustomPrompt = customPrompts[imageIndex];\n\n    // ğŸ¨ íŒ¨ë‹ ì˜µì…˜ ìƒíƒœ (ê¸°ë³¸ê°’: true)\n    const currentPanningOption = imagePanningOptions[imageIndex] !== undefined ? imagePanningOptions[imageIndex] : true;\n\n    // âœ… ì‹¬í”Œí•œ ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ í•¸ë“¤ëŸ¬ (ë³µì¡í•œ ë¡œì»¬ ìƒíƒœ/ë””ë°”ìš´ìŠ¤ ì œê±°)\n\n    return /*#__PURE__*/_jsxDEV(Card, {\n      sx: {\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column'\n      },\n      children: [/*#__PURE__*/_jsxDEV(CardContent, {\n        sx: {\n          flex: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          gutterBottom: true,\n          sx: {\n            fontSize: '0.9rem',\n            fontWeight: 600,\n            color: 'primary.main',\n            mb: 2\n          },\n          children: pair.textKey.replace('body', 'ëŒ€ì‚¬ ').replace('+body', ' + ëŒ€ì‚¬ ')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 694,\n          columnNumber: 11\n        }, this), pair.originalTexts ? /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mb: 2\n          },\n          children: pair.originalTexts.map((originalText, idx) => {\n            // âœ… ì•ˆì •ì ì¸ ê³ ìœ  í‚¤: textKey ì‚¬ìš© (imageIndexëŠ” ìˆœì„œ ë³€ê²½ ì‹œ ë°”ë€œ)\n            const stableRefKey = `${pair.textKey}-${idx}`;\n            const stableKey = `text-${pair.textKey}-${idx}`;\n\n            // âœ… ìºì‹œëœ ê°’ì´ ìˆìœ¼ë©´ ì‚¬ìš©, ì—†ìœ¼ë©´ ì›ë³¸ ì‚¬ìš©\n            const initialValue = textFieldValuesCache.current[stableRefKey] || originalText;\n            return /*#__PURE__*/_jsxDEV(TextField, {\n              fullWidth: true,\n              multiline: true,\n              rows: 2,\n              defaultValue: initialValue,\n              inputRef: el => {\n                if (el) {\n                  textFieldRefs.current[stableRefKey] = el;\n                  // âœ… imageIndex ê¸°ë°˜ refë„ ìœ ì§€ (AI ìƒì„± ì‹œ ì‚¬ìš©)\n                  textFieldRefs.current[`${imageIndex}-${idx}`] = el;\n                }\n              },\n              onChange: e => {\n                // âœ… ê°’ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ ìºì‹œì— ì €ì¥\n                textFieldValuesCache.current[stableRefKey] = e.target.value;\n              },\n              label: imageUploadMode === 'per-two-scripts' ? `ëŒ€ì‚¬ ${pair.textIndex + idx + 1}` : imageUploadMode === 'per-script' ? `ëŒ€ì‚¬ ${pair.textIndex + 1}` : `ëŒ€ì‚¬ ${idx + 1}`,\n              variant: \"outlined\",\n              size: \"small\",\n              sx: {\n                mb: 1\n              },\n              helperText: idx === 0 ? \"ìˆ˜ì •ëœ í…ìŠ¤íŠ¸ëŠ” ì˜ìƒ ìƒì„± ì‹œ ì‚¬ìš©ë©ë‹ˆë‹¤\" : \"\"\n            }, stableKey, false, {\n              fileName: _jsxFileName,\n              lineNumber: 715,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 705,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          sx: {\n            mb: 2,\n            p: 1.5,\n            bgcolor: 'grey.50',\n            borderRadius: 1,\n            border: '1px solid',\n            borderColor: 'grey.200',\n            fontSize: '0.8rem',\n            lineHeight: 1.4\n          },\n          children: pair.textContent\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 744,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mb: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'space-between',\n              mb: 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"caption\",\n              color: \"text.secondary\",\n              sx: {\n                fontWeight: 600\n              },\n              children: \"AI \\uC0DD\\uC131 \\uC635\\uC158\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 761,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n              size: \"small\",\n              onClick: () => togglePromptExpanded(imageIndex),\n              sx: {\n                p: 0.5\n              },\n              children: isPromptExpanded ? /*#__PURE__*/_jsxDEV(ExpandLess, {\n                fontSize: \"small\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 769,\n                columnNumber: 37\n              }, this) : /*#__PURE__*/_jsxDEV(ExpandMore, {\n                fontSize: \"small\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 769,\n                columnNumber: 71\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 764,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 760,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n            in: isPromptExpanded,\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                bgcolor: 'rgba(25, 118, 210, 0.04)',\n                p: 1.5,\n                borderRadius: 1,\n                border: '1px solid rgba(25, 118, 210, 0.12)'\n              },\n              children: [/*#__PURE__*/_jsxDEV(FormControlLabel, {\n                control: /*#__PURE__*/_jsxDEV(Switch, {\n                  checked: (currentCustomPrompt === null || currentCustomPrompt === void 0 ? void 0 : currentCustomPrompt.enabled) || false,\n                  onChange: e => {\n                    toggleCustomPrompt(imageIndex, e.target.checked);\n                  },\n                  size: \"small\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 777,\n                  columnNumber: 21\n                }, this),\n                label: /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"caption\",\n                  sx: {\n                    fontWeight: 500\n                  },\n                  children: \"\\uCEE4\\uC2A4\\uD140 \\uD504\\uB86C\\uD504\\uD2B8 \\uC0AC\\uC6A9\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 786,\n                  columnNumber: 21\n                }, this),\n                sx: {\n                  mb: 1,\n                  ml: 0\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 775,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                multiline: true,\n                rows: 2,\n                size: \"small\",\n                placeholder: \"\\uC774\\uBBF8\\uC9C0 \\uC0DD\\uC131\\uC744 \\uC704\\uD55C \\uCEE4\\uC2A4\\uD140 \\uD504\\uB86C\\uD504\\uD2B8\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694...\",\n                defaultValue: customPromptValuesCache.current[imageIndex] || (currentCustomPrompt === null || currentCustomPrompt === void 0 ? void 0 : currentCustomPrompt.prompt) || '',\n                inputRef: el => {\n                  if (el) customPromptRefs.current[imageIndex] = el;\n                },\n                onChange: e => {\n                  // âœ… ê°’ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ ìºì‹œì— ì €ì¥\n                  customPromptValuesCache.current[imageIndex] = e.target.value;\n                },\n                variant: \"outlined\",\n                sx: {\n                  display: currentCustomPrompt !== null && currentCustomPrompt !== void 0 && currentCustomPrompt.enabled ? 'block' : 'none',\n                  '& .MuiOutlinedInput-root': {\n                    fontSize: '0.75rem',\n                    bgcolor: 'white'\n                  }\n                },\n                helperText: \"\\uC2E4\\uC81C \\uC601\\uC0C1\\uC5D0\\uC11C\\uB294 \\uAE30\\uC874 \\uB300\\uC0AC\\uAC00 \\uC0AC\\uC6A9\\uB418\\uBA70, \\uC774 \\uD504\\uB86C\\uD504\\uD2B8\\uB294 \\uC774\\uBBF8\\uC9C0 \\uC0DD\\uC131\\uC5D0\\uB9CC \\uC0AC\\uC6A9\\uB429\\uB2C8\\uB2E4.\",\n                autoComplete: \"off\",\n                spellCheck: \"false\"\n              }, `prompt-${imageIndex}`, false, {\n                fileName: _jsxFileName,\n                lineNumber: 793,\n                columnNumber: 17\n              }, this), !(currentCustomPrompt !== null && currentCustomPrompt !== void 0 && currentCustomPrompt.enabled) && /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"caption\",\n                color: \"text.secondary\",\n                sx: {\n                  fontStyle: 'italic'\n                },\n                children: \"\\uAE30\\uBCF8 \\uBAA8\\uB4DC: \\uC704\\uC758 \\uB300\\uC0AC \\uB0B4\\uC6A9\\uC744 \\uAE30\\uBC18\\uC73C\\uB85C \\uC774\\uBBF8\\uC9C0\\uB97C \\uC0DD\\uC131\\uD569\\uB2C8\\uB2E4.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 822,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 774,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 773,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 759,\n          columnNumber: 11\n        }, this), pair.image ? /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            position: 'relative',\n            mb: 2\n          },\n          children: [(() => {\n            // ë¹„ë””ì˜¤ íŒŒì¼ í™•ì¸ (MIME íƒ€ì… + í™•ì¥ì)\n            const fileName = pair.image.name.toLowerCase();\n            const videoExtensions = ['.mp4', '.mov', '.avi', '.webm', '.mkv'];\n            const isVideo = pair.image.type.startsWith('video/') || videoExtensions.some(ext => fileName.endsWith(ext));\n\n            // HEIC íŒŒì¼ í™•ì¸\n            const heicExtensions = ['.heic', '.heif'];\n            const isHEIC = heicExtensions.some(ext => fileName.endsWith(ext));\n            if (isVideo) {\n              return /*#__PURE__*/_jsxDEV(VideoPreview, {\n                file: pair.image\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 844,\n                columnNumber: 26\n              }, this);\n            } else if (isHEIC) {\n              // HEIC íŒŒì¼ì€ ë¸Œë¼ìš°ì €ì—ì„œ ë¯¸ë¦¬ë³´ê¸° ë¶ˆê°€ â†’ íŒŒì¼ëª… í‘œì‹œ\n              return /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  width: '100%',\n                  aspectRatio: '1/1',\n                  backgroundColor: '#f5f5f5',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  flexDirection: 'column',\n                  borderRadius: 1,\n                  border: '2px dashed #ccc'\n                },\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"h6\",\n                  color: \"text.secondary\",\n                  children: \"\\uD83D\\uDCF7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 861,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"caption\",\n                  color: \"text.secondary\",\n                  sx: {\n                    mt: 1,\n                    px: 2,\n                    textAlign: 'center'\n                  },\n                  children: pair.image.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 862,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"caption\",\n                  color: \"text.secondary\",\n                  children: \"(HEIC \\uD30C\\uC77C - \\uBBF8\\uB9AC\\uBCF4\\uAE30 \\uBD88\\uAC00)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 865,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 848,\n                columnNumber: 21\n              }, this);\n            } else {\n              // ì¼ë°˜ ì´ë¯¸ì§€\n              return /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  width: '100%',\n                  aspectRatio: '1/1',\n                  backgroundImage: `url(${URL.createObjectURL(pair.image)})`,\n                  backgroundSize: 'cover',\n                  backgroundPosition: 'center',\n                  borderRadius: 1\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 873,\n                columnNumber: 21\n              }, this);\n            }\n          })(), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              position: 'absolute',\n              top: 8,\n              right: 8,\n              display: 'flex',\n              gap: 0.5\n            },\n            children: [/*#__PURE__*/_jsxDEV(IconButton, {\n              size: \"small\",\n              onClick: () => handleDownloadImage(imageIndex, pair.image),\n              sx: {\n                bgcolor: 'rgba(255,255,255,0.9)',\n                '&:hover': {\n                  bgcolor: 'rgba(255,255,255,1)'\n                }\n              },\n              title: \"\\uC774\\uBBF8\\uC9C0 \\uB2E4\\uC6B4\\uB85C\\uB4DC\",\n              children: /*#__PURE__*/_jsxDEV(Download, {\n                color: \"success\",\n                fontSize: \"small\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 904,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 895,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n              size: \"small\",\n              onClick: () => handleRemoveImage(imageIndex),\n              sx: {\n                bgcolor: 'rgba(255,255,255,0.9)',\n                '&:hover': {\n                  bgcolor: 'rgba(255,255,255,1)'\n                }\n              },\n              title: \"\\uC774\\uBBF8\\uC9C0 \\uC0AD\\uC81C\",\n              children: /*#__PURE__*/_jsxDEV(Delete, {\n                color: \"error\",\n                fontSize: \"small\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 915,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 906,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n              size: \"small\",\n              onClick: () => {\n                var _customPromptRefs$cur2;\n                // âœ… refì—ì„œ í˜„ì¬ í”„ë¡¬í”„íŠ¸ ê°’ ì½ê¸°\n                const currentPromptValue = ((_customPromptRefs$cur2 = customPromptRefs.current[imageIndex]) === null || _customPromptRefs$cur2 === void 0 ? void 0 : _customPromptRefs$cur2.value) || '';\n                const isEnabled = (currentCustomPrompt === null || currentCustomPrompt === void 0 ? void 0 : currentCustomPrompt.enabled) || false;\n                console.log('ğŸ”„ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ í´ë¦­ë¨ - imageIndex:', imageIndex, 'pair:', pair);\n                console.log('ğŸ“ ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ ê°’ (refì—ì„œ ì½ìŒ):', currentPromptValue);\n                handleIndividualGenerate(imageIndex, pair, currentPromptValue, isEnabled);\n              },\n              disabled: isGenerating,\n              sx: {\n                bgcolor: 'rgba(255,255,255,0.9)',\n                '&:hover': {\n                  bgcolor: 'rgba(255,255,255,1)'\n                }\n              },\n              title: \"\\uC774\\uBBF8\\uC9C0 \\uC7AC\\uC0DD\\uC131\",\n              children: isGenerating ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 942,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(Refresh, {\n                color: \"primary\",\n                fontSize: \"small\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 944,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 917,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 888,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"caption\",\n            sx: {\n              position: 'absolute',\n              bottom: 4,\n              left: 8,\n              bgcolor: 'rgba(0,0,0,0.7)',\n              color: 'white',\n              px: 1,\n              py: 0.5,\n              borderRadius: 1\n            },\n            children: pair.image.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 949,\n            columnNumber: 15\n          }, this), !pair.image.type.startsWith('video/') && /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              mt: 2,\n              p: 1.5,\n              bgcolor: 'rgba(76, 175, 80, 0.04)',\n              borderRadius: 1,\n              border: '1px solid rgba(76, 175, 80, 0.2)'\n            },\n            children: /*#__PURE__*/_jsxDEV(FormControlLabel, {\n              control: /*#__PURE__*/_jsxDEV(Switch, {\n                checked: currentPanningOption,\n                onChange: e => togglePanningOption(imageIndex, e.target.checked),\n                size: \"small\",\n                color: \"success\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 973,\n                columnNumber: 23\n              }, this),\n              label: /*#__PURE__*/_jsxDEV(Box, {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"caption\",\n                  sx: {\n                    fontWeight: 600,\n                    display: 'block'\n                  },\n                  children: \"\\uD83C\\uDFAC \\uD328\\uB2DD \\uD6A8\\uACFC\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 982,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"caption\",\n                  color: \"text.secondary\",\n                  sx: {\n                    fontSize: '0.7rem'\n                  },\n                  children: currentPanningOption ? 'ì´ë¯¸ì§€ê°€ ì¢Œìš°/ìƒí•˜ë¡œ ë¶€ë“œëŸ½ê²Œ ì›€ì§ì…ë‹ˆë‹¤' : 'ì´ë¯¸ì§€ê°€ ê³ ì •ë˜ì–´ ì›€ì§ì´ì§€ ì•ŠìŠµë‹ˆë‹¤'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 985,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 981,\n                columnNumber: 23\n              }, this),\n              sx: {\n                ml: 0,\n                width: '100%'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 971,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 964,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 832,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Box, {\n          ...getRootProps(),\n          sx: {\n            border: 2,\n            borderColor: isDragActive ? 'primary.main' : 'grey.300',\n            borderStyle: 'dashed',\n            borderRadius: 1,\n            p: 2,\n            textAlign: 'center',\n            cursor: 'pointer',\n            bgcolor: isDragActive ? 'action.hover' : 'background.paper',\n            mb: 2,\n            aspectRatio: '1/1',\n            display: 'flex',\n            flexDirection: 'column',\n            justifyContent: 'center',\n            '&:hover': {\n              borderColor: 'primary.main',\n              bgcolor: 'action.hover'\n            }\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            ...getInputProps()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1020,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              justifyContent: 'center',\n              width: '100%'\n            },\n            children: /*#__PURE__*/_jsxDEV(CloudUpload, {\n              sx: {\n                fontSize: 32,\n                color: 'grey.400',\n                mb: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1022,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1021,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"caption\",\n            color: \"text.secondary\",\n            children: isDragActive ? 'íŒŒì¼ì„ ë†“ìœ¼ì„¸ìš”' : 'ë¯¸ë””ì–´ ë“œë˜ê·¸ ë˜ëŠ” í´ë¦­'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1024,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"caption\",\n            color: \"text.secondary\",\n            sx: {\n              display: 'block',\n              mt: 0.5,\n              fontSize: '0.7rem'\n            },\n            children: [\"\\uCD5C\\uB300 \", imageUploadMode === 'single-for-all' ? '40MB' : '10MB']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1027,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 998,\n          columnNumber: 13\n        }, this), isGenerating && /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"info\",\n          sx: {\n            mt: 1\n          },\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(CircularProgress, {\n              size: 16,\n              sx: {\n                mr: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1037,\n              columnNumber: 17\n            }, this), currentGenerationType === 'bookmark' ? 'ë¯¸ë””ì–´ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...' : 'ì´ë¯¸ì§€ ìƒì„± ì¤‘...']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1036,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1035,\n          columnNumber: 13\n        }, this), generationSuccess && /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"success\",\n          sx: {\n            mt: 1\n          },\n          children: currentGenerationType === 'bookmark' ? 'ë¯¸ë””ì–´ ë¶ˆëŸ¬ì˜¤ê¸° ì™„ë£Œ!' : 'ì´ë¯¸ì§€ ìƒì„± ì™„ë£Œ!'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1044,\n          columnNumber: 13\n        }, this), generationError && /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"error\",\n          sx: {\n            mt: 1\n          },\n          children: currentGenerationType === 'bookmark' ? 'ë¯¸ë””ì–´ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.' : 'ì´ë¯¸ì§€ ìƒì„± ì‹¤íŒ¨. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1050,\n          columnNumber: 13\n        }, this), uploadError && /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"error\",\n          sx: {\n            mt: 1\n          },\n          children: uploadError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1056,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 692,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          p: 1.5,\n          pt: 0,\n          display: 'flex',\n          flexDirection: 'column',\n          gap: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          fullWidth: true,\n          variant: \"outlined\",\n          size: \"small\",\n          startIcon: /*#__PURE__*/_jsxDEV(AutoFixHigh, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1068,\n            columnNumber: 24\n          }, this),\n          onClick: () => {\n            var _customPromptRefs$cur3;\n            // âœ… refì—ì„œ í˜„ì¬ í”„ë¡¬í”„íŠ¸ ê°’ ì½ê¸°\n            const currentPromptValue = ((_customPromptRefs$cur3 = customPromptRefs.current[imageIndex]) === null || _customPromptRefs$cur3 === void 0 ? void 0 : _customPromptRefs$cur3.value) || '';\n            const isEnabled = (currentCustomPrompt === null || currentCustomPrompt === void 0 ? void 0 : currentCustomPrompt.enabled) || false;\n            console.log('ğŸ–±ï¸ ìë™ìƒì„± ë²„íŠ¼ í´ë¦­ë¨ - imageIndex:', imageIndex, 'pair:', pair);\n            console.log('ğŸ“ ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ ê°’ (refì—ì„œ ì½ìŒ):', currentPromptValue);\n            console.log('âœ… ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ enabled:', isEnabled);\n            handleIndividualGenerate(imageIndex, pair, currentPromptValue, isEnabled);\n          },\n          disabled: isGenerating,\n          sx: {\n            bgcolor: currentCustomPrompt !== null && currentCustomPrompt !== void 0 && currentCustomPrompt.enabled ? 'rgba(25, 118, 210, 0.08)' : 'transparent',\n            borderColor: currentCustomPrompt !== null && currentCustomPrompt !== void 0 && currentCustomPrompt.enabled ? 'primary.main' : 'grey.300',\n            color: currentCustomPrompt !== null && currentCustomPrompt !== void 0 && currentCustomPrompt.enabled ? 'primary.main' : 'text.primary',\n            '&:hover': {\n              bgcolor: currentCustomPrompt !== null && currentCustomPrompt !== void 0 && currentCustomPrompt.enabled ? 'rgba(25, 118, 210, 0.12)' : 'action.hover'\n            }\n          },\n          children: isGenerating ? 'ìƒì„±ì¤‘...' : currentCustomPrompt !== null && currentCustomPrompt !== void 0 && currentCustomPrompt.enabled ? 'ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ë¡œ ìƒì„±' : 'AI ìë™ìƒì„±'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1064,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          fullWidth: true,\n          variant: \"outlined\",\n          size: \"small\",\n          startIcon: /*#__PURE__*/_jsxDEV(VideoLibrary, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1102,\n            columnNumber: 24\n          }, this),\n          onClick: () => handleOpenBookmarkModal(imageIndex),\n          disabled: isGenerating,\n          sx: {\n            borderColor: 'secondary.main',\n            color: 'secondary.main',\n            '&:hover': {\n              bgcolor: 'rgba(156, 39, 176, 0.08)',\n              borderColor: 'secondary.main'\n            }\n          },\n          children: \"\\uBBF8\\uB514\\uC5B4 \\uBD88\\uB7EC\\uC624\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1098,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1063,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 691,\n      columnNumber: 7\n    }, this);\n  }, \"yd//yJtVY5DqPYzQY0xGsdgoRlk=\", false, function () {\n    return [useDropzone];\n  })), \"yd//yJtVY5DqPYzQY0xGsdgoRlk=\", false, function () {\n    return [useDropzone];\n  });\n  return /*#__PURE__*/_jsxDEV(Box, {\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h6\",\n      gutterBottom: true,\n      sx: {\n        mb: 3\n      },\n      children: \"\\uD14D\\uC2A4\\uD2B8-\\uC774\\uBBF8\\uC9C0 \\uB9E4\\uCE6D \\uAD00\\uB9AC\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1123,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"body2\",\n      color: \"text.secondary\",\n      sx: {\n        mb: 3\n      },\n      children: [\"\\uAC01 \\uD14D\\uC2A4\\uD2B8\\uC5D0 \\uB300\\uC751\\uB418\\uB294 \\uC774\\uBBF8\\uC9C0\\uB97C \\uAC1C\\uBCC4\\uC801\\uC73C\\uB85C \\uAD00\\uB9AC\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4. \\uB4DC\\uB798\\uADF8\\uC564\\uB4DC\\uB86D\\uC73C\\uB85C \\uC774\\uBBF8\\uC9C0\\uB97C \\uC5C5\\uB85C\\uB4DC\\uD558\\uAC70\\uB098 AI\\uB85C \\uC790\\uB3D9 \\uC0DD\\uC131\\uD558\\uC138\\uC694.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1130,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        component: \"span\",\n        variant: \"caption\",\n        color: \"text.secondary\",\n        children: [\"\\uD30C\\uC77C \\uD06C\\uAE30 \\uC81C\\uD55C: \", imageUploadMode === 'single-for-all' ? 'ìµœëŒ€ 40MB' : 'ê° íŒŒì¼ ìµœëŒ€ 10MB']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1131,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1127,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 2,\n      children: textImagePairs.map((pair, index) => /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        sm: 6,\n        md: 4,\n        children: /*#__PURE__*/_jsxDEV(IndividualDropZone, {\n          imageIndex: pair.imageIndex,\n          pair: pair\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1139,\n          columnNumber: 13\n        }, this)\n      }, `dropzone-${pair.imageIndex}-${pair.textKey}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1138,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1136,\n      columnNumber: 7\n    }, this), textImagePairs.length === 0 && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"info\",\n      sx: {\n        mt: 2\n      },\n      children: \"\\uB300\\uBCF8\\uC744 \\uBA3C\\uC800 \\uC791\\uC131\\uD574\\uC8FC\\uC138\\uC694.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1145,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(MediaBookmarkModal, {\n      open: bookmarkModalOpen,\n      onClose: handleCloseBookmarkModal,\n      onSelect: handleSelectBookmarkMedia\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1151,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1122,\n    columnNumber: 5\n  }, this);\n}, \"EY3mJgTioQFx/K9HdJEUd6pyp8Y=\")), \"EY3mJgTioQFx/K9HdJEUd6pyp8Y=\");\n\n// Display name for debugging\n_c2 = TextImagePairManager;\nTextImagePairManager.displayName = 'TextImagePairManager';\nexport default TextImagePairManager;\nvar _c, _c2;\n$RefreshReg$(_c, \"TextImagePairManager$forwardRef\");\n$RefreshReg$(_c2, \"TextImagePairManager\");","map":{"version":3,"names":["React","useState","useCallback","useMemo","memo","useEffect","useRef","useImperativeHandle","forwardRef","Box","Typography","Button","Grid","Card","CardContent","IconButton","Alert","CircularProgress","TextField","FormControlLabel","Switch","Collapse","CloudUpload","Delete","AutoFixHigh","Refresh","Download","ExpandMore","ExpandLess","Movie","MovieIcon","VideoLibrary","useDropzone","MediaBookmarkModal","apiService","jsxDEV","_jsxDEV","TextImagePairManager","_s3","_c","content","imageUploadMode","images","jobId","onChange","ref","_s","$RefreshSig$","_s2","generationStatus","setGenerationStatus","generationType","setGenerationType","uploadErrors","setUploadErrors","customPrompts","setCustomPrompts","promptsExpanded","setPromptsExpanded","bookmarkModalOpen","setBookmarkModalOpen","currentBookmarkIndex","setCurrentBookmarkIndex","imagePanningOptions","setImagePanningOptions","textFieldRefs","customPromptRefs","textFieldValuesCache","customPromptValuesCache","imagesRef","current","getEditedData","editedTexts","Object","keys","forEach","key","_textFieldRefs$curren","parts","split","length","imageIndex","parseInt","textIdx","isNaN","value","customPromptsData","indexStr","_customPromptRefs$cur","_customPrompts$imageI","promptValue","enabled","prompt","toggleCustomPrompt","prev","_prev$imageIndex","togglePromptExpanded","togglePanningOption","newOptions","console","log","textImagePairs","bodyTexts","entries","filter","startsWith","trim","map","index","imageMap","Map","img","storedIndex","__imageIndex","set","Array","from","idx","file","name","pairs","foundImage","get","customPrompt","originalTexts","push","textIndex","textKey","textContent","image","isGenerating","useCustomPrompt","i","Math","floor","text1","text2","Boolean","allTexts","replace","join","allContent","handleIndividualImageUpload","acceptedFiles","newErrors","maxSize","maxSizeText","size","fileName","toLowerCase","isImageByType","type","isVideoByType","imageExtensions","videoExtensions","isImageByExt","some","ext","endsWith","isVideoByExt","isImage","isVideo","currentImages","newImages","sort","a","b","_imageIndex","_imageIndex2","indexA","indexB","handleIndividualGenerate","pair","requestBody","job_id","custom_prompt","_textFieldRefs$curren2","_textFieldRefs$curren3","editedText0","editedText1","hasEditedText0","hasEditedText1","text","additional_context","texts","response","fetch","method","headers","body","JSON","stringify","ok","errorData","json","Error","detail","data","imageUrl","image_url","imageResponse","blob","File","setTimeout","newStatus","error","handleRemoveImage","handleDownloadImage","link","document","createElement","href","download","appendChild","click","removeChild","url","URL","createObjectURL","revokeObjectURL","handleOpenBookmarkModal","handleCloseBookmarkModal","handleSelectBookmarkMedia","media","mediaType","filename","copyBookmarkVideo","copyBookmarkImage","status","_filename$split$pop","fileUrl","file_url","fileResponse","pop","mimeType","message","VideoPreview","videoUrl","setVideoUrl","sx","position","children","src","style","width","aspectRatio","objectFit","borderRadius","autoPlay","muted","loop","playsInline","controls","onError","e","_jsxFileName","lineNumber","columnNumber","top","left","bgcolor","p","display","alignItems","fontSize","color","variant","ml","IndividualDropZone","onDrop","getRootProps","getInputProps","isDragActive","accept","maxFiles","multiple","generationError","generationSuccess","currentGenerationType","uploadError","isPromptExpanded","currentCustomPrompt","currentPanningOption","undefined","height","flexDirection","flex","gutterBottom","fontWeight","mb","originalText","stableRefKey","stableKey","initialValue","fullWidth","multiline","rows","defaultValue","inputRef","el","target","label","helperText","border","borderColor","lineHeight","justifyContent","onClick","in","control","checked","placeholder","autoComplete","spellCheck","fontStyle","heicExtensions","isHEIC","backgroundColor","mt","px","textAlign","backgroundImage","backgroundSize","backgroundPosition","right","gap","title","_customPromptRefs$cur2","currentPromptValue","isEnabled","disabled","bottom","py","borderStyle","cursor","severity","mr","pt","startIcon","_customPromptRefs$cur3","component","container","spacing","item","xs","sm","md","open","onClose","onSelect","_c2","displayName","$RefreshReg$"],"sources":["/zstus/frontend/src/components/TextImagePairManager.tsx"],"sourcesContent":["import React, { useState, useCallback, useMemo, memo, useEffect, useRef, useImperativeHandle, forwardRef } from 'react';\nimport {\n  Box,\n  Paper,\n  Typography,\n  Button,\n  Grid,\n  Card,\n  CardContent,\n  IconButton,\n  Chip,\n  Alert,\n  CircularProgress,\n  TextField,\n  FormControlLabel,\n  Switch,\n  Collapse,\n} from '@mui/material';\nimport {\n  CloudUpload,\n  Delete,\n  AutoFixHigh,\n  Refresh,\n  Image as ImageIcon,\n  Download,\n  Edit as EditIcon,\n  ExpandMore,\n  ExpandLess,\n  Movie as MovieIcon,\n  Warning,\n  VideoLibrary\n} from '@mui/icons-material';\nimport { useDropzone } from 'react-dropzone';\nimport { ReelsContent, ImageUploadMode, TextImagePair, CustomPrompt, BookmarkVideo, BookmarkImage } from '../types';\nimport MediaBookmarkModal from './MediaBookmarkModal';\nimport apiService from '../services/api';\n\ninterface TextImagePairManagerProps {\n  content: ReelsContent;\n  imageUploadMode: ImageUploadMode;\n  images: File[];\n  jobId: string;\n  onChange: (images: File[], mode: ImageUploadMode) => void;\n}\n\n// âœ… refë¥¼ í†µí•´ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•œ ë©”ì„œë“œ íƒ€ì… ì •ì˜\nexport interface TextImagePairManagerRef {\n  getEditedData: () => {\n    editedTexts: { [key: number]: string[] };\n    customPrompts: { [key: number]: CustomPrompt };\n    imagePanningOptions: { [key: number]: boolean };\n  };\n}\n\nconst TextImagePairManager = forwardRef<TextImagePairManagerRef, TextImagePairManagerProps>(({\n  content,\n  imageUploadMode,\n  images,\n  jobId,\n  onChange,\n}, ref) => {\n  const [generationStatus, setGenerationStatus] = useState<{ [key: string]: string }>({});\n  const [generationType, setGenerationType] = useState<{ [key: number]: 'ai' | 'bookmark' }>({});\n  const [uploadErrors, setUploadErrors] = useState<{ [key: number]: string }>({});\n  const [customPrompts, setCustomPrompts] = useState<{ [key: number]: CustomPrompt }>({});\n  const [promptsExpanded, setPromptsExpanded] = useState<{ [key: number]: boolean }>({});\n  const [bookmarkModalOpen, setBookmarkModalOpen] = useState<boolean>(false);\n  const [currentBookmarkIndex, setCurrentBookmarkIndex] = useState<number | null>(null);\n\n  // ğŸ¨ ì´ë¯¸ì§€ë³„ íŒ¨ë‹ ì˜µì…˜ ìƒíƒœ (ê¸°ë³¸ê°’: true - íŒ¨ë‹ í™œì„±í™”)\n  const [imagePanningOptions, setImagePanningOptions] = useState<{ [key: number]: boolean }>({});\n\n  // âœ… Uncontrolled TextFieldë¥¼ ìœ„í•œ ref ì €ì¥ì†Œ\n  const textFieldRefs = useRef<{ [key: string]: HTMLInputElement }>({});\n  const customPromptRefs = useRef<{ [key: number]: HTMLInputElement }>({});\n\n  // âœ… TextFieldì˜ í˜„ì¬ ê°’ ìºì‹œ (ì¬ë Œë”ë§ ì‹œ ê°’ ë³µì›ìš©)\n  const textFieldValuesCache = useRef<{ [key: string]: string }>({});\n  const customPromptValuesCache = useRef<{ [key: number]: string }>({});\n\n  // ìµœì‹  images ìƒíƒœë¥¼ ì¶”ì í•˜ê¸° ìœ„í•œ ref\n  const imagesRef = useRef<File[]>(images);\n\n  // images propì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ ref ì—…ë°ì´íŠ¸\n  useEffect(() => {\n    imagesRef.current = images;\n  }, [images]);\n\n  // âœ… refë¥¼ í†µí•´ ì™¸ë¶€ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ê°ˆ ìˆ˜ ìˆë„ë¡ ë©”ì„œë“œ ì œê³µ\n  useImperativeHandle(ref, () => ({\n    getEditedData: () => {\n      // âœ… TextField refì—ì„œ í˜„ì¬ ê°’ ì½ê¸°\n      const editedTexts: { [key: number]: string[] } = {};\n\n      Object.keys(textFieldRefs.current).forEach(key => {\n        // âœ… imageIndex-textIdx í˜•íƒœë§Œ ì²˜ë¦¬ (ì˜ˆ: \"0-0\", \"1-1\")\n        // stableRefKey í˜•íƒœ(ì˜ˆ: \"body1-0\")ëŠ” ê±´ë„ˆëœ€\n        const parts = key.split('-');\n        if (parts.length !== 2) return; // body1+body2 ê°™ì€ ê²½ìš° ê±´ë„ˆëœ€\n\n        const imageIndex = parseInt(parts[0]);\n        const textIdx = parseInt(parts[1]);\n\n        // ìˆ«ìë¡œ íŒŒì‹± ê°€ëŠ¥í•œ ê²½ìš°ë§Œ ì²˜ë¦¬\n        if (isNaN(imageIndex) || isNaN(textIdx)) return;\n\n        const value = textFieldRefs.current[key]?.value || '';\n\n        if (!editedTexts[imageIndex]) {\n          editedTexts[imageIndex] = [];\n        }\n        editedTexts[imageIndex][textIdx] = value;\n      });\n\n      // âœ… customPrompt refì—ì„œ í˜„ì¬ ê°’ ì½ê¸°\n      const customPromptsData: { [key: number]: CustomPrompt } = {};\n\n      Object.keys(customPromptRefs.current).forEach(indexStr => {\n        const imageIndex = parseInt(indexStr);\n        const promptValue = customPromptRefs.current[imageIndex]?.value || '';\n        const enabled = customPrompts[imageIndex]?.enabled || false;\n\n        if (promptValue || enabled) {\n          customPromptsData[imageIndex] = {\n            imageIndex,\n            prompt: promptValue,\n            enabled\n          };\n        }\n      });\n\n      return {\n        editedTexts,\n        customPrompts: customPromptsData,\n        imagePanningOptions: imagePanningOptions\n      };\n    }\n  }), [customPrompts, imagePanningOptions]); // customPromptsì™€ imagePanningOptions ì˜ì¡´\n\n  // âœ… ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ í† ê¸€ (enabled ìƒíƒœë§Œ ê´€ë¦¬)\n  const toggleCustomPrompt = (imageIndex: number, enabled: boolean) => {\n    setCustomPrompts(prev => ({\n      ...prev,\n      [imageIndex]: {\n        imageIndex,\n        prompt: prev[imageIndex]?.prompt || '',\n        enabled\n      }\n    }));\n  };\n\n  const togglePromptExpanded = (imageIndex: number) => {\n    setPromptsExpanded(prev => ({\n      ...prev,\n      [imageIndex]: !prev[imageIndex]\n    }));\n  };\n\n  // ğŸ¨ íŒ¨ë‹ ì˜µì…˜ í† ê¸€ í•¨ìˆ˜\n  const togglePanningOption = (imageIndex: number, enabled: boolean) => {\n    setImagePanningOptions(prev => {\n      const newOptions = {\n        ...prev,\n        [imageIndex]: enabled\n      };\n      console.log(`ğŸ¨ íŒ¨ë‹ ì˜µì…˜ ë³€ê²½ - imageIndex: ${imageIndex}, enabled: ${enabled}`);\n      console.log(`ğŸ¨ ì „ì²´ íŒ¨ë‹ ì˜µì…˜ ìƒíƒœ:`, newOptions);\n      return newOptions;\n    });\n  };\n\n  // í…ìŠ¤íŠ¸-ì´ë¯¸ì§€ ìŒ ë°ì´í„° ìƒì„± (useMemoë¡œ ìµœì í™”)\n  // âœ… editedTexts ì˜ì¡´ì„± ì œê±° - TextField ì…ë ¥ ì‹œ ì¬ê³„ì‚° ë°©ì§€\n  const textImagePairs = useMemo((): (TextImagePair & { imageIndex: number })[] => {\n    const bodyTexts = Object.entries(content)\n      .filter(([key, value]) => key.startsWith('body') && value?.trim())\n      .map(([key, value], index) => ({ key, value: value.trim(), index }));\n\n    // ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì§„ ì´ë¯¸ì§€ë“¤ì„ ë§µìœ¼ë¡œ ìƒì„±\n    const imageMap = new Map<number, File>();\n    images.forEach(img => {\n      const storedIndex = (img as any).__imageIndex;\n      if (typeof storedIndex === 'number') {\n        imageMap.set(storedIndex, img);\n      }\n    });\n\n    console.log('ğŸ—ºï¸ createTextImagePairs - imageMap:', Array.from(imageMap.entries()).map(([idx, file]) => `${idx}:${file.name}`));\n    console.log('ğŸ“ bodyTexts ê¸¸ì´:', bodyTexts.length, 'imageUploadMode:', imageUploadMode);\n    console.log('ğŸ” ë°›ì€ images ë°°ì—´:', images.map(img => `${img.name}(__imageIndex:${(img as any).__imageIndex})`));\n\n    const pairs: (TextImagePair & { imageIndex: number })[] = [];\n\n    if (imageUploadMode === 'per-script') {\n      // í…ìŠ¤íŠ¸ 1ê°œë‹¹ ì´ë¯¸ì§€ 1ê°œ\n      bodyTexts.forEach(({ key, value, index }) => {\n        const foundImage = imageMap.get(index);\n        const customPrompt = customPrompts[index];\n\n        // ì›ë³¸ í…ìŠ¤íŠ¸ ë°°ì—´ (per-scriptëŠ” 1ê°œ)\n        const originalTexts = [value];\n\n        console.log(`ğŸ“‹ per-script: textIndex=${index}, imageIndex=${index}, foundImage=${foundImage?.name || 'null'}`);\n        pairs.push({\n          textIndex: index,\n          textKey: key,\n          textContent: value,\n          image: foundImage || null,\n          imageIndex: index,\n          isGenerating: false,\n          customPrompt: customPrompt?.prompt || '',\n          useCustomPrompt: customPrompt?.enabled || false,\n          originalTexts: originalTexts,\n        });\n      });\n    } else if (imageUploadMode === 'per-two-scripts') {\n      // í…ìŠ¤íŠ¸ 2ê°œë‹¹ ì´ë¯¸ì§€ 1ê°œ\n      for (let i = 0; i < bodyTexts.length; i += 2) {\n        const imageIndex = Math.floor(i / 2);\n        const text1 = bodyTexts[i];\n        const text2 = bodyTexts[i + 1];\n\n        if (text1) {\n          const foundImage = imageMap.get(imageIndex);\n          const customPrompt = customPrompts[imageIndex];\n\n          // ì›ë³¸ í…ìŠ¤íŠ¸ ë°°ì—´\n          const originalTexts = [text1.value, text2?.value].filter(Boolean) as string[];\n\n          console.log(`ğŸ“‹ per-two-scripts: textIndex=${i}, imageIndex=${imageIndex}, foundImage=${foundImage?.name || 'null'}`);\n          pairs.push({\n            textIndex: i,\n            textKey: `${text1.key}${text2 ? `+${text2.key}` : ''}`,\n            textContent: `${text1.value}${text2 ? ` / ${text2.value}` : ''}`,\n            image: foundImage || null,\n            imageIndex: imageIndex,\n            isGenerating: false,\n            customPrompt: customPrompt?.prompt || '',\n            useCustomPrompt: customPrompt?.enabled || false,\n            originalTexts: originalTexts,\n          });\n        }\n      }\n    } else if (imageUploadMode === 'single-for-all') {\n      // ëª¨ë“  í…ìŠ¤íŠ¸ì— ì´ë¯¸ì§€ 1ê°œ\n      const allTexts = bodyTexts.map(({ key, value }) => key.replace('body', 'ëŒ€ì‚¬')).join(' + ');\n      const allContent = bodyTexts.map(({ value }) => value).join(' / ');\n      const foundImage = imageMap.get(0);\n      const customPrompt = customPrompts[0];\n\n      // ì›ë³¸ í…ìŠ¤íŠ¸ ë°°ì—´ (ëª¨ë“  ëŒ€ì‚¬)\n      const originalTexts = bodyTexts.map(({ value }) => value);\n\n      console.log(`ğŸ“‹ single-for-all: ëª¨ë“  ëŒ€ì‚¬, imageIndex=0, foundImage=${foundImage?.name || 'null'}`);\n      pairs.push({\n        textIndex: 0,\n        textKey: allTexts,\n        textContent: allContent,\n        image: foundImage || null,\n        imageIndex: 0,\n        isGenerating: false,\n        customPrompt: customPrompt?.prompt || '',\n        useCustomPrompt: customPrompt?.enabled || false,\n        originalTexts: originalTexts,\n      });\n    }\n\n    console.log('ğŸ¯ ìµœì¢… pairs ê°œìˆ˜:', pairs.length);\n    return pairs;\n  }, [content, images, imageUploadMode, customPrompts]);\n  \n  // í˜„ì¬ images ë°°ì—´ ìƒíƒœ ë¡œê¹…\n  console.log('ğŸ“¦ í˜„ì¬ images ë°°ì—´ ê¸¸ì´:', images.length);\n  console.log('ğŸ“¦ í˜„ì¬ images ë°°ì—´:', images.length > 0 ? images.map(img => `${img.name}(index:${(img as any).__imageIndex})`) : 'ë¹ˆ ë°°ì—´');\n  console.log('ğŸ® generationStatus:', generationStatus);\n\n  // ê°œë³„ ì´ë¯¸ì§€ ì—…ë¡œë“œ í•¸ë“¤ëŸ¬\n  const handleIndividualImageUpload = useCallback((imageIndex: number, acceptedFiles: File[]) => {\n    if (acceptedFiles.length === 0) return;\n\n    const file = acceptedFiles[0];\n\n    // ê¸°ì¡´ ì—ëŸ¬ ìƒíƒœ ì œê±°\n    setUploadErrors(prev => {\n      const newErrors = { ...prev };\n      delete newErrors[imageIndex];\n      return newErrors;\n    });\n\n    // íŒŒì¼ ìœ íš¨ì„± ê²€ì¦ (ëª¨ë“œì— ë”°ë¼ ë‹¤ë¥¸ ì œí•œ)\n    const maxSize = imageUploadMode === 'single-for-all' ? 80 * 1024 * 1024 : 40 * 1024 * 1024;\n    const maxSizeText = imageUploadMode === 'single-for-all' ? '80MB' : '40MB';\n\n    if (file.size > maxSize) {\n      setUploadErrors(prev => ({ ...prev, [imageIndex]: `íŒŒì¼ í¬ê¸°ê°€ ${maxSizeText}ë¥¼ ì´ˆê³¼í•©ë‹ˆë‹¤` }));\n      return;\n    }\n\n    // íŒŒì¼ í˜•ì‹ ê²€ì¦ (MIME íƒ€ì… + í™•ì¥ì)\n    const fileName = file.name.toLowerCase();\n    const isImageByType = file.type.startsWith('image/');\n    const isVideoByType = file.type.startsWith('video/');\n\n    // HEIC/HEIFëŠ” ë¸Œë¼ìš°ì €ì—ì„œ MIME íƒ€ì…ì´ ì—†ì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ í™•ì¥ìë¡œ ê²€ì¦\n    const imageExtensions = ['.jpg', '.jpeg', '.png', '.gif', '.webp', '.bmp', '.heic', '.heif'];\n    const videoExtensions = ['.mp4', '.mov', '.avi', '.webm', '.mkv'];\n\n    const isImageByExt = imageExtensions.some(ext => fileName.endsWith(ext));\n    const isVideoByExt = videoExtensions.some(ext => fileName.endsWith(ext));\n\n    const isImage = isImageByType || isImageByExt;\n    const isVideo = isVideoByType || isVideoByExt;\n\n    if (!isImage && !isVideo) {\n      setUploadErrors(prev => ({ ...prev, [imageIndex]: 'ì´ë¯¸ì§€ ë˜ëŠ” ë¹„ë””ì˜¤ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤' }));\n      return;\n    }\n\n    console.log('ğŸ”§ handleIndividualImageUpload - imageIndex:', imageIndex, 'fileName:', file.name);\n\n    // íŒŒì¼ì— ìœ„ì¹˜ ì •ë³´ ì¶”ê°€\n    (file as any).__imageIndex = imageIndex;\n    console.log('ğŸ·ï¸ íŒŒì¼ì— __imageIndex ì„¤ì •:', imageIndex);\n\n    // ìµœì‹  images ìƒíƒœë¥¼ ê°€ì ¸ì™€ì„œ ì—…ë°ì´íŠ¸\n    const currentImages = imagesRef.current;\n    console.log('ğŸ”„ ì—…ë°ì´íŠ¸ ì „ currentImages (ref):', currentImages.map(img => `${img.name}(index:${(img as any).__imageIndex})`));\n\n    // í˜„ì¬ imagesì—ì„œ í•´ë‹¹ imageIndexë¥¼ ê°€ì§„ íŒŒì¼ ì œê±°í•˜ê³  ìƒˆ íŒŒì¼ ì¶”ê°€\n    const newImages = currentImages.filter(img => (img as any).__imageIndex !== imageIndex);\n    newImages.push(file);\n\n    // imageIndex ìˆœìœ¼ë¡œ ì •ë ¬\n    newImages.sort((a, b) => {\n      const indexA = (a as any).__imageIndex ?? 0;\n      const indexB = (b as any).__imageIndex ?? 0;\n      return indexA - indexB;\n    });\n\n    console.log('ğŸ“Š ì—…ë°ì´íŠ¸ëœ images ë°°ì—´:', newImages.map(img => `${img.name}(index:${(img as any).__imageIndex})`));\n\n    onChange(newImages, imageUploadMode);\n  }, [imageUploadMode, onChange]); // images ì˜ì¡´ì„± ì œê±°\n\n  // ê°œë³„ ì´ë¯¸ì§€ ìë™ ìƒì„±\n  const handleIndividualGenerate = async (imageIndex: number, pair: TextImagePair & { imageIndex: number }, customPrompt?: string, useCustomPrompt?: boolean) => {\n    console.log('ğŸ¤– handleIndividualGenerate ì‹œì‘ - imageIndex:', imageIndex, 'pair:', pair, 'customPrompt:', customPrompt, 'useCustomPrompt:', useCustomPrompt);\n    setGenerationStatus(prev => ({ ...prev, [imageIndex]: 'generating' }));\n    setGenerationType(prev => ({ ...prev, [imageIndex]: 'ai' }));\n\n    try {\n      // ìš”ì²­ ë°”ë”” êµ¬ì„±\n      let requestBody: any = {\n        job_id: jobId  // Job ID ì¶”ê°€\n      };\n\n      // ğŸ¯ ìš°ì„ ìˆœìœ„ 1: ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸\n      if (useCustomPrompt && customPrompt?.trim()) {\n        requestBody.custom_prompt = customPrompt.trim();\n        console.log('ğŸ“ [ìš°ì„ ìˆœìœ„ 1] ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ ì‚¬ìš©:', customPrompt.trim());\n      }\n      // ğŸ¯ ìš°ì„ ìˆœìœ„ 2: ìˆ˜ì •ëœ í…ìŠ¤íŠ¸ (TextField refì—ì„œ ì½ê¸°)\n      else {\n        // âœ… TextField refì—ì„œ í˜„ì¬ ì…ë ¥ëœ ê°’ ì½ê¸°\n        const editedText0 = textFieldRefs.current[`${imageIndex}-0`]?.value || '';\n        const editedText1 = textFieldRefs.current[`${imageIndex}-1`]?.value || '';\n\n        // originalTexts ê°€ì ¸ì˜¤ê¸°\n        const originalTexts = pair.originalTexts || [];\n\n        // ìˆ˜ì •ëœ í…ìŠ¤íŠ¸ê°€ ìˆëŠ”ì§€ í™•ì¸\n        const hasEditedText0 = editedText0 && editedText0 !== originalTexts[0];\n        const hasEditedText1 = editedText1 && editedText1 !== originalTexts[1];\n\n        if (hasEditedText0 || hasEditedText1) {\n          // ìˆ˜ì •ëœ í…ìŠ¤íŠ¸ ì‚¬ìš©\n          requestBody.text = editedText0 || originalTexts[0];\n          if (editedText1 || originalTexts[1]) {\n            requestBody.additional_context = editedText1 || originalTexts[1];\n          }\n          console.log('ğŸ“ [ìš°ì„ ìˆœìœ„ 2] ìˆ˜ì •ëœ í…ìŠ¤íŠ¸ ì‚¬ìš© (refì—ì„œ ì½ìŒ):', requestBody.text);\n        } else {\n          // ì›ë³¸ í…ìŠ¤íŠ¸ ì‚¬ìš©\n          const texts = pair.textContent.split(' / ');\n          requestBody.text = texts[0];\n          if (texts.length > 1) {\n            requestBody.additional_context = texts[1];\n          }\n          console.log('ğŸ“ [ìš°ì„ ìˆœìœ„ 3] ì›ë³¸ í…ìŠ¤íŠ¸ ì‚¬ìš©:', texts[0]);\n        }\n      }\n\n      console.log('ğŸš€ ìš”ì²­ ë°”ë”” (Job ID í¬í•¨):', requestBody);\n\n      const response = await fetch('/generate-single-image', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(requestBody),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.detail || 'ì´ë¯¸ì§€ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');\n      }\n\n      const data = await response.json();\n      const imageUrl = data.image_url;\n\n      // ìƒì„±ëœ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê³  File ê°ì²´ë¡œ ë³€í™˜\n      const imageResponse = await fetch(imageUrl);\n      if (!imageResponse.ok) {\n        throw new Error('ìƒì„±ëœ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');\n      }\n\n      const blob = await imageResponse.blob();\n      const fileName = `generated_image_pair_${imageIndex}.png`;\n      const file = new File([blob], fileName, { type: 'image/png' });\n\n      console.log('ğŸ“¸ ì´ë¯¸ì§€ ìƒì„± ì™„ë£Œ - fileName:', fileName, 'í˜¸ì¶œí•  imageIndex:', imageIndex);\n\n      // ì´ë¯¸ì§€ ë°°ì—´ ì—…ë°ì´íŠ¸\n      handleIndividualImageUpload(imageIndex, [file]);\n      \n      setGenerationStatus(prev => ({ ...prev, [imageIndex]: 'success' }));\n      setTimeout(() => {\n        setGenerationStatus(prev => {\n          const newStatus = { ...prev };\n          delete newStatus[imageIndex];\n          return newStatus;\n        });\n      }, 3000);\n\n    } catch (error) {\n      console.error('ê°œë³„ ì´ë¯¸ì§€ ìƒì„± ì˜¤ë¥˜:', error);\n      setGenerationStatus(prev => ({ ...prev, [imageIndex]: 'error' }));\n      setTimeout(() => {\n        setGenerationStatus(prev => {\n          const newStatus = { ...prev };\n          delete newStatus[imageIndex];\n          return newStatus;\n        });\n      }, 5000);\n    }\n  };\n\n  // ê°œë³„ ì´ë¯¸ì§€ ì‚­ì œ (ê°œì„ ë¨)\n  const handleRemoveImage = (imageIndex: number) => {\n    console.log('ğŸ—‘ï¸ ì´ë¯¸ì§€ ì‚­ì œ ìš”ì²­ - imageIndex:', imageIndex);\n\n    // ìµœì‹  images ìƒíƒœë¥¼ ê°€ì ¸ì™€ì„œ ì‚­ì œ\n    const currentImages = imagesRef.current;\n    const newImages = currentImages.filter(img => (img as any).__imageIndex !== imageIndex);\n    \n    // í•´ë‹¹ ì¸ë±ìŠ¤ì˜ ì—ëŸ¬ ìƒíƒœë„ í•¨ê»˜ ì œê±°\n    setUploadErrors(prev => {\n      const newErrors = { ...prev };\n      delete newErrors[imageIndex];\n      return newErrors;\n    });\n    \n    // ìƒì„± ìƒíƒœë„ í•¨ê»˜ ì œê±°\n    setGenerationStatus(prev => {\n      const newStatus = { ...prev };\n      delete newStatus[imageIndex];\n      return newStatus;\n    });\n    \n    console.log('âœ… ì´ë¯¸ì§€ ì‚­ì œ ì™„ë£Œ - imageIndex:', imageIndex);\n    console.log('ğŸ“Š ë‚¨ì€ ì´ë¯¸ì§€:', newImages.map(img => `${img.name}(index:${(img as any).__imageIndex})`));\n    \n    onChange(newImages, imageUploadMode);\n  };\n\n  // ê°œë³„ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ\n  const handleDownloadImage = async (imageIndex: number, image: File) => {\n    try {\n      // ìƒì„±ëœ ì´ë¯¸ì§€ì¸ì§€ í™•ì¸ (filenameìœ¼ë¡œ íŒë‹¨)\n      if (image.name.startsWith('generated_')) {\n        // ë°±ì—”ë“œ ë‹¤ìš´ë¡œë“œ APIë¥¼ í†µí•´ ë‹¤ìš´ë¡œë“œ\n        const link = document.createElement('a');\n        link.href = `/download-image/${image.name}`;\n        link.download = `reels_image_${imageIndex + 1}.png`;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n      } else {\n        // ì—…ë¡œë“œëœ íŒŒì¼ì€ ì§ì ‘ ë‹¤ìš´ë¡œë“œ\n        const url = URL.createObjectURL(image);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `reels_image_${imageIndex + 1}_${image.name}`;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        URL.revokeObjectURL(url);\n      }\n      console.log('ğŸ’¾ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ ì™„ë£Œ - imageIndex:', imageIndex, 'fileName:', image.name);\n    } catch (error) {\n      console.error('ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ ì˜¤ë¥˜:', error);\n    }\n  };\n\n  // ë¶ë§ˆí¬ ëª¨ë‹¬ ì—´ê¸°\n  const handleOpenBookmarkModal = (imageIndex: number) => {\n    console.log('ğŸ¬ ë¶ë§ˆí¬ ëª¨ë‹¬ ì—´ê¸° - imageIndex:', imageIndex);\n    setCurrentBookmarkIndex(imageIndex);\n    setBookmarkModalOpen(true);\n  };\n\n  // ë¶ë§ˆí¬ ëª¨ë‹¬ ë‹«ê¸°\n  const handleCloseBookmarkModal = () => {\n    setBookmarkModalOpen(false);\n    setCurrentBookmarkIndex(null);\n  };\n\n  // ë¶ë§ˆí¬ ë¯¸ë””ì–´(ë¹„ë””ì˜¤/ì´ë¯¸ì§€) ì„ íƒ í•¸ë“¤ëŸ¬\n  const handleSelectBookmarkMedia = async (media: BookmarkVideo | BookmarkImage, mediaType: 'video' | 'image') => {\n    if (currentBookmarkIndex === null) return;\n\n    console.log(`âœ… ë¶ë§ˆí¬ ${mediaType === 'video' ? 'ë¹„ë””ì˜¤' : 'ì´ë¯¸ì§€'} ì„ íƒ:`, media.filename, 'imageIndex:', currentBookmarkIndex);\n\n    try {\n      // ìƒì„± ìƒíƒœ ì—…ë°ì´íŠ¸\n      setGenerationStatus(prev => ({ ...prev, [currentBookmarkIndex]: 'generating' }));\n      setGenerationType(prev => ({ ...prev, [currentBookmarkIndex]: 'bookmark' }));\n\n      // ë°±ì—”ë“œ API í˜¸ì¶œ: ë¶ë§ˆí¬ ë¯¸ë””ì–´ë¥¼ Job í´ë”ë¡œ ë³µì‚¬\n      const response = mediaType === 'video'\n        ? await apiService.copyBookmarkVideo(jobId, media.filename, currentBookmarkIndex)\n        : await apiService.copyBookmarkImage(jobId, media.filename, currentBookmarkIndex);\n\n      if (response.status === 'success') {\n        // ë³µì‚¬ëœ íŒŒì¼ì„ File ê°ì²´ë¡œ ë³€í™˜í•˜ì—¬ ì´ë¯¸ì§€ ë°°ì—´ì— ì¶”ê°€\n        const fileUrl = response.data.file_url;\n        const filename = response.data.filename;\n\n        // íŒŒì¼ì„ Fetchë¡œ ê°€ì ¸ì™€ì„œ File ê°ì²´ ìƒì„±\n        const fileResponse = await fetch(fileUrl);\n        if (!fileResponse.ok) {\n          throw new Error(`${mediaType === 'video' ? 'ë¹„ë””ì˜¤' : 'ì´ë¯¸ì§€'} íŒŒì¼ ë‹¤ìš´ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤`);\n        }\n\n        const blob = await fileResponse.blob();\n\n        // íŒŒì¼ íƒ€ì… ê²°ì •\n        const ext = filename.split('.').pop()?.toLowerCase();\n        let mimeType = 'application/octet-stream';\n\n        if (mediaType === 'video') {\n          if (ext === 'mp4') mimeType = 'video/mp4';\n          else if (ext === 'mov') mimeType = 'video/quicktime';\n          else if (ext === 'avi') mimeType = 'video/x-msvideo';\n          else if (ext === 'webm') mimeType = 'video/webm';\n        } else {\n          if (ext === 'jpg' || ext === 'jpeg') mimeType = 'image/jpeg';\n          else if (ext === 'png') mimeType = 'image/png';\n          else if (ext === 'webp') mimeType = 'image/webp';\n          else if (ext === 'gif') mimeType = 'image/gif';\n        }\n\n        const file = new File([blob], filename, { type: mimeType });\n\n        console.log(`ğŸ“¸ ë¶ë§ˆí¬ ${mediaType === 'video' ? 'ë¹„ë””ì˜¤' : 'ì´ë¯¸ì§€'} íŒŒì¼ ìƒì„± ì™„ë£Œ - fileName:`, filename, 'imageIndex:', currentBookmarkIndex);\n\n        // ì´ë¯¸ì§€ ë°°ì—´ ì—…ë°ì´íŠ¸\n        handleIndividualImageUpload(currentBookmarkIndex, [file]);\n\n        setGenerationStatus(prev => ({ ...prev, [currentBookmarkIndex]: 'success' }));\n        setTimeout(() => {\n          setGenerationStatus(prev => {\n            const newStatus = { ...prev };\n            delete newStatus[currentBookmarkIndex];\n            return newStatus;\n          });\n        }, 3000);\n\n        console.log(`âœ… ë¶ë§ˆí¬ ${mediaType === 'video' ? 'ë¹„ë””ì˜¤' : 'ì´ë¯¸ì§€'} ë³µì‚¬ ë° ì—…ë¡œë“œ ì™„ë£Œ`);\n      }\n    } catch (error: any) {\n      console.error(`âŒ ë¶ë§ˆí¬ ${mediaType === 'video' ? 'ë¹„ë””ì˜¤' : 'ì´ë¯¸ì§€'} ì„ íƒ ì˜¤ë¥˜:`, error);\n      setGenerationStatus(prev => ({ ...prev, [currentBookmarkIndex]: 'error' }));\n      setUploadErrors(prev => ({ ...prev, [currentBookmarkIndex]: error.message || `ë¶ë§ˆí¬ ${mediaType === 'video' ? 'ë¹„ë””ì˜¤' : 'ì´ë¯¸ì§€'} ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨` }));\n\n      setTimeout(() => {\n        setGenerationStatus(prev => {\n          const newStatus = { ...prev };\n          delete newStatus[currentBookmarkIndex];\n          return newStatus;\n        });\n      }, 5000);\n    }\n  };\n\n  // ë¹„ë””ì˜¤ ë¯¸ë¦¬ë³´ê¸° ì»´í¬ë„ŒíŠ¸ (ë¸Œë¼ìš°ì € ì§ì ‘ ì¬ìƒ)\n  const VideoPreview: React.FC<{ file: File }> = memo(({ file }) => {\n    const [videoUrl, setVideoUrl] = useState<string | null>(null);\n\n    useEffect(() => {\n      // ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ ì¬ìƒí•  ìˆ˜ ìˆë„ë¡ URL ìƒì„±\n      const url = URL.createObjectURL(file);\n      setVideoUrl(url);\n\n      return () => {\n        if (url) {\n          URL.revokeObjectURL(url);\n        }\n      };\n    }, [file]);\n\n    return (\n      <Box sx={{ position: 'relative' }}>\n        {videoUrl && (\n          <video\n            src={videoUrl}\n            style={{\n              width: '100%',\n              aspectRatio: '1/1',\n              objectFit: 'cover',\n              borderRadius: '8px'\n            }}\n            autoPlay\n            muted\n            loop\n            playsInline\n            controls={false}\n            onError={(e) => {\n              console.error('ë¹„ë””ì˜¤ ì¬ìƒ ì˜¤ë¥˜:', e);\n            }}\n          />\n        )}\n\n        {/* ë¹„ë””ì˜¤ ì•„ì´ì½˜ ì˜¤ë²„ë ˆì´ */}\n        <Box\n          sx={{\n            position: 'absolute',\n            top: 8,\n            left: 8,\n            bgcolor: 'rgba(0,0,0,0.7)',\n            borderRadius: 1,\n            p: 0.5,\n            display: 'flex',\n            alignItems: 'center'\n          }}\n        >\n          <MovieIcon sx={{ fontSize: 16, color: 'white' }} />\n          <Typography variant=\"caption\" color=\"white\" sx={{ ml: 0.5 }}>\n            ì˜ìƒ\n          </Typography>\n        </Box>\n      </Box>\n    );\n  });\n\n  // ê°œë³„ ë“œë˜ê·¸ì•¤ë“œë¡­ ì»´í¬ë„ŒíŠ¸ (React.memoë¡œ ìµœì í™”)\n  const IndividualDropZone: React.FC<{\n    imageIndex: number;\n    pair: TextImagePair & { imageIndex: number };\n  }> = memo(({ imageIndex, pair }) => {\n    const onDrop = useCallback((acceptedFiles: File[]) => {\n      handleIndividualImageUpload(imageIndex, acceptedFiles);\n    }, [imageIndex]);\n\n    const { getRootProps, getInputProps, isDragActive } = useDropzone({\n      onDrop,\n      accept: {\n        'image/*': ['.jpeg', '.jpg', '.png', '.gif', '.webp', '.bmp', '.heic', '.heif'],\n        'video/*': ['.mp4', '.mov', '.avi', '.webm', '.mkv']\n      },\n      maxFiles: 1,\n      multiple: false\n    });\n\n    const isGenerating = generationStatus[imageIndex] === 'generating';\n    const generationError = generationStatus[imageIndex] === 'error';\n    const generationSuccess = generationStatus[imageIndex] === 'success';\n    const currentGenerationType = generationType[imageIndex];\n    const uploadError = uploadErrors[imageIndex];\n    const isPromptExpanded = promptsExpanded[imageIndex] || false;\n    const currentCustomPrompt = customPrompts[imageIndex];\n\n    // ğŸ¨ íŒ¨ë‹ ì˜µì…˜ ìƒíƒœ (ê¸°ë³¸ê°’: true)\n    const currentPanningOption = imagePanningOptions[imageIndex] !== undefined\n      ? imagePanningOptions[imageIndex]\n      : true;\n\n    // âœ… ì‹¬í”Œí•œ ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ í•¸ë“¤ëŸ¬ (ë³µì¡í•œ ë¡œì»¬ ìƒíƒœ/ë””ë°”ìš´ìŠ¤ ì œê±°)\n\n    return (\n      <Card sx={{ height: '100%', display: 'flex', flexDirection: 'column' }}>\n        <CardContent sx={{ flex: 1 }}>\n          {/* í…ìŠ¤íŠ¸ í‘œì‹œ */}\n          <Typography variant=\"h6\" gutterBottom sx={{\n            fontSize: '0.9rem',\n            fontWeight: 600,\n            color: 'primary.main',\n            mb: 2\n          }}>\n            {pair.textKey.replace('body', 'ëŒ€ì‚¬ ').replace('+body', ' + ëŒ€ì‚¬ ')}\n          </Typography>\n\n          {/* ëª¨ë“  ëª¨ë“œ: ê°œë³„ í…ìŠ¤íŠ¸ë°•ìŠ¤ */}\n          {pair.originalTexts ? (\n            <Box sx={{ mb: 2 }}>\n              {pair.originalTexts.map((originalText, idx) => {\n                // âœ… ì•ˆì •ì ì¸ ê³ ìœ  í‚¤: textKey ì‚¬ìš© (imageIndexëŠ” ìˆœì„œ ë³€ê²½ ì‹œ ë°”ë€œ)\n                const stableRefKey = `${pair.textKey}-${idx}`;\n                const stableKey = `text-${pair.textKey}-${idx}`;\n\n                // âœ… ìºì‹œëœ ê°’ì´ ìˆìœ¼ë©´ ì‚¬ìš©, ì—†ìœ¼ë©´ ì›ë³¸ ì‚¬ìš©\n                const initialValue = textFieldValuesCache.current[stableRefKey] || originalText;\n\n                return (\n                  <TextField\n                    key={stableKey}\n                    fullWidth\n                    multiline\n                    rows={2}\n                    defaultValue={initialValue}\n                    inputRef={(el) => {\n                      if (el) {\n                        textFieldRefs.current[stableRefKey] = el;\n                        // âœ… imageIndex ê¸°ë°˜ refë„ ìœ ì§€ (AI ìƒì„± ì‹œ ì‚¬ìš©)\n                        textFieldRefs.current[`${imageIndex}-${idx}`] = el;\n                      }\n                    }}\n                    onChange={(e) => {\n                      // âœ… ê°’ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ ìºì‹œì— ì €ì¥\n                      textFieldValuesCache.current[stableRefKey] = e.target.value;\n                    }}\n                    label={imageUploadMode === 'per-two-scripts' ? `ëŒ€ì‚¬ ${pair.textIndex + idx + 1}` :\n                           imageUploadMode === 'per-script' ? `ëŒ€ì‚¬ ${pair.textIndex + 1}` :\n                           `ëŒ€ì‚¬ ${idx + 1}`}\n                    variant=\"outlined\"\n                    size=\"small\"\n                    sx={{ mb: 1 }}\n                    helperText={idx === 0 ? \"ìˆ˜ì •ëœ í…ìŠ¤íŠ¸ëŠ” ì˜ìƒ ìƒì„± ì‹œ ì‚¬ìš©ë©ë‹ˆë‹¤\" : \"\"}\n                  />\n                );\n              })}\n            </Box>\n          ) : (\n            <Typography variant=\"body2\" sx={{\n              mb: 2,\n              p: 1.5,\n              bgcolor: 'grey.50',\n              borderRadius: 1,\n              border: '1px solid',\n              borderColor: 'grey.200',\n              fontSize: '0.8rem',\n              lineHeight: 1.4\n            }}>\n              {pair.textContent}\n            </Typography>\n          )}\n\n          {/* ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ ì„¹ì…˜ */}\n          <Box sx={{ mb: 2 }}>\n            <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 1 }}>\n              <Typography variant=\"caption\" color=\"text.secondary\" sx={{ fontWeight: 600 }}>\n                AI ìƒì„± ì˜µì…˜\n              </Typography>\n              <IconButton\n                size=\"small\"\n                onClick={() => togglePromptExpanded(imageIndex)}\n                sx={{ p: 0.5 }}\n              >\n                {isPromptExpanded ? <ExpandLess fontSize=\"small\" /> : <ExpandMore fontSize=\"small\" />}\n              </IconButton>\n            </Box>\n\n            <Collapse in={isPromptExpanded}>\n              <Box sx={{ bgcolor: 'rgba(25, 118, 210, 0.04)', p: 1.5, borderRadius: 1, border: '1px solid rgba(25, 118, 210, 0.12)' }}>\n                <FormControlLabel\n                  control={\n                    <Switch\n                      checked={currentCustomPrompt?.enabled || false}\n                      onChange={(e) => {\n                        toggleCustomPrompt(imageIndex, e.target.checked);\n                      }}\n                      size=\"small\"\n                    />\n                  }\n                  label={\n                    <Typography variant=\"caption\" sx={{ fontWeight: 500 }}>\n                      ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ ì‚¬ìš©\n                    </Typography>\n                  }\n                  sx={{ mb: 1, ml: 0 }}\n                />\n\n                <TextField\n                  key={`prompt-${imageIndex}`}\n                  fullWidth\n                  multiline\n                  rows={2}\n                  size=\"small\"\n                  placeholder=\"ì´ë¯¸ì§€ ìƒì„±ì„ ìœ„í•œ ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”...\"\n                  defaultValue={customPromptValuesCache.current[imageIndex] || currentCustomPrompt?.prompt || ''}\n                  inputRef={(el) => {\n                    if (el) customPromptRefs.current[imageIndex] = el;\n                  }}\n                  onChange={(e) => {\n                    // âœ… ê°’ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ ìºì‹œì— ì €ì¥\n                    customPromptValuesCache.current[imageIndex] = e.target.value;\n                  }}\n                  variant=\"outlined\"\n                  sx={{\n                    display: currentCustomPrompt?.enabled ? 'block' : 'none',\n                    '& .MuiOutlinedInput-root': {\n                      fontSize: '0.75rem',\n                      bgcolor: 'white'\n                    }\n                  }}\n                  helperText=\"ì‹¤ì œ ì˜ìƒì—ì„œëŠ” ê¸°ì¡´ ëŒ€ì‚¬ê°€ ì‚¬ìš©ë˜ë©°, ì´ í”„ë¡¬í”„íŠ¸ëŠ” ì´ë¯¸ì§€ ìƒì„±ì—ë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤.\"\n                  autoComplete=\"off\"\n                  spellCheck=\"false\"\n                />\n\n                {!currentCustomPrompt?.enabled && (\n                  <Typography variant=\"caption\" color=\"text.secondary\" sx={{ fontStyle: 'italic' }}>\n                    ê¸°ë³¸ ëª¨ë“œ: ìœ„ì˜ ëŒ€ì‚¬ ë‚´ìš©ì„ ê¸°ë°˜ìœ¼ë¡œ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\n                  </Typography>\n                )}\n              </Box>\n            </Collapse>\n          </Box>\n\n          {/* ì´ë¯¸ì§€/ë¹„ë””ì˜¤ í‘œì‹œ ë˜ëŠ” ë“œë˜ê·¸ì•¤ë“œë¡­ ì˜ì—­ */}\n          {pair.image ? (\n            <Box sx={{ position: 'relative', mb: 2 }}>\n              {(() => {\n                // ë¹„ë””ì˜¤ íŒŒì¼ í™•ì¸ (MIME íƒ€ì… + í™•ì¥ì)\n                const fileName = pair.image.name.toLowerCase();\n                const videoExtensions = ['.mp4', '.mov', '.avi', '.webm', '.mkv'];\n                const isVideo = pair.image.type.startsWith('video/') || videoExtensions.some(ext => fileName.endsWith(ext));\n\n                // HEIC íŒŒì¼ í™•ì¸\n                const heicExtensions = ['.heic', '.heif'];\n                const isHEIC = heicExtensions.some(ext => fileName.endsWith(ext));\n\n                if (isVideo) {\n                  return <VideoPreview file={pair.image} />;\n                } else if (isHEIC) {\n                  // HEIC íŒŒì¼ì€ ë¸Œë¼ìš°ì €ì—ì„œ ë¯¸ë¦¬ë³´ê¸° ë¶ˆê°€ â†’ íŒŒì¼ëª… í‘œì‹œ\n                  return (\n                    <Box\n                      sx={{\n                        width: '100%',\n                        aspectRatio: '1/1',\n                        backgroundColor: '#f5f5f5',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        flexDirection: 'column',\n                        borderRadius: 1,\n                        border: '2px dashed #ccc'\n                      }}\n                    >\n                      <Typography variant=\"h6\" color=\"text.secondary\">ğŸ“·</Typography>\n                      <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mt: 1, px: 2, textAlign: 'center' }}>\n                        {pair.image.name}\n                      </Typography>\n                      <Typography variant=\"caption\" color=\"text.secondary\">\n                        (HEIC íŒŒì¼ - ë¯¸ë¦¬ë³´ê¸° ë¶ˆê°€)\n                      </Typography>\n                    </Box>\n                  );\n                } else {\n                  // ì¼ë°˜ ì´ë¯¸ì§€\n                  return (\n                    <Box\n                      sx={{\n                        width: '100%',\n                        aspectRatio: '1/1',\n                        backgroundImage: `url(${URL.createObjectURL(pair.image)})`,\n                        backgroundSize: 'cover',\n                        backgroundPosition: 'center',\n                        borderRadius: 1\n                      }}\n                    />\n                  );\n                }\n              })()}\n              \n              {/* ì´ë¯¸ì§€ ì»¨íŠ¸ë¡¤ ë²„íŠ¼ë“¤ */}\n              <Box sx={{ \n                position: 'absolute', \n                top: 8, \n                right: 8,\n                display: 'flex',\n                gap: 0.5\n              }}>\n                <IconButton\n                  size=\"small\"\n                  onClick={() => handleDownloadImage(imageIndex, pair.image!)}\n                  sx={{\n                    bgcolor: 'rgba(255,255,255,0.9)',\n                    '&:hover': { bgcolor: 'rgba(255,255,255,1)' }\n                  }}\n                  title=\"ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ\"\n                >\n                  <Download color=\"success\" fontSize=\"small\" />\n                </IconButton>\n                <IconButton\n                  size=\"small\"\n                  onClick={() => handleRemoveImage(imageIndex)}\n                  sx={{\n                    bgcolor: 'rgba(255,255,255,0.9)',\n                    '&:hover': { bgcolor: 'rgba(255,255,255,1)' }\n                  }}\n                  title=\"ì´ë¯¸ì§€ ì‚­ì œ\"\n                >\n                  <Delete color=\"error\" fontSize=\"small\" />\n                </IconButton>\n                <IconButton\n                  size=\"small\"\n                  onClick={() => {\n                    // âœ… refì—ì„œ í˜„ì¬ í”„ë¡¬í”„íŠ¸ ê°’ ì½ê¸°\n                    const currentPromptValue = customPromptRefs.current[imageIndex]?.value || '';\n                    const isEnabled = currentCustomPrompt?.enabled || false;\n\n                    console.log('ğŸ”„ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ í´ë¦­ë¨ - imageIndex:', imageIndex, 'pair:', pair);\n                    console.log('ğŸ“ ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ ê°’ (refì—ì„œ ì½ìŒ):', currentPromptValue);\n\n                    handleIndividualGenerate(\n                      imageIndex,\n                      pair,\n                      currentPromptValue,\n                      isEnabled\n                    );\n                  }}\n                  disabled={isGenerating}\n                  sx={{\n                    bgcolor: 'rgba(255,255,255,0.9)',\n                    '&:hover': { bgcolor: 'rgba(255,255,255,1)' }\n                  }}\n                  title=\"ì´ë¯¸ì§€ ì¬ìƒì„±\"\n                >\n                  {isGenerating ? (\n                    <CircularProgress size={16} />\n                  ) : (\n                    <Refresh color=\"primary\" fontSize=\"small\" />\n                  )}\n                </IconButton>\n              </Box>\n\n              <Typography variant=\"caption\" sx={{\n                position: 'absolute',\n                bottom: 4,\n                left: 8,\n                bgcolor: 'rgba(0,0,0,0.7)',\n                color: 'white',\n                px: 1,\n                py: 0.5,\n                borderRadius: 1\n              }}>\n                {pair.image.name}\n              </Typography>\n\n              {/* ğŸ¨ íŒ¨ë‹ ì˜µì…˜ ì„¹ì…˜ (ì´ë¯¸ì§€ê°€ ìˆì„ ë•Œë§Œ í‘œì‹œ, ë¹„ë””ì˜¤ ì œì™¸) */}\n              {!pair.image.type.startsWith('video/') && (\n                <Box sx={{\n                  mt: 2,\n                  p: 1.5,\n                  bgcolor: 'rgba(76, 175, 80, 0.04)',\n                  borderRadius: 1,\n                  border: '1px solid rgba(76, 175, 80, 0.2)'\n                }}>\n                  <FormControlLabel\n                    control={\n                      <Switch\n                        checked={currentPanningOption}\n                        onChange={(e) => togglePanningOption(imageIndex, e.target.checked)}\n                        size=\"small\"\n                        color=\"success\"\n                      />\n                    }\n                    label={\n                      <Box>\n                        <Typography variant=\"caption\" sx={{ fontWeight: 600, display: 'block' }}>\n                          ğŸ¬ íŒ¨ë‹ íš¨ê³¼\n                        </Typography>\n                        <Typography variant=\"caption\" color=\"text.secondary\" sx={{ fontSize: '0.7rem' }}>\n                          {currentPanningOption\n                            ? 'ì´ë¯¸ì§€ê°€ ì¢Œìš°/ìƒí•˜ë¡œ ë¶€ë“œëŸ½ê²Œ ì›€ì§ì…ë‹ˆë‹¤'\n                            : 'ì´ë¯¸ì§€ê°€ ê³ ì •ë˜ì–´ ì›€ì§ì´ì§€ ì•ŠìŠµë‹ˆë‹¤'}\n                        </Typography>\n                      </Box>\n                    }\n                    sx={{ ml: 0, width: '100%' }}\n                  />\n                </Box>\n              )}\n            </Box>\n          ) : (\n            <Box\n              {...getRootProps()}\n              sx={{\n                border: 2,\n                borderColor: isDragActive ? 'primary.main' : 'grey.300',\n                borderStyle: 'dashed',\n                borderRadius: 1,\n                p: 2,\n                textAlign: 'center',\n                cursor: 'pointer',\n                bgcolor: isDragActive ? 'action.hover' : 'background.paper',\n                mb: 2,\n                aspectRatio: '1/1',\n                display: 'flex',\n                flexDirection: 'column',\n                justifyContent: 'center',\n                '&:hover': {\n                  borderColor: 'primary.main',\n                  bgcolor: 'action.hover'\n                }\n              }}\n            >\n              <input {...getInputProps()} />\n              <Box sx={{ display: 'flex', justifyContent: 'center', width: '100%' }}>\n                <CloudUpload sx={{ fontSize: 32, color: 'grey.400', mb: 1 }} />\n              </Box>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                {isDragActive ? 'íŒŒì¼ì„ ë†“ìœ¼ì„¸ìš”' : 'ë¯¸ë””ì–´ ë“œë˜ê·¸ ë˜ëŠ” í´ë¦­'}\n              </Typography>\n              <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: 'block', mt: 0.5, fontSize: '0.7rem' }}>\n                ìµœëŒ€ {imageUploadMode === 'single-for-all' ? '40MB' : '10MB'}\n              </Typography>\n            </Box>\n          )}\n\n          {/* ìƒíƒœ ë©”ì‹œì§€ */}\n          {isGenerating && (\n            <Alert severity=\"info\" sx={{ mt: 1 }}>\n              <Box sx={{ display: 'flex', alignItems: 'center' }}>\n                <CircularProgress size={16} sx={{ mr: 1 }} />\n                {currentGenerationType === 'bookmark' ? 'ë¯¸ë””ì–´ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...' : 'ì´ë¯¸ì§€ ìƒì„± ì¤‘...'}\n              </Box>\n            </Alert>\n          )}\n\n          {generationSuccess && (\n            <Alert severity=\"success\" sx={{ mt: 1 }}>\n              {currentGenerationType === 'bookmark' ? 'ë¯¸ë””ì–´ ë¶ˆëŸ¬ì˜¤ê¸° ì™„ë£Œ!' : 'ì´ë¯¸ì§€ ìƒì„± ì™„ë£Œ!'}\n            </Alert>\n          )}\n\n          {generationError && (\n            <Alert severity=\"error\" sx={{ mt: 1 }}>\n              {currentGenerationType === 'bookmark' ? 'ë¯¸ë””ì–´ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.' : 'ì´ë¯¸ì§€ ìƒì„± ì‹¤íŒ¨. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.'}\n            </Alert>\n          )}\n          \n          {uploadError && (\n            <Alert severity=\"error\" sx={{ mt: 1 }}>\n              {uploadError}\n            </Alert>\n          )}\n        </CardContent>\n\n        {/* í•˜ë‹¨ ì•¡ì…˜ ë²„íŠ¼ */}\n        <Box sx={{ p: 1.5, pt: 0, display: 'flex', flexDirection: 'column', gap: 1 }}>\n          <Button\n            fullWidth\n            variant=\"outlined\"\n            size=\"small\"\n            startIcon={<AutoFixHigh />}\n            onClick={() => {\n              // âœ… refì—ì„œ í˜„ì¬ í”„ë¡¬í”„íŠ¸ ê°’ ì½ê¸°\n              const currentPromptValue = customPromptRefs.current[imageIndex]?.value || '';\n              const isEnabled = currentCustomPrompt?.enabled || false;\n\n              console.log('ğŸ–±ï¸ ìë™ìƒì„± ë²„íŠ¼ í´ë¦­ë¨ - imageIndex:', imageIndex, 'pair:', pair);\n              console.log('ğŸ“ ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ ê°’ (refì—ì„œ ì½ìŒ):', currentPromptValue);\n              console.log('âœ… ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ enabled:', isEnabled);\n\n              handleIndividualGenerate(\n                imageIndex,\n                pair,\n                currentPromptValue,\n                isEnabled\n              );\n            }}\n            disabled={isGenerating}\n            sx={{\n              bgcolor: currentCustomPrompt?.enabled ? 'rgba(25, 118, 210, 0.08)' : 'transparent',\n              borderColor: currentCustomPrompt?.enabled ? 'primary.main' : 'grey.300',\n              color: currentCustomPrompt?.enabled ? 'primary.main' : 'text.primary',\n              '&:hover': {\n                bgcolor: currentCustomPrompt?.enabled ? 'rgba(25, 118, 210, 0.12)' : 'action.hover',\n              }\n            }}\n          >\n            {isGenerating ? 'ìƒì„±ì¤‘...' : (currentCustomPrompt?.enabled ? 'ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ë¡œ ìƒì„±' : 'AI ìë™ìƒì„±')}\n          </Button>\n\n          <Button\n            fullWidth\n            variant=\"outlined\"\n            size=\"small\"\n            startIcon={<VideoLibrary />}\n            onClick={() => handleOpenBookmarkModal(imageIndex)}\n            disabled={isGenerating}\n            sx={{\n              borderColor: 'secondary.main',\n              color: 'secondary.main',\n              '&:hover': {\n                bgcolor: 'rgba(156, 39, 176, 0.08)',\n                borderColor: 'secondary.main',\n              }\n            }}\n          >\n            ë¯¸ë””ì–´ ë¶ˆëŸ¬ì˜¤ê¸°\n          </Button>\n        </Box>\n      </Card>\n    );\n  });\n\n  return (\n    <Box>\n      <Typography variant=\"h6\" gutterBottom sx={{ mb: 3 }}>\n        í…ìŠ¤íŠ¸-ì´ë¯¸ì§€ ë§¤ì¹­ ê´€ë¦¬\n      </Typography>\n      \n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        ê° í…ìŠ¤íŠ¸ì— ëŒ€ì‘ë˜ëŠ” ì´ë¯¸ì§€ë¥¼ ê°œë³„ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n        ë“œë˜ê·¸ì•¤ë“œë¡­ìœ¼ë¡œ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ê±°ë‚˜ AIë¡œ ìë™ ìƒì„±í•˜ì„¸ìš”.\n        <br />\n        <Typography component=\"span\" variant=\"caption\" color=\"text.secondary\">\n          íŒŒì¼ í¬ê¸° ì œí•œ: {imageUploadMode === 'single-for-all' ? 'ìµœëŒ€ 40MB' : 'ê° íŒŒì¼ ìµœëŒ€ 10MB'}\n        </Typography>\n      </Typography>\n\n      <Grid container spacing={2}>\n        {textImagePairs.map((pair, index) => (\n          <Grid item xs={12} sm={6} md={4} key={`dropzone-${pair.imageIndex}-${pair.textKey}`}>\n            <IndividualDropZone imageIndex={pair.imageIndex} pair={pair} />\n          </Grid>\n        ))}\n      </Grid>\n\n      {textImagePairs.length === 0 && (\n        <Alert severity=\"info\" sx={{ mt: 2 }}>\n          ëŒ€ë³¸ì„ ë¨¼ì € ì‘ì„±í•´ì£¼ì„¸ìš”.\n        </Alert>\n      )}\n\n      {/* ë¶ë§ˆí¬ ë¯¸ë””ì–´ ì„ íƒ ëª¨ë‹¬ */}\n      <MediaBookmarkModal\n        open={bookmarkModalOpen}\n        onClose={handleCloseBookmarkModal}\n        onSelect={handleSelectBookmarkMedia}\n      />\n    </Box>\n  );\n});\n\n// Display name for debugging\nTextImagePairManager.displayName = 'TextImagePairManager';\n\nexport default TextImagePairManager;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}